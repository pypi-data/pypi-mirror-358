<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<!--
# NeXus - Neutron and X-ray Common Data Format
#
# Copyright (C) 2022-2025 NeXus International Advisory Committee (NIAC)
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXem" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <doc>
        Application definition for normalized representation of electron microscopy research.
        
        This application definition is a comprehensive example for a general description
        with which to normalize specific (meta)data collected from the research field
        of electron microscopy
        
        NXem is designed to be used for documenting experiments or computer simulations in which
        controlled electron beams are used for studying electron-beam matter interaction to explore
        physical mechanisms and phenomena or to characterize materials with an electron microscope.
    </doc>
    <!--docstrings should be organize as such a list of blocks:
-| req: first part, concept definition, human-readable but such that one could take as is to define an concept in OWL
-| opt: second part, comment, i.e. information that in an ideal world would be ideal if represented strongly semantic
but for practical purposes currently is interpretable only by human to provide them further contextualization
-| recommended: xref part ideally also as a list of triple (spec, term, url to uri)-->
    <group type="NXentry" minOccurs="1" maxOccurs="unbounded">
        <field name="definition" type="NX_CHAR">
            <enumeration>
                <item value="NXem"/>
            </enumeration>
        </field>
        <group name="profiling" type="NXcs_profiling" optional="true">
            <doc>
                The configuration of the software that was used to generate this NeXus file.
            </doc>
            <group type="NXprogram" minOccurs="0" maxOccurs="unbounded">
                <doc>
                    A collection of all programs and libraries that are considered as relevant
                    to understand with which software tools this NeXus file instance was
                    generated. Ideally, to enable a binary recreation from the input data.
                    
                    Examples include the name and version of the libraries used to write the
                    instance. Ideally, the software which writes these NXprogram instances
                    also includes the version of the set of NeXus classes i.e. the specific set
                    of base classes, application definitions, and contributed definitions
                    with which the here described concepts can be resolved.
                    
                    For the `pynxtools library &lt;https://github.com/FAIRmat-NFDI/pynxtools&gt;`_
                    which is used by the `NOMAD &lt;https://nomad-lab.eu/nomad-lab&gt;`_
                    research data management system, it makes sense to store e.g. the GitHub
                    repository commit and respective submodule references used.
                    
                    Instances can also be used to document the modules and libraries that
                    are offered by the computational environment such as those parsed
                    from conda or python virtualenv environments.
                </doc>
                <field name="program" type="NX_CHAR">
                    <attribute name="version" type="NX_CHAR"/>
                </field>
            </group>
        </group>
        <field name="experiment_alias" type="NX_CHAR" optional="true">
            <doc>
                Alias (short name) which scientists can use to refer to this experiment.
            </doc>
        </field>
        <field name="experiment_description" type="NX_CHAR" optional="true">
            <doc>
                Free-text description about the experiment.
                
                Users are strongly advised to parameterize the description of their experiment
                by using respective groups and fields and base classes instead of writing prose
                into the field. The reason is that such free-text field is difficult to machine-interpret.
                The motivation behind keeping this field for now is to learn in how far the
                current base classes need extension based on user feedback.
            </doc>
        </field>
        <field name="start_time" type="NX_DATE_TIME">
            <doc>
                ISO 8601 time code with local time zone offset to UTC information included
                when the microscope session started. If the application demands that time
                codes in this section of the application definition should only be used
                for specifying when the experiment was performed - and the exact
                duration is not relevant - use this start_time field.
                
                Often though it is useful to specify a time interval via setting both a start_time
                and an end_time because this enables software tools and users to collect a
                more detailed bookkeeping of the experiment.
                
                Users should be aware though that even using only start_time and end_time
                may not be sufficient to infer how long the experiment took or for how long
                data were acquired. To bookkeep more fine-grained timestamps over the
                course of the experiment is possible with start_time and end_time fields
                of respective :ref:`NXevent_data_em` instances.
            </doc>
        </field>
        <field name="end_time" type="NX_DATE_TIME" recommended="true">
            <doc>
                ISO 8601 time code with local time zone offset to UTC included when
                the microscope session ended.
                
                See docstring of the start_time field to see how to use the
                start_time and end_time together.
            </doc>
        </field>
        <group type="NXcite" minOccurs="0" maxOccurs="unbounded"/>
        <group type="NXnote" minOccurs="0" maxOccurs="unbounded">
            <doc>
                Collection of serialized resources associated with the experiment.
                
                An example how to use this set is to document from which files in formatting
                of technology partners, the (meta)data in an instance of NXem were filled with
                during parsing to NeXus.
            </doc>
            <field name="type" type="NX_CHAR"/>
            <field name="file_name" type="NX_CHAR"/>
            <field name="checksum" type="NX_CHAR"/>
            <field name="algorithm" type="NX_CHAR"/>
        </group>
        <group type="NXuser" minOccurs="0" maxOccurs="unbounded">
            <doc>
                Information about persons who performed or were involved in the microscope
                session or simulation run.
                
                Examples could be to put here the principle investigator who performed this
                experiment or students who performed simulations to name but a few.
                Adding multiple users if relevant is recommended.
                
                The protection of personal data by laws is in different stages of development
                and strictness. Therefore, the existence of user data has not been made
                required.
                
                Instances should use user as a name prefix.
            </doc>
            <field name="identifierNAME" type="NX_CHAR" nameType="partial" recommended="true">
                <attribute name="type" type="NX_CHAR"/>
            </field>
            <field name="name" type="NX_CHAR" optional="true">
                <doc>
                    Given (first) name and surname.
                </doc>
            </field>
            <field name="affiliation" type="NX_CHAR" optional="true">
                <doc>
                    Name of the affiliation at the point in time when the experiment was performed.
                </doc>
            </field>
            <field name="address" type="NX_CHAR" optional="true">
                <doc>
                    Postal address of the affiliation.
                </doc>
            </field>
            <field name="email" type="NX_CHAR" optional="true">
                <doc>
                    Email address at the point in time when the experiment was performed.
                    
                    Writing the most permanently used email is recommended.
                </doc>
            </field>
            <field name="telephone_number" type="NX_CHAR" optional="true">
                <doc>
                    Telephone number at the point in time when the experiment was performed.
                </doc>
            </field>
            <field name="role" type="NX_CHAR" optional="true">
                <doc>
                    User role at the point in time when the experiment was performed.
                    
                    Examples are technician operating the microscope, student, postdoc,
                    principle investigator, or guest.
                </doc>
            </field>
        </group>
        <group name="SAMPLE" type="NXsample" minOccurs="1" maxOccurs="unbounded" nameType="any">
            <doc>
                A physical entity which contains material intended to be investigated.
                Sample and specimen are treated as de facto synonyms.
                Samples can be real or virtual ones as annotated via is_simulation.
                
                The suggested best practice is to call this group sample. In those cases when
                multiple samples need to be grouped inside one entry, these SAMPLE groups
                should be named using the prefix sample followed an index starting from 1, i.e.
                (sample1, sample2).
                
                There are at least two strategies how to store (meta)data when one analyzes multiple
                samples - not different ROIs on a single sample though - in one session.
                
                One strategy is to store each sample and its results under an own NXem/ENTRY.
                This is one of the most frequent use cases as during most sessions typically only a
                single sample is investigated. In this case the name of this group should be NXem/ENTRY/sample.
                
                If multiple samples are investigated storing each of them in an own ENTRY group eventually will
                demand an unnecessary duplication though of many details about the instrument.
                
                This can be avoided by using another strategy how to store all samples and their results.
                Namely, by using only one instance of NXem/ENTRY. That NXem/ENTRY should then be named,
                like in the previous case, NXem/entry1 and the samples should be named sample1, sample2, etc.,
                i.e. instances should use sample as a name prefix.
                
                In this case though the collection of events demands to use identifier_sample to state clearly
                for which of the samples loaded the (characterization) event was detected.
                
                This concept is related to term `Specimen`_ of the EMglossary standard.
                
                .. _Specimen: https://purls.helmholtz-metadaten.de/emg/EMG_00000046
            </doc>
            <field name="is_simulation" type="NX_BOOLEAN">
                <doc>
                    Qualifier whether the sample is a real (in which case is_simulation should be set to false)
                    or a virtual one (in which case is_simulation should be set to true).
                </doc>
            </field>
            <field name="physical_form" recommended="true">
                <enumeration open="true">
                    <item value="bulk"/>
                    <item value="foil"/>
                    <item value="thin_film"/>
                    <item value="powder"/>
                </enumeration>
            </field>
            <field name="identifier_sample" type="NX_CHAR" recommended="true">
                <doc>
                    Ideally, (globally) unique persistent identifier which distinguishes this sample from all others
                    and especially the predecessor/origin from where that sample was cut.  The terms sample
                    and specimen are here considered as exact synonyms.
                    
                    This field must not be used for an alias for the sample! Instead, use name.
                    
                    In cases where multiple specimens were loaded into the microscope, the identifier has to resolve
                    the specific sample, whose results are stored by this :ref:`NXentry` instance because a single
                    NXentry should be used for the characterization of a single specimen.
                    
                    Details about the specimen preparation should be stored in resources referring to identifier_parent.
                </doc>
                <attribute name="type" type="NX_CHAR"/>
            </field>
            <field name="identifier_parent" type="NX_CHAR" recommended="true">
                <doc>
                    Identifier of the sample from which the sample was cut or the string *None*,
                    i.e. the parent to this sample.
                    
                    The purpose of this field is to support functionalities for tracking
                    sample provenance in a research data management system.
                </doc>
                <attribute name="type" type="NX_CHAR"/>
            </field>
            <field name="preparation_date" type="NX_DATE_TIME">
                <doc>
                    ISO 8601 time code with local time zone offset to UTC information
                    when the specimen was prepared.
                    
                    Ideally, report the end of the preparation, i.e. the last known timestamp when
                    the measured specimen surface was actively prepared. Ideally, this matches
                    the last timestamp that is mentioned in the digital resource pointed to by
                    identifier_parent.
                    
                    Knowing when the specimen was exposed to e.g. specific atmosphere is especially
                    required for material that is sensitive to the environment such as specimens that were
                    charged with fast diffusing elements or short-lived radioactive tracers.
                    
                    Additional time stamps prior to preparation_date should better be placed in resources
                    which describe but do not pollute the description here with prose. Resolving these
                    connected metadata is considered as within the responsibility of the
                    research data management system and not the a NeXus file.
                </doc>
            </field>
            <field name="name" type="NX_CHAR" recommended="true">
                <doc>
                    An alias used to refer to the specimen to please readability for humans.
                </doc>
            </field>
            <field name="atom_types" type="NX_CHAR">
                <doc>
                    List of comma-separated elements from the periodic table that are contained in the sample.
                    If the sample substance has multiple components, all elements from each component
                    must be included in atom_types.
                    
                    The purpose of the field is to offer research data management systems an opportunity
                    to parse the relevant elements without having to interpret these from the resources
                    pointed to by identifier_parent or walk through eventually deeply nested groups in
                    individual data instances.
                </doc>
            </field>
            <field name="thickness" type="NX_NUMBER" optional="true" units="NX_LENGTH">
                <doc>
                    (Measured) sample thickness.
                    
                    The information is recorded to qualify if the beam used was likely
                    able to shine through the specimen. For scanning electron microscopy,
                    in many cases the specimen is typically thicker than what is
                    illuminatable by the electron beam.
                    
                    In this case the value should be set to the actual thickness of the specimen
                    viewed for an illumination situation where the nominal surface normal of the
                    specimen is parallel to the optical axis.
                </doc>
            </field>
            <field name="density" type="NX_NUMBER" optional="true" units="NX_ANY">
                <doc>
                    (Measured) density of the specimen.
                    
                    For multi-layered specimens this field should only be used to describe
                    the density of the excited volume. For scanning electron microscopy
                    the usage of this field is discouraged and instead an instance of a region-of-interest within connection to individual :ref:`NXevent_data_em`
                    instances can provide a cleaner description of the relevant details
                    why one may wish to store the density of the specimen.
                </doc>
            </field>
            <field name="description" type="NX_CHAR" optional="true">
                <doc>
                    Discouraged free-text field to provide further detail.
                </doc>
            </field>
        </group>
        <group name="consistent_rotations" type="NXobject" recommended="true">
            <doc>
                The conventions used when reporting crystal orientations.
                We follow the best practices of the Material Science community
                that are defined in reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
            </doc>
            <field name="rotation_handedness" type="NX_CHAR">
                <doc>
                    Convention how a positive rotation angle is defined when viewing
                    from the end of the rotation unit vector towards its origin.
                    This is in accordance with convention 2 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
                    
                    Counter_clockwise is equivalent to a right-handed choice.
                    Clockwise is equivalent to a left-handed choice.
                </doc>
                <enumeration>
                    <item value="counter_clockwise"/>
                    <item value="clockwise"/>
                </enumeration>
            </field>
            <field name="rotation_convention" type="NX_CHAR">
                <doc>
                    How are rotations interpreted into an orientation according to convention 3
                    of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
                </doc>
                <enumeration>
                    <item value="passive"/>
                    <item value="active"/>
                </enumeration>
            </field>
            <field name="euler_angle_convention" type="NX_CHAR">
                <doc>
                    How are Euler angles interpreted given that there are several choices (e.g. zxz, xyz)
                    according to convention 4 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
                    
                    The most frequently used convention is zxz, which is based on the work of H.-J. Bunge
                    but other conventions are possible. Apart from undefined, proper Euler angles
                    are distinguished from (improper) Tait-Bryan angles.
                </doc>
                <enumeration>
                    <item value="zxz"/>
                    <item value="xyx"/>
                    <item value="yzy"/>
                    <item value="zyz"/>
                    <item value="xzx"/>
                    <item value="yxy"/>
                    <item value="xyz"/>
                    <item value="yzx"/>
                    <item value="zxy"/>
                    <item value="xzy"/>
                    <item value="zyx"/>
                    <item value="yxz"/>
                </enumeration>
            </field>
            <field name="axis_angle_convention" type="NX_CHAR">
                <doc>
                    To which angular range is the rotation angle argument of an
                    axis-angle pair parameterization constrained according to
                    convention 5 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
                </doc>
                <enumeration>
                    <item value="rotation_angle_on_interval_zero_to_pi"/>
                </enumeration>
            </field>
            <field name="sign_convention" type="NX_CHAR">
                <doc>
                    Which sign convention is followed when converting orientations
                    between different parametrizations/representations according
                    to convention 6 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
                </doc>
                <enumeration>
                    <item value="p_plus_one"/>
                    <item value="p_minus_one"/>
                </enumeration>
            </field>
        </group>
        <group type="NXcoordinate_system" minOccurs="1" maxOccurs="unbounded">
            <field name="alias" type="NX_CHAR" optional="true"/>
            <field name="type" type="NX_CHAR"/>
            <field name="handedness" type="NX_CHAR"/>
            <field name="origin" type="NX_CHAR"/>
        </group>
        <group name="processing_reference_frame" type="NXcoordinate_system" recommended="true">
            <field name="alias" type="NX_CHAR" optional="true"/>
            <field name="type" type="NX_CHAR"/>
            <field name="handedness" type="NX_CHAR"/>
            <field name="origin" type="NX_CHAR" recommended="true">
                <doc>
                    Location of the origin of the processing_reference_frame.
                    
                    It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
                    Edges are interpreted by inspecting the direction of their outer unit normals
                    (which point either parallel or antiparallel) along respective base vector direction
                    of the reference frame.
                    
                    If any of these assumptions is not met, the user is required to explicitly state this.
                </doc>
                <enumeration>
                    <item value="front_top_left"/>
                    <item value="front_top_right"/>
                    <item value="front_bottom_right"/>
                    <item value="front_bottom_left"/>
                    <item value="back_top_left"/>
                    <item value="back_top_right"/>
                    <item value="back_bottom_right"/>
                    <item value="back_bottom_left"/>
                </enumeration>
            </field>
            <field name="x_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing x-axis base vector of the
                    processing_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="y_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing y-axis base vector of the
                    processing_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="z_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing z-axis base vector of the
                    processing_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
        </group>
        <group name="sample_reference_frame" type="NXcoordinate_system" recommended="true">
            <field name="depends_on" type="NX_CHAR" optional="true">
                <doc>
                    Reference to the specifically named :ref:`NXsample` instance(s) for
                    which these conventions apply (e.g. /entry1/sample1).
                </doc>
            </field>
            <field name="alias" type="NX_CHAR" optional="true"/>
            <field name="type" type="NX_CHAR"/>
            <field name="handedness" type="NX_CHAR"/>
            <field name="origin" type="NX_CHAR" recommended="true">
                <doc>
                    Location of the origin of the sample_reference_frame.
                    
                    It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
                    Edges are interpreted by inspecting the direction of their outer unit normals
                    (which point either parallel or antiparallel) along respective base vector direction
                    of the reference frame.
                    
                    If any of these assumptions is not met, the user is required to explicitly state this.
                </doc>
                <enumeration>
                    <item value="front_top_left"/>
                    <item value="front_top_right"/>
                    <item value="front_bottom_right"/>
                    <item value="front_bottom_left"/>
                    <item value="back_top_left"/>
                    <item value="back_top_right"/>
                    <item value="back_bottom_right"/>
                    <item value="back_bottom_left"/>
                </enumeration>
            </field>
            <field name="x_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing x-axis base vector of the
                    sample_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="y_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing y-axis base vector of the
                    sample_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="z_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing z-axis base vector of the
                    sample_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
        </group>
        <group name="DETECTOR_REFERENCE_FRAME" type="NXcoordinate_system" nameType="any" minOccurs="0" maxOccurs="unbounded">
            <doc>
                Instances should use detector_reference_frame as a name prefix.
            </doc>
            <field name="depends_on" type="NX_CHAR" optional="true">
                <doc>
                    Reference to the specifically named :ref:`NXdetector` instance for
                    which these conventions apply (e.g. /entry1/instrument/detector1).
                    
                    Instances should use detector_reference_frame as a name prefix.
                </doc>
            </field>
            <field name="alias" type="NX_CHAR" optional="true"/>
            <field name="type" type="NX_CHAR"/>
            <field name="handedness" type="NX_CHAR"/>
            <field name="origin" type="NX_CHAR" recommended="true">
                <doc>
                    Location of the origin of the detector_reference_frame.
                    
                    If the regions-of-interest forms a rectangle or cuboid, it is assumed that edges are interpreted
                    by inspecting the direction of their outer unit normals (which point either parallel or antiparallel)
                    along respective base vector direction of the reference frame.
                    
                    If any of these assumptions is not met, the user is required to explicitly state this.
                </doc>
                <enumeration>
                    <item value="front_top_left"/>
                    <item value="front_top_right"/>
                    <item value="front_bottom_right"/>
                    <item value="front_bottom_left"/>
                    <item value="back_top_left"/>
                    <item value="back_top_right"/>
                    <item value="back_bottom_right"/>
                    <item value="back_bottom_left"/>
                </enumeration>
            </field>
            <field name="x_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing x-axis base vector of the
                    detector_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="y_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing y-axis base vector of the
                    detector_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
            <field name="z_direction" type="NX_CHAR" recommended="true">
                <doc>
                    Direction of the positively pointing z-axis base vector of the
                    detector_reference_frame.
                </doc>
                <enumeration>
                    <item value="north"/>
                    <item value="east"/>
                    <item value="south"/>
                    <item value="west"/>
                    <item value="in"/>
                    <item value="out"/>
                </enumeration>
            </field>
        </group>
        <group name="measurement" type="NXobject" optional="true">
            <!--the choice if a concept filling content in NXfabrication is recommended or optional
was made such that all for all those components which are typically add-ons in a
microscope it is more likely that individuals will have bought different third-party tools
and therefore, for these typically more optional add-ons NXfabrication is recommended
for others commercial microscopes often come with model-specific predefined parts
hence using optional is sufficient-->
            <group name="instrument" type="NXinstrument_em">
                <field name="name" type="NX_CHAR" recommended="true"/>
                <field name="location" type="NX_CHAR" recommended="true"/>
                <field name="type" type="NX_CHAR" recommended="true"/>
                <group name="fabrication" type="NXfabrication">
                    <field name="vendor" type="NX_CHAR"/>
                    <field name="model" type="NX_CHAR"/>
                    <field name="serial_number" type="NX_CHAR" recommended="true"/>
                </group>
                <group type="NXprogram" recommended="true">
                    <doc>
                        Details about the control program used for operating the microscope.
                        
                        Instances should use control_software as a name prefix.
                    </doc>
                    <field name="program" type="NX_CHAR">
                        <attribute name="version" type="NX_CHAR"/>
                    </field>
                </group>
                <group name="ebeam_column" type="NXebeam_column">
                    <group name="fabrication" type="NXfabrication" optional="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                    <group name="electron_source" type="NXsource" recommended="true">
                        <field name="emitter_type" type="NX_CHAR"/>
                        <field name="probe" type="NX_CHAR" optional="true"/>
                        <!--voltage like all other dynamic quantities should better be placed in instances of NXevent_data_em-->
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXlens_em" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use lens as a name prefix.
                        </doc>
                        <field name="name" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXaperture" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use aperture as a name prefix.
                        </doc>
                        <field name="name" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXmonochromator" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use monochromator as a name prefix.
                        </doc>
                        <field name="type" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group name="corrector_cs" type="NXcorrector_cs" minOccurs="0" maxOccurs="1">
                        <group name="fabrication" type="NXfabrication" recommended="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group name="corrector_ax" type="NXcomponent" minOccurs="0" maxOccurs="1">
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group name="BIPRISM" type="NXcomponent" nameType="any" minOccurs="0" maxOccurs="1">
                        <doc>
                            Instances should use biprism as a name prefix.
                        </doc>
                        <group name="fabrication" type="NXfabrication" recommended="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group name="PHASEPLATE" type="NXcomponent" nameType="any" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use phaseplate as a name prefix.
                        </doc>
                        <field name="type" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" recommended="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use sensor as a name prefix.
                        </doc>
                    </group>
                    <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use actuator as a name prefix.
                        </doc>
                    </group>
                    <group type="NXbeam" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use beam as a name prefix.
                        </doc>
                    </group>
                    <group type="NXdeflector" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use deflector as a name prefix.
                        </doc>
                    </group>
                </group>
                <group name="ibeam_column" type="NXibeam_column" minOccurs="0" maxOccurs="1">
                    <!--there are tri-beam SEMs, but with a laser for which one should add NXsource
fabrication groups often were not made recommended or required because in practice
often scientific groups buy a commercial microscope for which the type and serial number
of the microscope (as in the top-level fabrication of instrument) suffices to recover
which components that microscope was built from-->
                    <group name="fabrication" type="NXfabrication" optional="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                    <group name="ion_source" type="NXsource">
                        <field name="emitter_type" type="NX_CHAR"/>
                        <group name="probe" type="NXatom"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXlens_em" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use lens as a name prefix.
                        </doc>
                        <field name="name" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXaperture" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use aperture as a name prefix.
                        </doc>
                        <field name="name" type="NX_CHAR"/>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <group type="NXmonochromator" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use monochromator as a name prefix.
                        </doc>
                        <group name="fabrication" type="NXfabrication" optional="true">
                            <field name="vendor" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="serial_number" type="NX_CHAR" recommended="true"/>
                        </group>
                    </group>
                    <!--device for correcting axial astigmatism of ion beam?-->
                    <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use sensor as a name prefix.
                        </doc>
                    </group>
                    <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use actuator as a name prefix.
                        </doc>
                    </group>
                    <group type="NXbeam" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use beam as a name prefix.
                        </doc>
                    </group>
                    <group type="NXdeflector" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use deflector as a name prefix.
                        </doc>
                    </group>
                </group>
                <group type="NXdetector" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Instances should use detector as a name prefix.
                    </doc>
                    <field name="name" type="NX_CHAR"/>
                    <group name="fabrication" type="NXfabrication" recommended="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                </group>
                <group name="scan_controller" type="NXscanbox_em" optional="true">
                    <group name="fabrication" type="NXfabrication" recommended="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                </group>
                <group name="stage" type="NXmanipulator" minOccurs="0" maxOccurs="unbounded">
                    <field name="design" type="NX_CHAR" recommended="true"/>
                    <!--add enumeration values from old NXstage_lab-->
                    <group name="fabrication" type="NXfabrication" recommended="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                </group>
                <group name="nanoprobe" type="NXmanipulator" optional="true">
                    <group name="fabrication" type="NXfabrication" recommended="true">
                        <field name="vendor" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="serial_number" type="NX_CHAR" recommended="true"/>
                    </group>
                </group>
                <group type="NXpump" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Instances should use pump as a name prefix.
                    </doc>
                    <field name="design" type="NX_CHAR"/>
                </group>
                <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Instances should use sensor as a name prefix.
                    </doc>
                </group>
                <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Instances should use actuator as a name prefix.
                    </doc>
                </group>
            </group>
            <group name="events" type="NXobject" minOccurs="0" maxOccurs="1">
                <!--an instance must not have an NXevent_data_em_set but if it has one it must not be more than 1 !-->
                <doc>
                    This group should be used to store all event-related (meta)data,
                    which are typically measured datasets like images and spectra.
                    To avoid that static instrument-related metadata need to be stored
                    repetitively the NXem application definitions splits the storage of the
                    dynamic (meta)data that typically change for each image and spectrum
                    from the static one.
                </doc>
                <group type="NXevent_data_em" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Instances should use event as a name prefix.
                    </doc>
                    <field name="start_time" type="NX_DATE_TIME" recommended="true"/>
                    <field name="end_time" type="NX_DATE_TIME" recommended="true"/>
                    <field name="identifier_sample" type="NX_CHAR" recommended="true"/>
                    <!--above field is another example for lacking support to define conditional existence constraints-->
                    <group type="NXimage" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use image as a name prefix.
                            Each NXimage instance must use only one image or stack instance.
                        </doc>
                        <group type="NXprocess" recommended="true">
                            <group name="input" type="NXnote" recommended="true">
                                <field name="type" type="NX_CHAR"/>
                                <field name="file_name" type="NX_CHAR"/>
                                <field name="checksum" type="NX_CHAR"/>
                                <field name="algorithm" type="NX_CHAR"/>
                                <field name="context" type="NX_CHAR"/>
                            </group>
                            <field name="identifier_detector" type="NX_CHAR"/>
                        </group>
                        <group name="image_1d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_COMPLEX" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="image_2d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_COMPLEX" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="image_3d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_COMPLEX" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_k" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_1d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_group" type="NX_INT" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_image" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_2d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_group" type="NX_INT" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_image" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_3d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="real" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="imag" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="magnitude" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="intensity" type="NX_NUMBER" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_group" type="NX_INT" optional="true">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_image" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_k" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                    </group>
                    <group type="NXspectrum" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use spectrum as a name prefix.
                            Each NXspectrum instance must use only one spectrum or stack instance.
                        </doc>
                        <group type="NXprocess" recommended="true">
                            <group name="input" type="NXnote" recommended="true">
                                <field name="type" type="NX_CHAR"/>
                                <field name="file_name" type="NX_CHAR"/>
                                <field name="checksum" type="NX_CHAR"/>
                                <field name="algorithm" type="NX_CHAR"/>
                                <field name="context" type="NX_CHAR"/>
                            </group>
                            <field name="identifier_detector" type="NX_CHAR"/>
                        </group>
                        <group name="spectrum_0d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="spectrum_1d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="spectrum_2d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="spectrum_3d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_k" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_0d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_spectrum" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_1d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_spectrum" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_2d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_spectrum" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                        <group name="stack_3d" type="NXdata" optional="true">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="identifier_spectrum" type="NX_INT">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_k" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                            <field name="axis_energy" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                            </field>
                        </group>
                    </group>
                    <group name="instrument" type="NXinstrument_em" recommended="true">
                        <group name="ebeam_column" type="NXebeam_column">
                            <field name="operation_mode" type="NX_CHAR"/>
                            <group name="electron_source" type="NXsource" optional="true">
                                <field name="voltage" type="NX_NUMBER"/>
                                <field name="extraction_voltage" type="NX_NUMBER" optional="true"/>
                                <field name="emission_current" type="NX_NUMBER" optional="true"/>
                                <field name="filament_current" type="NX_NUMBER" optional="true"/>
                            </group>
                            <group type="NXlens_em" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use lens as a name prefix.
                                </doc>
                                <field name="power_setting" type="NX_CHAR_OR_NUMBER"/>
                            </group>
                            <group type="NXaperture" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use aperture as a name prefix.
                                </doc>
                                <field name="setting" type="NX_CHAR_OR_NUMBER" recommended="true">
                                    <doc>
                                        Descriptor for the aperture setting when the exact technical details
                                        are unknown or not directly controllable as the control software of
                                        the microscope does not enable or was not configured to display these
                                        values for users.
                                    </doc>
                                </field>
                            </group>
                            <!--size can be used as a fallback-->
                            <group type="NXmonochromator" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use monochromator as a name prefix.
                                </doc>
                                <field name="applied" type="NX_BOOLEAN"/>
                                <field name="dispersion" type="NX_NUMBER" recommended="true"/>
                                <field name="voltage" type="NX_NUMBER" recommended="true"/>
                            </group>
                            <group name="corrector_cs" type="NXcorrector_cs" minOccurs="0" maxOccurs="1">
                                <field name="applied" type="NX_BOOLEAN" recommended="true"/>
                                <group name="TABLEAU" type="NXprocess" nameType="any" minOccurs="1" maxOccurs="unbounded">
                                    <!--model(NX_CHAR):-->
                                    <!--ceos-->
                                    <doc>
                                        Instances should use tableau as a name prefix.
                                    </doc>
                                    <group name="c_1" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="a_1" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="b_2" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="a_2" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="s_3" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="a_3" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="b_4" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="d_4" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="a_4" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="s_5" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="r_5" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="a_6" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <!--nion-->
                                    <group name="c_1_0" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_1_2_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_1_2_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_2_1_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_2_1_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_2_3_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_2_3_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3_0" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3_2_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3_2_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3_4_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_3_4_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_1_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_1_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_3_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_3_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_5_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_4_5_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_0" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_2_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_2_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_4_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_4_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_6_a" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                    <group name="c_5_6_b" type="NXaberration" optional="true">
                                        <field name="magnitude" type="NX_NUMBER"/>
                                    </group>
                                </group>
                            </group>
                            <!--we could write down how to store the aberrations but we should not force to add aberrations
basically optional use of NXaberration therein at least some value required-->
                            <group name="corrector_ax" type="NXcomponent" minOccurs="0" maxOccurs="1">
                                <field name="applied" type="NX_BOOLEAN"/>
                                <field name="value_x" type="NX_NUMBER"/>
                                <field name="value_y" type="NX_NUMBER"/>
                            </group>
                            <!--biprism(NXcomponent):-->
                            <!--phaseplateID(NXcomponent):-->
                            <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use sensor as a name prefix.
                                </doc>
                            </group>
                            <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use actuator as a name prefix.
                                </doc>
                            </group>
                            <group type="NXbeam" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use beam as a name prefix.
                                </doc>
                            </group>
                            <group type="NXdeflector" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use deflector as a name prefix.
                                </doc>
                            </group>
                        </group>
                        <group name="ibeam_column" type="NXibeam_column" minOccurs="0" maxOccurs="1">
                            <group name="ion_source" type="NXsource">
                                <group name="probe" type="NXatom"/>
                                <field name="voltage" type="NX_NUMBER"/>
                                <field name="flux" type="NX_NUMBER"/>
                            </group>
                            <group type="NXlens_em" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use lens as a name prefix.
                                </doc>
                                <field name="power_setting" type="NX_CHAR_OR_NUMBER"/>
                            </group>
                            <group type="NXaperture" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use aperture as a name prefix.
                                </doc>
                                <field name="setting" type="NX_CHAR_OR_NUMBER">
                                    <doc>
                                        Descriptor for the aperture setting when the exact technical details
                                        are unknown or not directly controllable as the control software of
                                        the microscope does not enable or was not configured to display these
                                        values for users.
                                    </doc>
                                </field>
                            </group>
                            <group type="NXmonochromator" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use monochromator as a name prefix.
                                </doc>
                                <field name="applied" type="NX_BOOLEAN"/>
                            </group>
                            <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use sensor as a name prefix.
                                </doc>
                            </group>
                            <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use actuator as a name prefix.
                                </doc>
                            </group>
                            <group type="NXbeam" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use beam as a name prefix.
                                </doc>
                            </group>
                            <group type="NXdeflector" minOccurs="0" maxOccurs="unbounded">
                                <doc>
                                    Instances should use deflector as a name prefix.
                                </doc>
                            </group>
                        </group>
                        <group type="NXdetector" minOccurs="0" maxOccurs="unbounded">
                            <doc>
                                Instances should use detector as a name prefix.
                            </doc>
                            <field name="mode" type="NX_CHAR">
                                <doc>
                                    Operation mode of the detector as displayed by the control software.
                                </doc>
                            </field>
                        </group>
                        <group name="scan_controller" type="NXscanbox_em" optional="true">
                            <field name="scan_schema" type="NX_CHAR"/>
                            <field name="dwell_time" type="NX_NUMBER"/>
                        </group>
                        <group type="NXsensor" minOccurs="0" maxOccurs="unbounded">
                            <doc>
                                Instances should use sensor as a name prefix.
                            </doc>
                        </group>
                        <group type="NXactuator" minOccurs="0" maxOccurs="unbounded">
                            <doc>
                                Instances should use actuator as a name prefix.
                            </doc>
                        </group>
                        <group name="stage" type="NXmanipulator" minOccurs="0" maxOccurs="unbounded">
                            <field name="design" type="NX_CHAR" recommended="true"/>
                            <field name="tilt1" type="NX_NUMBER"/>
                            <field name="tilt2" type="NX_NUMBER"/>
                            <field name="rotation" type="NX_NUMBER"/>
                            <field name="position" type="NX_NUMBER"/>
                            <group name="sample_heater" type="NXactuator" optional="true">
                                <field name="physical_quantity" type="NX_CHAR"/>
                                <field name="heater_current" type="NX_NUMBER" optional="true" units="NX_CURRENT">
                                    <doc>
                                        Nominal current of the heater.
                                    </doc>
                                </field>
                                <field name="heater_voltage" type="NX_NUMBER" optional="true" units="NX_VOLTAGE">
                                    <doc>
                                        Nominal voltage of the heater.
                                    </doc>
                                </field>
                                <field name="heater_power" type="NX_NUMBER" units="NX_POWER"/>
                            </group>
                        </group>
                        <group name="optics" type="NXoptical_system_em" recommended="true"/>
                    </group>
                </group>
            </group>
        </group>
        <!--remains to be discussed based on examples-->
        <group name="SIMULATION" type="NXobject" nameType="any" minOccurs="0" maxOccurs="unbounded">
            <doc>
                Possibility for documenting a set of simulations of electron beam matter interaction.
                
                Instances should use simulation as a name prefix.
            </doc>
            <group type="NXprogram" recommended="true">
                <doc>
                    The program with which the simulation was performed.
                </doc>
                <field name="program" type="NX_CHAR">
                    <attribute name="version" type="NX_CHAR"/>
                </field>
            </group>
            <group name="environment" type="NXobject" recommended="true">
                <doc>
                    Programs and libraries representing the computational environment
                </doc>
                <group type="NXprogram" minOccurs="1" maxOccurs="unbounded">
                    <field name="program" type="NX_CHAR">
                        <attribute name="version" type="NX_CHAR"/>
                    </field>
                </group>
            </group>
            <group name="config" type="NXobject" optional="true">
                <doc>
                    Configuration of the simulation
                </doc>
            </group>
            <group name="results" type="NXobject" optional="true">
                <doc>
                    Results of the simulation
                </doc>
                <group type="NXimage" minOccurs="0" maxOccurs="unbounded"/>
                <group type="NXspectrum" minOccurs="0" maxOccurs="unbounded"/>
                <group name="INTERACTION_VOLUME" type="NXobject" nameType="any" minOccurs="0" maxOccurs="unbounded">
                    <doc>
                        Description of the volume of interaction between of particle-matter interaction.
                        
                        Computer models like Monte Carlo or molecular dynamics / electron- or ion-beam
                        interaction simulations can be used to qualify and (or) quantify the shape of
                        the interaction volume. Results of such simulations can be summary statistics
                        or single-particle-resolved sets of trajectories.
                        
                        Explicit or implicit descriptions of the geometry of this
                        interaction volume are possible:
                        
                        * An implicit description is via a set of electron/specimen interactions
                          represented ideally as trajectory data from the computer simulation.
                        * An explicit description is via iso-contour surface using either
                          a simulation grid or a triangulated surface mesh of the approximated
                          iso-contour surface evaluated at specific threshold values.
                          Iso-contours could be computed from electron or particle flux through
                          an imaginary control surface (the iso-surface) or energy-levels
                          (e.g. the case of X-rays). Details depend on the model.
                        * Another explicit description is via theoretical models which may
                          be relevant e.g. for X-ray spectroscopy
                        
                        Further details on how the interaction volume can be quantified
                        is available in the literature for example:
                        
                        * `S. Richter et al. &lt;https://doi.org/10.1088/1757-899X/109/1/012014&gt;`_
                        * `J. Bünger et al. &lt;https://doi.org/10.1017/S1431927622000083&gt;`_
                        * `J. F. Ziegler et al. &lt;https://doi.org/10.1007/978-3-642-68779-2_5&gt;`_
                        
                        Instances should use interaction_volume as a name prefix.
                    </doc>
                    <group type="NXdata" recommended="true"/>
                    <group type="NXprocess" recommended="true"/>
                </group>
            </group>
        </group>
        <!--relevant research result post-processed for specific community methods
but normalized in its representation ready to be consumed for
research data management systems-->
        <group name="ROI" type="NXobject" nameType="any" minOccurs="0" maxOccurs="unbounded">
            <doc>
                A region-of-interest analyzed either during or after the session for which specific
                processed data are available. Instances should use roi as a name prefix.
                
                This concept is related to term `Region Of Interest`_ of the EMglossary standard.
                
                .. _Region Of Interest: https://purls.helmholtz-metadaten.de/emg/EMG_00000042
            </doc>
            <!--as soon as one entry is here constrained further
an RDM can be sure to find specific pieces of information in a
specific way but then every user of this application definition
is required to provide such information in this way!-->
            <group name="img" type="NXem_img" optional="true">
                <group type="NXimage" minOccurs="1" maxOccurs="unbounded">
                    <doc>
                        Instances should use image as a name prefix.
                        Each NXimage instance must use only one image or stack instance.
                    </doc>
                    <field name="imaging_mode" type="NX_CHAR"/>
                    <group type="NXmicrostructure" optional="true"/>
                </group>
            </group>
            <group name="ebsd" type="NXem_ebsd" optional="true">
                <group name="gnomonic_reference_frame" type="NXcoordinate_system" optional="true">
                    <field name="alias" type="NX_CHAR" optional="true"/>
                    <field name="type" type="NX_CHAR"/>
                    <field name="handedness" type="NX_CHAR"/>
                    <field name="origin" type="NX_CHAR"/>
                    <field name="x_direction" type="NX_CHAR"/>
                    <field name="y_direction" type="NX_CHAR"/>
                    <field name="z_direction" type="NX_CHAR"/>
                </group>
                <group name="pattern_centre" type="NXprocess" recommended="true">
                    <field name="x_boundary_convention" type="NX_CHAR"/>
                    <field name="x_normalization_direction" type="NX_CHAR"/>
                    <field name="y_boundary_convention" type="NX_CHAR"/>
                    <field name="y_normalization_direction" type="NX_CHAR"/>
                </group>
                <group name="measurement" type="NXprocess" optional="true">
                    <field name="depends_on" type="NX_CHAR"/>
                    <group name="source" type="NXnote">
                        <field name="type" type="NX_CHAR"/>
                        <field name="file_name" type="NX_CHAR"/>
                        <field name="checksum" type="NX_CHAR"/>
                        <field name="algorithm" type="NX_CHAR"/>
                    </group>
                </group>
                <group name="simulation" type="NXprocess" optional="true">
                    <field name="depends_on" type="NX_CHAR"/>
                    <group name="source" type="NXnote">
                        <field name="type" type="NX_CHAR"/>
                        <field name="file_name" type="NX_CHAR"/>
                        <field name="checksum" type="NX_CHAR"/>
                        <field name="algorithm" type="NX_CHAR"/>
                    </group>
                </group>
                <group name="calibration" type="NXprocess" recommended="true"/>
                <group name="indexing" type="NXprocess" optional="true">
                    <field name="number_of_scan_points" type="NX_UINT"/>
                    <field name="indexing_rate" type="NX_NUMBER" recommended="true"/>
                    <group name="source" type="NXnote" optional="true">
                        <field name="type" type="NX_CHAR"/>
                        <field name="file_name" type="NX_CHAR"/>
                        <field name="checksum" type="NX_CHAR"/>
                        <field name="algorithm" type="NX_CHAR"/>
                    </group>
                    <!--per scan point quantities (identifier_phase, matching_phase, positions, etc.)
just using the implicit optional, for the database example in NOMAD we do
not wish to duplicate all payload data-->
                    <group type="NXphase" minOccurs="0" maxOccurs="unbounded">
                        <doc>
                            Instances should use phase as a name prefix.
                        </doc>
                        <field name="name" type="NX_CHAR" recommended="true"/>
                        <field name="number_of_scan_points" type="NX_UINT"/>
                        <group name="unit_cell" type="NXunit_cell">
                            <field name="a_b_c" type="NX_NUMBER"/>
                            <field name="alpha_beta_gamma" type="NX_NUMBER"/>
                            <field name="space_group" type="NX_CHAR"/>
                        </group>
                        <!--foreseen place for phase-specific texture and microstructure representations and statistics-->
                        <group name="IPF" type="NXmicrostructure_ipf" nameType="any" recommended="true">
                            <field name="projection_direction" type="NX_NUMBER"/>
                            <group name="map" type="NXdata">
                                <attribute name="signal" type="NX_CHAR"/>
                                <attribute name="axes" type="NX_CHAR"/>
                                <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                                <field name="title" type="NX_CHAR" recommended="true"/>
                                <field name="data" type="NX_NUMBER">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                                <field name="axis_x" type="NX_NUMBER">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                                <field name="axis_y" type="NX_NUMBER" optional="true">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                                <field name="axis_z" type="NX_NUMBER" optional="true">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                            </group>
                            <group name="legend" type="NXdata">
                                <attribute name="signal" type="NX_CHAR"/>
                                <attribute name="axes" type="NX_CHAR"/>
                                <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                                <field name="title" type="NX_CHAR" recommended="true"/>
                                <field name="data" type="NX_NUMBER">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                                <field name="axis_x" type="NX_NUMBER">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                                <field name="axis_y" type="NX_NUMBER">
                                    <attribute name="long_name" type="NX_CHAR"/>
                                </field>
                            </group>
                        </group>
                        <group name="ODF" type="NXmicrostructure_odf" nameType="any" optional="true"/>
                        <group name="PF" type="NXmicrostructure_pf" nameType="any" optional="true"/>
                        <group type="NXmicrostructure" optional="true"/>
                    </group>
                    <group name="roi" type="NXdata" recommended="true">
                        <attribute name="signal" type="NX_CHAR"/>
                        <attribute name="axes" type="NX_CHAR"/>
                        <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                        <field name="title" type="NX_CHAR" recommended="true"/>
                        <field name="descriptor" type="NX_CHAR"/>
                        <field name="data" type="NX_NUMBER"/>
                        <field name="axis_z" type="NX_NUMBER" optional="true">
                            <attribute name="long_name" type="NX_CHAR"/>
                        </field>
                        <field name="axis_y" type="NX_NUMBER">
                            <attribute name="long_name" type="NX_CHAR"/>
                        </field>
                        <field name="axis_x" type="NX_NUMBER">
                            <attribute name="long_name" type="NX_CHAR"/>
                        </field>
                    </group>
                </group>
            </group>
            <group name="eds" type="NXem_eds" optional="true">
                <!--remains to be discussed based on examples-->
                <group name="indexing" type="NXprocess">
                    <group name="summary" type="NXdata" optional="true">
                        <attribute name="signal" type="NX_CHAR"/>
                        <attribute name="axes" type="NX_CHAR"/>
                        <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                        <field name="title" type="NX_CHAR" recommended="true"/>
                        <field name="intensity" type="NX_NUMBER"/>
                        <field name="axis_energy" type="NX_CHAR">
                            <attribute name="long_name" type="NX_CHAR"/>
                        </field>
                    </group>
                    <field name="atom_types" type="NX_CHAR"/>
                    <group type="NXimage" minOccurs="0" maxOccurs="118">
                        <field name="iupac_line_candidates" type="NX_CHAR" recommended="true"/>
                        <field name="energy_range" type="NX_NUMBER"/>
                        <group name="image_2d" type="NXdata">
                            <attribute name="signal" type="NX_CHAR"/>
                            <attribute name="axes" type="NX_CHAR"/>
                            <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
                            <field name="title" type="NX_CHAR" recommended="true"/>
                            <field name="intensity" type="NX_NUMBER">
                                <attribute name="units" type="NX_CHAR" recommended="true"/>
                            </field>
                            <field name="axis_i" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                                <attribute name="units" type="NX_CHAR"/>
                            </field>
                            <field name="axis_j" type="NX_NUMBER">
                                <attribute name="long_name" type="NX_CHAR"/>
                                <attribute name="units" type="NX_CHAR"/>
                            </field>
                        </group>
                    </group>
                </group>
            </group>
            <group name="eels" type="NXem_eels" optional="true"/>
        </group>
    </group>
    <!--see an example how to map e.g. the following flat schema https://www.zenodo.org/record/6513745 to NXem
in https://github.com/FAIRmat-NFDI/nexus_definitions/commit/0b928c4352bc5636f673b5fb25ce990f1af8a099-->
</definition>
