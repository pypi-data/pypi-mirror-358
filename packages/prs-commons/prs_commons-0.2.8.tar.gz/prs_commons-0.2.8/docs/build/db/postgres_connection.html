

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Postgres Connection &mdash; PRS Commons 0.2.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=dd2ddd4a" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=dd2ddd4a" />

  
      <script src="../_static/documentation_options.js?v=58050c01"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PostgresClient" href="postgres_client.html" />
    <link rel="prev" title="Odoo RPC Client" href="../odoo/odoo.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2e8b57" >

          
          
          <a href="../index.html" class="icon icon-home">
            PRS Commons
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../odoo/odoo.html">Odoo RPC Client</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Postgres Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-reference">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prs_commons.db.PostgresConnection"><code class="docutils literal notranslate"><span class="pre">PostgresConnection</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="postgres_client.html">PostgresClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage/storage.html">Storage Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/aws.html">AWS S3 Client</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2e8b57" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PRS Commons</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Postgres Connection</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/db/postgres_connection.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="postgres-connection">
<h1>Postgres Connection<a class="headerlink" href="#postgres-connection" title="Link to this heading">¶</a></h1>
<p>The database module provides asynchronous database clients with connection pooling and transaction management for various database systems.</p>
<section id="environment-variables">
<h2>Environment Variables<a class="headerlink" href="#environment-variables" title="Link to this heading">¶</a></h2>
<p>The PostgreSQL client can be configured using either a connection string or individual environment variables:
The PostgreSQL client can be configured using the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DB_HOST</span></code>: Database host (default: localhost)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_PORT</span></code>: Database port (default: 5432)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_NAME</span></code>: Database name (default: postgres)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_USER</span></code>: Database user (required)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_PASSWORD</span></code>: Database password (required)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_SSLMODE</span></code>: SSL mode (default: disable)</p></li>
</ul>
<p>Example <code class="docutils literal notranslate"><span class="pre">.env</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Database configuration</span>
<span class="nv">DB_HOST</span><span class="o">=</span>localhost
<span class="nv">DB_PORT</span><span class="o">=</span><span class="m">5432</span>
<span class="nv">DB_NAME</span><span class="o">=</span>mydb
<span class="nv">DB_USER</span><span class="o">=</span>myuser
<span class="nv">DB_PASSWORD</span><span class="o">=</span>mypassword
<span class="nv">DB_SSLMODE</span><span class="o">=</span>disable
</pre></div>
</div>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">prs_commons.db.</span></span><span class="sig-name descname"><span class="pre">PostgresConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection" title="Link to this definition">¶</a></dt>
<dd><p>PostgreSQL database connection manager with connection pooling.</p>
<p>This class implements the DatabaseConnection interface and provides
connection pooling and transaction management. It uses a singleton pattern
to ensure a single connection pool is used per process.</p>
<p>The connection pool is automatically managed and will be created on first use.
Connections are automatically returned to the pool when their transaction
context is exited.</p>
<p>The <a class="reference internal" href="#prs_commons.db.PostgresConnection" title="prs_commons.db.PostgresConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">PostgresConnection</span></code></a> manages the actual database connections and connection pooling. It’s typically not used directly but rather through the higher-level <a class="reference internal" href="postgres_client.html#prs_commons.db.PostgresClient" title="prs_commons.db.PostgresClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">PostgresClient</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dsn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Initialize the PostgreSQL client.</p>
<p>Note: This will only initialize the instance once due to the singleton pattern.
Subsequent calls with different parameters will be ignored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dsn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the PostgreSQL client.</p>
<p>Note: This will only initialize the instance once due to the singleton pattern.
Subsequent calls with different parameters will be ignored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.connect">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.connect" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the database connection pool.</p>
<p>Creates a connection pool with the configured parameters. This method is
called automatically when the first connection is requested.</p>
<p>The connection pool parameters are:
- min_size: Minimum number of connections to keep open
- max_size: Maximum number of connections to allow
- Other parameters passed during client initialization</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is idempotent - calling it multiple times will only create
the pool once.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.disconnect">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Close all connections in the connection pool.</p>
<p>This method should be called when the database client is no longer needed
to ensure proper cleanup of resources. After calling this method, the client
can be reused by calling connect() again.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s good practice to call this when your application shuts down.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.get_connection">
<span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator" title="(in Python v3.13)"><span class="pre">AsyncIterator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Connection</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.get_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get a managed database connection with transaction support.</p>
<p>This context manager provides a connection from the pool with automatic
transaction management. The connection is automatically returned to the
pool when the context exits.</p>
<p>The following operations are performed automatically:</p>
<ol class="arabic simple">
<li><p><strong>Starts a new transaction</strong> when entering the context</p></li>
<li><p><strong>Commits</strong> the transaction if the block completes successfully</p></li>
<li><p><strong>Rolls back</strong> the transaction if an exception occurs</p></li>
<li><p><strong>Returns</strong> the connection to the pool when done</p></li>
</ol>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="c1"># Execute queries within a transaction</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users&quot;</span><span class="p">)</span>
    <span class="c1"># Transaction will be committed if no exceptions occur</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Yields<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>asyncpg.Connection</em> – A database connection from the pool.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The connection and its transaction are managed automatically. Do not
manually commit or rollback the transaction within the context.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nested transactions are supported using savepoints. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="c1"># Outer transaction starts automatically</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (name) VALUES (&#39;user1&#39;)&quot;</span><span class="p">)</span>


    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a nested transaction (savepoint)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
            <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO accounts (user_id, balance)</span>
            <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="s2">&quot;)</span>
            <span class="c1"># This savepoint can be rolled back independently</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Something went wrong&quot;</span><span class="p">)</span>


    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Only the inner transaction is rolled back</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Caught error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># The outer transaction continues and will be committed</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE users</span>
            <span class="n">SET</span> <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;active&#39;</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;user1&#39;</span><span class="s2">&quot;)</span>

    <span class="c1"># The outer transaction is committed here if no exceptions</span>
</pre></div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If an exception occurs in the outer transaction after
an inner transaction has committed, the entire transaction
(including the committed savepoint) will be rolled back.
This ensures transaction atomicity - either all changes
complete successfully, or none of them do.</p>
<p>If you need the inner transaction to persist regardless of the outer
transaction’s outcome, use separate database connections/transactions
instead of nested transactions.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.__aenter__">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">__aenter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#prs_commons.db.PostgresConnection" title="prs_commons.db.postgres_connection.PostgresConnection"><span class="pre">PostgresConnection</span></a></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.__aenter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.__aenter__" title="Link to this definition">¶</a></dt>
<dd><p>Async context manager entry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="prs_commons.db.PostgresConnection.__aexit__">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">__aexit__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><span class="pre">BaseException</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_tb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/prs_commons/db/postgres_connection.html#PostgresConnection.__aexit__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prs_commons.db.PostgresConnection.__aexit__" title="Link to this definition">¶</a></dt>
<dd><p>Async context manager exit.</p>
</dd></dl>

</dd></dl>

</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">PostgresConnection</span></code> raises the following exceptions:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>: If required environment variables are missing</p></li>
<li><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">asyncpg.PostgresError</span></code>: For database-related errors</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a>: For connection pool errors</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code></a>: For other unexpected errors</p></li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://magicstack.github.io/asyncpg/current/">asyncpg Documentation</a></p></li>
<li><p><a class="reference external" href="https://www.postgresql.org/docs/">PostgreSQL Documentation</a></p></li>
<li><p><a class="reference external" href="https://magicstack.github.io/asyncpg/current/api/index.html#connection-pools">Connection Pooling</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../odoo/odoo.html" class="btn btn-neutral float-left" title="Odoo RPC Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="postgres_client.html" class="btn btn-neutral float-right" title="PostgresClient" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Isha Foundation IT.
      <span class="lastupdated">Last updated on 2025-06-26 17:12.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>