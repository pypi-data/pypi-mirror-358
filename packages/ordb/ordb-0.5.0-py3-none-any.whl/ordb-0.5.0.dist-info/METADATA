Metadata-Version: 2.4
Name: ordb
Version: 0.5.0
Summary: A fast, feature-rich command-line tool for searching the Norwegian bokmÃ¥l dictionary with interactive search, cross-platform support, and comprehensive Norwegian language features
Home-page: https://github.com/kmlawson/ordb
Author: Konrad M. Lawson
Author-email: "Konrad M. Lawson" <kl@muninn.net>
License-Expression: MIT
Project-URL: Homepage, https://github.com/kmlawson/ordb
Project-URL: Repository, https://github.com/kmlawson/ordb.git
Project-URL: Issues, https://github.com/kmlawson/ordb/issues
Project-URL: Changelog, https://github.com/kmlawson/ordb/blob/main/CHANGELOG.md
Keywords: norwegian,dictionary,language,search,cli,norsk,bokmÃ¥l
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Education
Classifier: Intended Audience :: End Users/Desktop
Classifier: Natural Language :: Norwegian
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Text Processing :: Linguistic
Classifier: Topic :: Utilities
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: flake8; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=6.0; extra == "test"
Requires-Dist: pytest-cov; extra == "test"
Dynamic: license-file

# ordb - Norwegian Dictionary Search Tool

A fast, feature-rich command-line tool for searching an extensive Norwegian bokmÃ¥l dictionary. Built for linguists, language learners, translators, and anyone working with bokmÃ¥l text using open source ordbokene.no dictionary data.

## Features

- **Multiple search modes**: exact, fuzzy, prefix, anywhere, full-text, and expression-only
- **Interactive search lists**: fuzzy, prefix, and anywhere searches now show lettered selection menus
- **Smart character replacement**: automatically converts `aaâ†’Ã¥`, `oeâ†’Ã¸`, `aeâ†’Ã¦`
- **Rich terminal output** with colored formatting and pagination
- **Comprehensive results** including definitions, examples, etymology, inflections, and fixed expressions
- **Flexible filtering** by word class (noun, verb, adjective, adverb)
- **Cross-platform support**: Windows, macOS, and Linux with platform-appropriate file paths
- **Customizable configuration** for colors, limits, and display options with user friendly configuration wizard
- **Multiple output modes**: full entries, examples-only, etymology-only, inflections-only

## Installation

### Using uv (recommended)
```bash
uv tool install ordb
```

### Using pip
```bash
pip install ordb
```

## Quick Start

```bash
# Search for a word
ordb nord

# Interactive fuzzy search (shows lettered list, press letter key for immediate selection)
ordb -f hus

# Search anywhere in definitions and examples
ordb -a "til fots"

# Show only examples
ordb --only-examples hus

# Search only expressions
ordb -x "hele sitt hjerte"

# Show dictionary statistics
ordb --stats
```

## Search Modes

### Basic Search
```bash
ordb word           # Exact match with fallback to fuzzy search or prefex search (configurable)
```

### Special Search Syntax
```bash
ordb word@          # Prefix: words starting with "word" (interactive selection by default)
ordb @word          # Anywhere in term: terms containing "word" (interactive selection by default)
ordb %word          # Full-text: search all content for "word"
```

### Advanced Search Options
```bash
ordb -f word        # Interactive fuzzy search with lettered list
ordb -a "phrase"    # Search anywhere in definitions/examples
ordb -x expression  # Search only fixed expressions
ordb --all-examples word  # Find word in all examples across dictionary
```

### Overriding Interactive Lists
```bash
ordb -l 5 hus@      # Show 5 prefix results directly (no interactive menu)
ordb -P hus@        # Disable interactive lists and pagination
ordb --limit 10 -f word  # Show 10 fuzzy results directly without pagination
```

### Word Class Filtering
```bash
ordb --noun hus     # Find only nouns matching "hus"
ordb --verb gÃ¥      # Find only verbs matching "gÃ¥"
ordb --adj stor     # Find only adjectives matching "stor"
ordb --adv fort     # Find only adverbs matching "fort"
```

## Output Modes

### Standard Output
Shows complete entries with definitions, examples, etymology, inflections, and related expressions.

### Specialized Views
```bash
ordb --only-examples word    # Examples only (semicolon-separated)
ordb -e word                # Etymology only
ordb -i word                # Inflections only (multiline format)
ordb --no-definitions word  # Hide definitions
ordb --no-examples word     # Hide examples
```

## Configuration

ordb uses a configuration file to customize colors, search behavior, and display options. The configuration is automatically created when you run the script the first time with a series of defaults but you can easily update this using the interactive configuration wizard:

```bash
ordb -c
```

### Configuration Locations
ordb looks for configuration files in platform-appropriate locations:
- **Unix/Linux/macOS**: `~/.ordb/config` for settings and database
- **Windows**: `%APPDATA%\ordb\config` for settings, `%LOCALAPPDATA%\ordb\` for database

### Key Configuration Options

#### Colors
Customize terminal colors for different elements:
- `lemma` - Main word entries
- `word_class` - Word type labels ([noun], [verb], etc.)
- `definition` - Definition text
- `example` - Example sentences
- `etymology` - Etymology information
- `masculine/feminine/neuter` - Gender colors

#### Search Settings
- `character_replacement` - Enable/disable aaâ†’Ã¥, oeâ†’Ã¸, aeâ†’Ã¦ conversion
- `default_limit` - Maximum results to show
- `pagination` - Enable/disable pagination
- `page_size` - Lines per page (0 = auto-detect)
- `limit_with_pagination` - Max results with pagination (0 = no limit)
- `show_inflections` - Show/hide inflection tables (default: True)
- `show_etymology` - Show/hide etymology information (default: True)
- `interactive_results_limit` - Maximum results in interactive lists (default: 15)
- `fallback_to_fuzzy` - Use fuzzy search when no exact matches (default: True)
- `interactive_anywhere_search` - Use interactive menus for @ searches (default: True)

**Note**: Interactive lists can be overridden with `-l/--limit` (shows results directly) or `-P` (disables both interactive lists and pagination).

## Examples

### Basic Word Lookup
```bash
$ ordb nord
ğŸ” Exact search for 'nord'
ğŸ“– nord [noun] (neuter)

  1. himmelretning som ligger motsatt retningen mot sola midt pÃ¥ dagen; mots sÃ¸r, syd
      "vinden stod fra nord"; "det klarner i nord"; "finne nord ved hjelp av kompasset"; "Frankrike grenser til Belgia i nord"
  2. landomrÃ¥de eller stat som ligger i nordlig retning
      "i det hÃ¸ye nord"
  3. i bridge: spiller som har sÃ¸r, syd som makker
      "nord melder 2 klÃ¸ver"
  Etymology: norr. norÃ°r | av nord

  Faste uttrykk:
    â€¢ nord og ned
      til helvete; svÃ¦rt dÃ¥rlig
        det gÃ¥r nord og ned og ned med alt
        dÃ¸mme noen nord og ned og ned
--------------------------------------------------------------------------------
ğŸ“– nord (2) [adv]

  1. i nord; i den nordlige delen av et omrÃ¥de; pÃ¥ nordsiden; mot nord, i nordlig retning
      "byen ligger nord for sjÃ¸en"; "dra nord i landet"
  Etymology: norr. norÃ°r | jamfÃ¸r nordre og nÃ¸rdst

Found 2 results.
```

### Interactive Fuzzy Search
```bash
$ ordb -f bekk
ğŸ” Fuzzy search for '~bekk' (threshold: 0.6)
Found 219 similar matches (showing first 15):

  a) bekk [noun]
  b) blekk [noun]
  c) brekk [noun]
  d) brekk [noun]
  e) bek [noun]
  f) bekken [noun]
  g) blekke [noun]
  h) brekke [verb]
  i) brekke [verb]
  j) brekke [noun]
  k) bakk [noun]
  l) bakk [adv]
  m) beke [verb]
  n) benk [noun]
  o) besk [adj]
  0) ...more results (204 additional matches)

Press a letter to view the entry, 0 or spacebar for more results, or Enter to cancel:
```


### Examples Only
```bash
$ ordb --only-examples gÃ¥
ğŸ“– gÃ¥ [verb]
  "gÃ¥ Ã¦rend"; "gÃ¥ en tur"; "gÃ¥ til fots"; "gÃ¥ pÃ¥ ski"; "gÃ¥ i sÃ¸vne"
```

### Character Replacement
```bash
$ ordb gaar    # Automatically searches for "gÃ¥"
$ ordb hoer    # Automatically searches for "hÃ¸r"  
$ ordb laere   # Automatically searches for "lÃ¦re"
```

## Database

The dictionary database (`articles.db`) contains:
- **90,841 total entries**
- **111,425 definitions**
- **83,849 examples**
- **8,218 expressions**

Coverage includes:
- 98.4% of entries have identified word types
- Comprehensive inflection tables for verbs, nouns, and adjectives
- Rich etymology information
- Extensive example sentences from real usage

## Development

### Agentic Coding

This tool was built entirely with Claude Code (1.0.35, in June 2025) with Konrad M. Lawson at the prompt. 

### Project Structure
```
ordb/
â”œâ”€â”€ src/ordb/
â”‚   â”œâ”€â”€ __init__.py      # Package initialization
â”‚   â”œâ”€â”€ __main__.py     # Entry point for python -m ordb
â”‚   â”œâ”€â”€ cli.py          # Command-line interface
â”‚   â”œâ”€â”€ config.py       # Configuration management
â”‚   â”œâ”€â”€ core.py         # Search engine with interactive modes
â”‚   â”œâ”€â”€ display.py      # Output formatting
â”‚   â”œâ”€â”€ pagination.py   # Terminal UI and navigation
â”‚   â”œâ”€â”€ utils.py        # Shared utility functions
â”‚   â””â”€â”€ wizard.py       # Configuration wizard module
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ articles.db.gz  # Compressed database (included in package)
â”‚   â”œâ”€â”€ json-to-db.py   # Database creation script
â”‚   â””â”€â”€ irregular_verbs.json  # Norwegian irregular verb database
â”œâ”€â”€ tests/              # Comprehensive test suite (21 test files)
â”‚   â”œâ”€â”€ test_*_unit.py  # Unit tests (255 tests)
â”‚   â”œâ”€â”€ test_*.py       # Integration tests (114 tests)
â”‚   â”œâ”€â”€ run_unit_tests.sh      # Script to run unit tests only
â”‚   â””â”€â”€ run_integration_tests.sh  # Script to run integration tests
â”œâ”€â”€ htmlcov/            # Coverage reports (in .gitignore)
â”œâ”€â”€ CHANGELOG.md        # Version history
â”œâ”€â”€ LICENSE             # MIT license
â”œâ”€â”€ README.md           # This file
â”œâ”€â”€ pyproject.toml      # Package configuration
â”œâ”€â”€ setup.cfg           # Setup configuration
â””â”€â”€ .gitignore          # Git ignore file
```

### Running Tests

The test suite includes both unit tests and integration tests:

**Unit Tests** (250 passing, 5 skipped, 95% coverage):
```bash
# Run only unit tests (fast, no database needed)
./tests/run_unit_tests.sh

# Or manually:
python -m unittest discover tests/ -p "test_*_unit.py" -v
```

**Integration Tests** (114 tests, all skipped, requires database):
```bash
# First ensure you have the database installed
ordb --help  # This will prompt to install database if needed

# Run integration tests (may take time)
./tests/run_integration_tests.sh

# Or run all tests including integration tests
python -m unittest discover tests/ -v
```

**Note**: Integration tests are currently marked with `@unittest.skip` because they:
- Launch the full ordb application 
- May prompt for user input
- Require the database to be installed
- Can timeout in CI environments

To run them, remove the `@unittest.skip` decorators or use the `run_integration_tests.sh` script.

### Building Database

To build the database from source data:

1. **Download the source data**:
   Visit https://ord.uib.no/ and go to the "ordlister" section to download `articles.json.gz`

2. **Extract and place the file**:
   ```bash
   # Extract the downloaded file
   gunzip articles.json.gz
   
   # Move to the db directory
   mv articles.json db/
   ```

3. **Create the database**:
   ```bash
   # Run the database creation script
   python db/json-to-db.py
   ```

The resulting `articles.db` file will be created in the project root directory.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details, including details of the separate license for the ordbokene.no dictionary database.

## Acknowledgments

- Dictionary data from the Norwegian Language Council (SprÃ¥krÃ¥det). Search their wonderful online dictionaries here: https://ordbokene.no/ and see their downloadable data here: https://ord.uib.no/
- Built with Python 3.8+ for maximum compatibility
- Terminal interface inspired by traditional Unix tools like `less` and `man`

## Support

- **Documentation**: Use -h | --help or read the [README.md](https://github.com/kmlawson/ordb/blob/main/README.md)
- **Issues**: Report bugs and request features on [GitHub Issues](https://github.com/kmlawson/ordb/issues)

---

**ordb** - Norwegian bokmÃ¥l dictionary search tool
