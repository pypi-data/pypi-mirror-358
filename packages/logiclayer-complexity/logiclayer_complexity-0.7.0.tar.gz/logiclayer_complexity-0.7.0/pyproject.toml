[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[project]
name = "logiclayer-complexity"
version = "0.7.0"
description = "LogicLayer module to enable Economic Complexity calculations, using data from a tesseract-olap server."
requires-python = "~=3.9"
dynamic = ["classifiers"]
readme = "PACKAGE.md"
authors = [
    {name = "Francisco Abarzua", email = "francisco@datawheel.us"},
    {name = "Jelmy Hermosilla", email = "jelmy@datawheel.us"},
    {name = "Samuel Osorio", email = "samuel@datawheel.us"},
    {name = "NicolÃ¡s Netz", email = "nicolas.netz@datawheel.us"},
]
maintainers = [
    {name = "Francisco Abarzua", email = "francisco@datawheel.us"},
]
license = { text = "Proprietary" }
dependencies = [
    "economic-complexity>=0.2.4",
    "logiclayer>=0.4.1",
    "numpy<2.0",
    "orjson>=3.8",
    "pandas>=1.5,<3.0",
    "polars~=1.0",
    "pyarrow>=15.0",
    "tesseract-olap>=0.18.8",
]

[project.urls]
repository = "https://github.com/Datawheel/logiclayer-complexity"

[tool.poetry]
requires-poetry = ">=2.0"
classifiers = [
    "Topic :: Software Development :: Libraries :: Python Modules"
]

[tool.poetry.group.dev.dependencies]
ipykernel = "^6.0.0"
tesseract-olap = { version = ">=0.18.8", extras = ["clickhouse"] }
tomli = "^2.0.1"

[tool.poetry.group.test.dependencies]
pytest = "^8.0"
pyinstrument = "^4.6.1"
snakeviz = "^2.2.0"

[tool.pyright]
venvPath = "."
venv = ".venv"

[tool.ruff]
target-version = "py39"

[tool.ruff.lint]
ignore = ["UP006"]

[tool.ruff.lint.flake8-bugbear]
extend-immutable-calls = [
    "fastapi.Depends",
    "fastapi.Header",
    "fastapi.Query",
    "fastapi.params.Depends",
    "fastapi.params.Header",
    "fastapi.params.Query",
]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["S101"]

[tool.ruff.lint.pylint]
max-args = 8

[tool.ruff.lint.pyupgrade]
keep-runtime-typing = true
