services:
  backend:
    build:
      args:
        REQUIREMENTS: requirements-dev.txt
    volumes:
      - ./src/qualpipe_webapp/backend:/app
    command:
      [
        "watchmedo",
        "auto-restart",
        "--directory=.",
        "--pattern=*.py",
        "--recursive",
        "--",
        "uvicorn",
        "main:app",
        "--host",
        "0.0.0.0",
        "--port",
        "8000",
      ]

  frontend:
    build:
      args:
        REQUIREMENTS: requirements-dev.txt
    volumes:
      - ./src/qualpipe_webapp/frontend:/app
    command:
      [
        "watchmedo",
        "auto-restart",
        "--directory=.",
        "--pattern=*.py",
        "--recursive",
        "--",
        "uvicorn",
        "main:app",
        "--host",
        "0.0.0.0",
        "--port",
        "8001",
      ]
