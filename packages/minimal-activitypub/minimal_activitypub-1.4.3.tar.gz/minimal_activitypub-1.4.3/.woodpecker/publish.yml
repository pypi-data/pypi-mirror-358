when:
  event: release

steps:
  build_on_release:
    image: ghcr.io/astral-sh/uv:debian-slim
    pull: true
    environment:
      UV_PUBLISH_TOKEN:
        from_secret: UV_PUBLISH_TOKEN #pragma: allowlist secret
    commands:
      - uv --version
      - uv build
      - uv publish

depends_on:
  - checks
