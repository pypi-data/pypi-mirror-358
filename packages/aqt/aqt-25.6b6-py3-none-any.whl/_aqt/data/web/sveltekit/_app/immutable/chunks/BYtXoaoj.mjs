import{j as g,k as q,o,q as G,u as U,v as l,w as j,U as I,x as N,y as b,z as k,A as E,B as w,C as z,D as B,E as _,F,G as L,H as P}from"./DvQPdglG.mjs";const v=0,f=1,d=2;function J(A,C,D,h,H){o&&G();var p=A,m=g(),T=P,a=I,s,n,i,c=(m?N:b)(void 0),y=(m?N:b)(void 0),u=!1;function t(e,r){u=!0,r&&(k(x),E(x),w(T));try{e===f&&h&&(n?z(n):n=B(()=>h(p,c))),e!==v&&s&&_(s,()=>s=null),e!==f&&n&&_(n,()=>n=null),e!==d&&i&&_(i,()=>i=null)}finally{r&&(w(null),E(null),k(null),F())}}var x=q(()=>{if(a!==(a=C())){if(U(a)){var e=a;u=!1,e.then(r=>{e===a&&(l(c,r),t(f,!0))},r=>{if(e===a)throw l(y,r),t(d,!0),y.v}),o||j(()=>{u||t(v,!0)})}else l(c,a),t(f,!1);return()=>a=I}});o&&(p=L)}export{J as a};
