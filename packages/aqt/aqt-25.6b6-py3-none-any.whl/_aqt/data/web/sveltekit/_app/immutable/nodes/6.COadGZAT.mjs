var Pn=Object.defineProperty;var bn=(s,t,a)=>t in s?Pn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var $e=(s,t,a)=>bn(s,typeof t!="symbol"?t+"":t,a);import{L as xn,M as Sn,N as On,O as Rn,P as Tn,s as yt,Q as An,S as vt,T as nt,U as tt,V as yr,W as Dt,X as br,Y as Qt,Z as Kr,_ as lr,$ as Dn,a0 as In,a1 as Xr,a2 as En,a3 as Ln,a4 as xr,a5 as Mn,a6 as Nn,a7 as Fn,a8 as Vn,a9 as Hn,aa as zn,ab as Bn,ac as Wn,ad as Gn}from"../chunks/Dg9aec3R.mjs";import{e as jn,f as qn,b as Un}from"../chunks/LyHHGwhD.mjs";import{s as f,b9 as bs,g as r,L as xs,K as w,aN as wt,x as Qn,ba as Yn,p as Ce,e as Je,f as oe,c as v,d as we,aq as Kn,b2 as Ar,b3 as Xn,i as Z,h as G,V as g,r as I,b as A,n as te,l as ne,a as ze,m as x,T as We,t as Y,b5 as It,al as fe,Z as Zn,bb as Jn}from"../chunks/DvQPdglG.mjs";import{w as Fe,g as Ne,d as ea,r as Ss,a as ta}from"../chunks/CAXUivPC.mjs";import{c as or}from"../chunks/DOfr5EWW.mjs";import{b as Dr,i as Zr,S as ra}from"../chunks/BQL56UQq.mjs";import"../chunks/Bg9kRutz.mjs";import{i as _e}from"../chunks/DTpo0kgr.mjs";import{b as Et}from"../chunks/Bc5MJCE7.mjs";import{p as N,i as Te,s as Os}from"../chunks/jy7gnWqU.mjs";import{q as sa,s as V,r as Rs,e as xe,c as Ts,o as Ir,p as na}from"../chunks/DWmaQdPb.mjs";import{e4 as As,u as Ze,e5 as Sr,av as $t,e6 as aa,e7 as oa,t as pt,c9 as Er,e8 as ia,T as Ge,e9 as Ds,ea as la,eb as Jr,ec as ua,ed as es,ee as ca,ef as da,eg as fa,eh as ga,ei as va,ej as $a,ek as ha,el as ma,em as pa,en as ya,eo as Ca,ep as wa,eq as _a,er as ka,b8 as ut,es as Pa,et as ts,eu as ba,ev as xa,ew as Sa,ex as Oa,ey as rs,ez as Ra,eA as Ta,eB as Aa,eC as Da,eD as Ia,eE as Ea,eF as La,eG as Ma,eH as Na,eI as Fa,eJ as Is,eK as Va,eL as Ha,eM as za,eN as Ba,eO as Wa,eP as Ga,eQ as ja,eR as qa,eS as Ua,eT as Qa,eU as Ya,eV as Ka,eW as Xa,eX as Za,eY as Ja,eZ as eo,e_ as to,e$ as ro,f0 as so,f1 as no,f2 as ao,f3 as oo,f4 as io,f5 as lo,f6 as uo,f7 as co,f8 as fo,f9 as go,fa as vo,fb as $o,fc as ho,fd as mo,fe as po,ff as yo,fg as Co,fh as wo,fi as _o,fj as ss,fk as ko,fl as Po,fm as bo,fn as xo,fo as So,fp as Oo,fq as Ro,fr as ns,fs as To,ft as Ao,fu as Do,fv as Io,fw as Es,fx as Ls,fy as Ms,fz as Eo,fA as Lo,fB as Mo,fC as No,fD as Fo,fE as Vo,fF as Ho,fG as zo,fH as Bo,fI as ir,fJ as as,fK as os,fL as Ns,fM as Wo,fN as Fs,fO as Go,fP as Vs,fQ as jo,fR as qo,fS as is,fT as Uo,fU as Qo,fV as Yo,fW as Ko,fX as Xo,fY as Zo,fZ as Jo,f_ as ei,f$ as ti,g0 as Hs,g1 as ri,g2 as ls,g3 as si,co as ni,cm as ai,cH as zs,g4 as oi,cY as ii,cp as li,g5 as ui,g6 as ci,g7 as di,g8 as fi,g9 as gi,ga as vi,gb as $i,gc as hi,gd as mi,ge as pi,gf as Bs,gg as yi,gh as Ci,gi as Lr,gj as Ws,gk as wi,gl as _i,gm as ki,gn as Gs,go as js,gp as qs,gq as Pi,gr as bi,gs as xi,gt as Si,gu as Oi,gv as Ri,dB as Ti,gw as Ai,q as Kt,gx as Di,gy as Ii,gz as Ei,gA as Li,gB as Mi,gC as Ni,gD as Fi,gE as Vi,gF as Hi,gG as Us,gH as zi,gI as Bi,gJ as Wi,gK as Gi,gL as ji,gM as qi,gN as Ui,gO as Qi,gP as Qs,gQ as Yi,gR as Ki,gS as Ys,gT as Xi,gU as Zi,gV as Ji,gW as el,gX as tl,gY as rl,gZ as sl,g_ as nl,U as al,g$ as ol,h0 as il,h1 as ll,h2 as ul,h3 as cl,h4 as dl,h5 as fl,h6 as gl,h7 as Ks,h8 as us,h9 as vl,ha as $l,hb as hl,hc as ml,hd as pl,he as yl,hf as Cl,hg as wl,hh as _l,hi as kl,hj as Pl,hk as cs,hl as bl,hm as xl,hn as Sl,ho as Ol,hp as Rl,hq as Tl,hr as Al,hs as ds,ht as Dl,hu as Il,hv as El}from"../chunks/uloFpcoK.mjs";import{b as qe}from"../chunks/CVnLI7kJ.mjs";import{s as Ie,a as ge,m as _t,b as ct,d as J,e as Ll}from"../chunks/B2Ge_TJA.mjs";import{C as Ml}from"../chunks/9UNmPEIP.mjs";import{e as Xt,i as cr,s as Nl,R as Ve,p as Fl}from"../chunks/BN8ot3Mp.mjs";import{c as Or}from"../chunks/BF32I2AG.mjs";import{T as st}from"../chunks/DfsVf2Y0.mjs";import{H as ye,b as Ue,a as dt,M as Vl}from"../chunks/KuQ1EX1Y.mjs";import{d as Zt,M as Xs,S as Hl,l as zl,t as Bl,u as Wl,v as Gl,a as jl,W as ql,P as Ul,D as Yt}from"../chunks/Tuo__xUq.mjs";import{a as Ql}from"../chunks/CcaWrs5J.mjs";import{C as Pt,R as Jt,a as ee,S as je,E as at}from"../chunks/C1F3eHdt.mjs";import{c as er,b as Cr}from"../chunks/Hy6HsZIe.mjs";import{a as ur,_ as Yl,I as fs,c as Zs,$ as Kl}from"../chunks/Dl3AK7wR.mjs";import{C as Ct}from"../chunks/kTG67CLb.mjs";import{j as Xl,S as Zl,g as Jl,p as eu}from"../chunks/CU7UHoEw.mjs";import{W as He}from"../chunks/xxJToNBY.mjs";import{m as Js}from"../chunks/Dbye-yJ_.mjs";import{L as tu,S as ru}from"../chunks/CT31U6UP.mjs";import{I as su}from"../chunks/Y2DUjZ7o.mjs";import{r as nu}from"../chunks/VIYByENi.mjs";import{r as Rr}from"../chunks/BFoBeX25.mjs";import{k as au}from"../chunks/CGNlSiuz.mjs";import{ac as Mr,y as gs,z as vs,A as $s,C as ou,B as iu,D as lu,E as uu,H as hs,F as cu,G as ms,b as du,I as fu,M as gu,K as vu,J as $u,N as hu,L as mu}from"../chunks/DZFFmTt8.mjs";import{I as pu,i as yu,c as Cu,C as wu,T as _u}from"../chunks/ugau_xh0.mjs";import{t as wr,T as ot,c as ku,u as Pu,e as bu}from"../chunks/D1SxVFG5.mjs";import{t as xu}from"../chunks/DNtLpDYN.mjs";import{S as ps,a as Su}from"../chunks/DB8w6JNV.mjs";function Ou(s){f(s,s.v+1)}function Ru(s){let t=0,a=Qn(0),e;return()=>{bs()&&(r(a),xs(()=>(t===0&&(e=w(()=>s(()=>Ou(a)))),t+=1,()=>{wt().then(()=>{t-=1,t===0&&(e==null||e(),e=void 0)})})))}}function Tu(s,t){let a=s();const e=Fe(a,n=>{let i=a!==s();const d=Yn(()=>{xs(()=>{const u=s();i&&n(u)})});return i=!0,d});return t?{set:t,update:n=>t(n(s())),subscribe:e.subscribe}:{subscribe:e.subscribe}}function Au(s){let t;const a=Ru(n=>{let i=!1;const d=s.subscribe(u=>{t=u,i&&n()});return i=!0,d});function e(){return bs()?(a(),t):Ne(s)}return"set"in s?{get current(){return e()},set current(n){s.set(n)}}:{get current(){return e()}}}const Du=Object.freeze(Object.defineProperty({__proto__:null,derived:ea,fromStore:Au,get:Ne,readable:Ss,readonly:ta,toStore:Tu,writable:Fe},Symbol.toStringTag,{value:"Module"}));function Iu(s,t,...a){return Eu(s,yu,t,a)}function Eu(s,t,a,e){return function n(i,d){if(d>=e.length)return a(i);const u=new pu,c=e[d++];let h=-1;for(const p of i){const $=c(p,++h,i),m=u.get($);m?m.push(p):u.set($,[p])}for(const[p,$]of u)u.set(p,n($,d));return t(u)}(s,0)}const Lu=Cu("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Mu(s,t){for(var a=-1,e=s==null?0:s.length,n=Array(e);++a<e;)n[a]=t(s[a],a,s);return n}var ys=ps?ps.prototype:void 0,Cs=ys?ys.toString:void 0;function en(s){if(typeof s=="string")return s;if(Zt(s))return Mu(s,en)+"";if(Mr(s))return Cs?Cs.call(s):"";var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function Nu(s){return s}var Fu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vu=/^\w*$/;function Nr(s,t){if(Zt(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||Mr(s)?!0:Vu.test(s)||!Fu.test(s)||t!=null&&s in Object(t)}var Hu="Expected a function";function Fr(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(Hu);var a=function(){var e=arguments,n=t?t.apply(this,e):e[0],i=a.cache;if(i.has(n))return i.get(n);var d=s.apply(this,e);return a.cache=i.set(n,d)||i,d};return a.cache=new(Fr.Cache||Xs),a}Fr.Cache=Xs;var zu=500;function Bu(s){var t=Fr(s,function(e){return a.size===zu&&a.clear(),e}),a=t.cache;return t}var Wu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gu=/\\(\\)?/g,ju=Bu(function(s){var t=[];return s.charCodeAt(0)===46&&t.push(""),s.replace(Wu,function(a,e,n,i){t.push(n?i.replace(Gu,"$1"):e||a)}),t});function qu(s){return s==null?"":en(s)}function tn(s,t){return Zt(s)?s:Nr(s,t)?[s]:ju(qu(s))}function dr(s){if(typeof s=="string"||Mr(s))return s;var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function rn(s,t){t=tn(t,s);for(var a=0,e=t.length;s!=null&&a<e;)s=s[dr(t[a++])];return a&&a==e?s:void 0}function Uu(s,t,a){var e=s==null?void 0:rn(s,t);return e===void 0?a:e}var Qu=1,Yu=2;function Ku(s,t,a,e){var n=a.length,i=n;if(s==null)return!i;for(s=Object(s);n--;){var d=a[n];if(d[2]?d[1]!==s[d[0]]:!(d[0]in s))return!1}for(;++n<i;){d=a[n];var u=d[0],c=s[u],h=d[1];if(d[2]){if(c===void 0&&!(u in s))return!1}else{var p=new Hl,$;if(!($===void 0?Dr(h,c,Qu|Yu,e,p):$))return!1}}return!0}function sn(s){return s===s&&!Su(s)}function Xu(s){for(var t=zl(s),a=t.length;a--;){var e=t[a],n=s[e];t[a]=[e,n,sn(n)]}return t}function nn(s,t){return function(a){return a==null?!1:a[s]===t&&(t!==void 0||s in Object(a))}}function Zu(s){var t=Xu(s);return t.length==1&&t[0][2]?nn(t[0][0],t[0][1]):function(a){return a===s||Ku(a,s,t)}}function Ju(s,t){return s!=null&&t in Object(s)}function ec(s,t,a){t=tn(t,s);for(var e=-1,n=t.length,i=!1;++e<n;){var d=dr(t[e]);if(!(i=s!=null&&a(s,d)))break;s=s[d]}return i||++e!=n?i:(n=s==null?0:s.length,!!n&&Bl(n)&&Wl(d,n)&&(Zt(s)||Gl(s)))}function tc(s,t){return s!=null&&ec(s,t,Ju)}var rc=1,sc=2;function nc(s,t){return Nr(s)&&sn(t)?nn(dr(s),t):function(a){var e=Uu(a,s);return e===void 0&&e===t?tc(a,s):Dr(t,e,rc|sc)}}function ac(s){return function(t){return t==null?void 0:t[s]}}function oc(s){return function(t){return rn(t,s)}}function ic(s){return Nr(s)?ac(dr(s)):oc(s)}function lc(s){return typeof s=="function"?s:s==null?Nu:typeof s=="object"?Zt(s)?nc(s[0],s[1]):Zu(s):ic(s)}function uc(s,t,a){a=typeof a=="function"?a:void 0;var e=a?a(s,t):void 0;return e===void 0?Dr(s,t,void 0,a):!!e}function cc(s,t){for(var a,e=-1,n=s.length;++e<n;){var i=t(s[e]);i!==void 0&&(a=a===void 0?i:a+i)}return a}function dc(s,t){return s&&s.length?cc(s,lc(t)):0}function Tr(){let s;return[new Promise(a=>s=a),s]}class fc{constructor(t,a){$e(this,"currentConfig");$e(this,"currentAuxData");$e(this,"configList");$e(this,"cardStateCustomizer");$e(this,"currentDeck");$e(this,"deckLimits");$e(this,"defaults");$e(this,"addonComponents");$e(this,"newCardsIgnoreReviewLimit");$e(this,"applyAllParentLimits");$e(this,"fsrs");$e(this,"fsrsReschedule",Fe(!1));$e(this,"fsrsHealthCheck");$e(this,"daysSinceLastOptimization");$e(this,"currentPresetName");$e(this,"originalConfigsPromise");$e(this,"originalConfigsResolve");$e(this,"targetDeckId");$e(this,"configs");$e(this,"selectedIdx");$e(this,"configListSetter");$e(this,"modifiedConfigs",new Set);$e(this,"removedConfigs",[]);$e(this,"schemaModified");$e(this,"_presetAssignmentsChanged",!1);$e(this,"loadedPresets",new Set);var e,n;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(i=>({config:i.config,useCount:i.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(i=>i.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Fe(a.cardStateCustomizer),this.deckLimits=Fe((n=(e=a.currentDeck)==null?void 0:e.limits)!=null?n:vc()),this.newCardsIgnoreReviewLimit=Fe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Fe(a.applyAllParentLimits),this.fsrs=Fe(a.fsrs),this.fsrsHealthCheck=Fe(a.fsrsHealthCheck),this.daysSinceLastOptimization=Fe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Fe(this.getCurrentConfig()),this.currentAuxData=Fe(this.getCurrentAuxData()),this.currentPresetName=Fe(this.configs[this.selectedIdx].config.name),this.configList=Ss(this.getConfigList(),i=>{this.configListSetter=i}),this.schemaModified=a.schemaModified,this.addonComponents=Fe([]),Ne(this.configList),this.currentConfig.subscribe(i=>this.onCurrentConfigChanged(i)),this.currentAuxData.subscribe(i=>this.onCurrentAuxDataChanged(i)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Tr()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const e=await this.originalConfigsPromise,n=e.configs.findIndex(i=>i.id===t);n!==-1&&(e.configs[n]=or(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),wt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=a,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const e=this.ensureNewNameUnique(t),i={config:new xn({id:0n,name:e,config:new Sn(or(a))}),useCount:0};this.configs.push(i),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const e=[...this.configs.map(n=>n.config).filter((n,i)=>i!==this.selectedIdx&&(n.id===0n||this.modifiedConfigs.has(n.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Ne(this.cardStateCustomizer),limits:Ne(this.deckLimits),newCardsIgnoreReviewLimit:Ne(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ne(this.applyAllParentLimits),fsrs:Ne(this.fsrs),fsrsReschedule:Ne(this.fsrsReschedule),fsrsHealthCheck:Ne(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await On(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;Zr(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();Zr(a,t)||this.currentConfig.update(e=>{const n=new TextEncoder().encode(JSON.stringify(t));return e.other=n,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return or(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return gc(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,e)=>jn(a.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,e)=>{const n=a.useCount+(e===this.selectedIdx?1:0);return{name:a.config.name,current:e===this.selectedIdx,idx:e,useCount:n}})}getAllConfigs(){return or({configs:this.configs.map(t=>t.config),cardStateCustomizer:Ne(this.cardStateCustomizer),limits:Ne(this.deckLimits),newCardsIgnoreReviewLimit:Ne(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ne(this.applyAllParentLimits),fsrs:Ne(this.fsrs),fsrsReschedule:Ne(this.fsrsReschedule),currentConfig:Ne(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!uc(t,a,(e,n)=>{if(typeof e=="number"&&typeof n=="number")return Math.fround(e)===Math.fround(n)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function gc(s){if(!s.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(s))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function vc(){return new Rn({})}class mt{constructor(t,a,e,n,i){$e(this,"title");$e(this,"value");$e(this,"setter");$e(this,"disabledValue");$e(this,"startValue");$e(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=e,this.disabledValue=n,this.startValue=i}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,e;this.value=(e=(a=this.value)!=null?a:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Vr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await wt()}function _r(s){return s.fsrsParams6?s.fsrsParams6:s.fsrsParams5?s.fsrsParams5:s.fsrsParams4}const $c=async({params:s})=>{const t=Number(s.deckId),a=BigInt(t),e=await Tn({did:a});return{state:new fc(BigInt(a),e)}},og=Object.freeze(Object.defineProperty({__proto__:null,load:$c},Symbol.toStringTag,{value:"Module"}));As("svelte",sa);As("svelte/store",Du);function hc(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(d,"$components",a),n=()=>ge(u,"$auxData",a);let i=N(t,"state",8);const d=i().addonComponents,u=i().currentAuxData;_e();var c=Je(),h=oe(c);{var p=$=>{st($,{title:"Add-ons",children:(m,D)=>{var y=Je(),o=oe(y);Xt(o,1,e,cr,(k,P)=>{var T=Je(),O=oe(T);Or(O,()=>r(P).component,(M,W)=>{W(M,Os(()=>r(P),{get data(){return _t(),n()},set data(H){ct(u,H)},$$legacy:!0}))}),v(k,T)}),v(m,y)},$$slots:{default:!0}})};Te(h,$=>{e().length&&$(p)})}v(s,c),we()}function kr(s,t){let a,e;if(t instanceof Element){if(a=t,e=Array.prototype.indexOf.call(s,a),e<0)return null}else if(typeof t=="string"){const n=s.namedItem(t);if(!n||(a=n,e=Array.prototype.indexOf.call(s,a),e<0))return null}else if(t<0){e=s.length+t;const n=s.item(e);if(!n)return null;a=n}else{e=t;const n=s.item(e);if(!n)return null;a=n}return[a,e]}class mc{constructor(t){$e(this,"parent");this.parent=t}insertElement(t,a){const e=kr(this.parent.children,a);if(!e)return-1;const[n,i]=e;return this.parent.insertBefore(t,n[0]),i}appendElement(t,a){var u;const e=kr(this.parent.children,a);if(!e)return-1;const[n,i]=e,d=(u=n.nextElementSibling)!=null?u:null;return this.parent.insertBefore(t,d),i+1}updateElement(t,a){const e=kr(this.parent.children,a);return e?(t(...e),!0):!1}}function pc(s){return new mc(s)}function yc(s){return s.nodeType===Node.ELEMENT_NODE}function Cc(s){function t(e){Kn(s,e)}return[{get(){return Ar(s)},available(){return Xn(s)}},t]}function wc(s,t,a,e){const n=Fe([]);n.subscribe(t);function i(y,o){n.update(k=>(k.splice(y,0,o),k))}const[d,u]=Tr(),c=d.then(pc),h=Fe([]);async function p(y,o){const[k,P]=Tr(),T=await c,O=s();function M(R){return!y.id||R.id===y.id}async function W(R,B){for(const S of R)for(const C of S.addedNodes){if(!yc(C)||!M(C))continue;const E=o(C,T);return E>=0&&i(E,O),P(void 0),B.disconnect()}}new MutationObserver(W).observe(T.parent,{childList:!0});const L={component:y,hostProps:O};return h.update(R=>(R.push(L),R)),await k,{destroy(){h.update(R=>(Ql(R,L),R))}}}async function $(y,o){return(await c).updateElement((P,T)=>{n.update(O=>(O[T]=y(O[T]),O))},o)}const m=e({addComponent:p,updateProps:$});function D(){const y=s();return n.update(o=>(o.push(y),o)),y}return a({getProps:D}),{dynamicSlotted:h,resolveSlotContainer:u,slotsInterface:m}}function _c(){return{detach:Fe(!1)}}function kc({addComponent:s,updateProps:t}){function a(u,c=0){return s(u,(h,p)=>p.insertElement(h,c))}function e(u,c=-1){return s(u,(h,p)=>p.appendElement(h,c))}function n(u){return t(c=>(c.detach.set(!1),c),u)}function i(u){return t(c=>(c.detach.set(!0),c),u)}function d(u){return t(c=>(c.detach.update(h=>!h),c),u)}return{insert:a,append:e,show:n,hide:i,toggle:d}}const Pc=Symbol("dynamicSlotting"),[ws,bc]=Cc(Pc);var xc=Z('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function it(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(m,"$dynamicSlotted",a);function n(P){return P}let i=N(t,"slotHost",8),d=N(t,"createProps",8,_c),u=N(t,"updatePropsList",8,n),c=N(t,"setSlotHostContext",8,bc),h=N(t,"createInterface",8,kc);const{slotsInterface:p,resolveSlotContainer:$,dynamicSlotted:m}=wc(d(),u(),c(),h());let D=N(t,"api",8);Object.assign(D(),p),_e();var y=xc(),o=G(y);yt(o,t,"default",{});var k=g(o,2);Xt(k,1,e,({component:P,hostProps:T})=>P.id,(P,T)=>{let O=()=>r(T).component,M=()=>r(T).hostProps;var W=Je(),H=oe(W);Or(H,i,(L,R)=>{R(L,{get id(){return O().id},get hostProps(){return M()},children:(B,S)=>{var C=Je(),l=oe(C);Or(l,()=>O().component,(E,F)=>{F(E,Os(()=>O().props))}),v(B,C)},$$slots:{default:!0}})}),v(P,W)}),I(y),jl(y,P=>$==null?void 0:$(P)),v(s,y),we()}var Sc=Z('<div class="item svelte-u5rx4p"><!></div>');function K(s,t){var p;Ce(t,!1);const a=Ie(),e=()=>ge(d,"$detach",a);let n=N(t,"id",8,void 0),i=N(t,"hostProps",8,void 0);ws.available()||console.log("Item: should always have a slotHostContext");const{detach:d}=(p=i())!=null?p:ws.get().getProps();_e();var u=Sc(),c=G(u);{var h=$=>{var m=Je(),D=oe(m);yt(D,t,"default",{}),v($,m)};Te(c,$=>{e()||$(h)})}I(u),A(()=>Ze(u,"id",n())),v(s,u),we()}var Oc=Z(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function kt(s,t){Ce(t,!1);let a=N(t,"title",8);_e(),te();var e=Oc(),n=oe(e),i=g(n);A(()=>Ze(i,"title",Sr()));var d=G(i);ur(d,{icon:Yl}),I(i),A(()=>{var u;return V(n,`${(u=a())!=null?u:""} `)}),v(s,e),we()}var Rc=Z('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Tc=Z('<div class="m-2"><!></div>');function Ac(s,t){let a=N(t,"value",12),e=N(t,"title",8);var n=Tc(),i=G(n);Pt(i,{children:(d,u)=>{var c=Rc(),h=G(c),p=G(h);kt(p,{get title(){return e()}}),I(h);var $=g(h,2),m=G($);Rs(m),I($),I(c),er(m,a),v(d,c)},$$slots:{default:!0,revert:(d,u)=>{Jt(d,{slot:"revert",defaultValue:"",get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),I(n),v(s,n)}var Dc=Z('<span class="invisible svelte-xwrhci"> </span>'),Ic=Z('<span class="suffix svelte-xwrhci"></span>'),Ec=Z('<div class="spinner decrement svelte-xwrhci" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-xwrhci" tabindex="-1" role="button"><!></div>',1),Lc=Z('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"> <!> <!></div>');function an(s,t){Ce(t,!1);const a=x();let e=N(t,"value",12),n=N(t,"step",8,1),i=N(t,"min",8,1),d=N(t,"max",8,9999),u=N(t,"percentage",8,!1),c=x(),h=N(t,"focused",12,!1),p=x();function $(_){Number.isNaN(_)||e(Math.min(d(),Math.max(i(),_))),wt().then(()=>{It(c,r(c).value=r(D)),O(r(D))})}function m(_){if(Math.floor(_)===_)return 0;const z=_.toString().split(".")[1].length||0,q=u()?z-2:z;return Math.max(0,q)}let D=x();function y(){$(parseFloat(this.value)/r(p))}function o(_){h()&&($(e()+(_.deltaY<0?n():-n())),_.preventDefault())}function k(_){$(e()+_),r(H)&&setTimeout(()=>k(_),L)}const P=[1500,1250,1e3,750,500,250];async function T(_){f(H,!0),L=128,f(R,setTimeout(_,250));for(const z of P)L=await new Promise(q=>setTimeout(()=>q(r(H)?L/2:128),z))}function O(_){f(W,ia({pct:_}).replaceAll("%","-%-").split("-"))}function M(){O(r(c).value)}let W=x(),H=x(!1),L,R=x();ne(()=>We(u()),()=>{f(p,u()?100:1)}),ne(()=>(We(e()),r(p),We(n())),()=>{f(D,(e()*r(p)).toFixed(m(n())))}),ne(()=>r(D),()=>{O(r(D))}),ne(()=>(We(u()),r(W)),()=>{f(a,u()&&!r(W)[0]?"2.2ch":void 0)}),ze(),_e();var B=Lc(),S=G(B);$t(S),Et(S,_=>f(c,_),()=>r(c));var C=g(S,2);{var l=_=>{var z=Ic();Xt(z,5,()=>r(W),cr,(q,ae)=>{var Q=Je(),U=oe(Q);{var ue=de=>{var Pe=Y("%");v(de,Pe)},ke=de=>{var Pe=Dc(),Se=G(Pe,!0);I(Pe),A(()=>V(Se,r(ae))),v(de,Pe)};Te(U,de=>{r(ae)=="%"?de(ue):de(ke,!1)})}v(q,Q)}),I(z),v(_,z)};Te(C,_=>{u()&&_(l)})}var E=g(C,2);{var F=_=>{var z=Ec(),q=oe(z);A(()=>Ze(q,"title",aa()));var ae=G(q);fs(ae,{children:(ue,ke)=>{ur(ue,{icon:Zs})},$$slots:{default:!0}}),I(q);var Q=g(q,2);A(()=>Ze(Q,"title",oa()));var U=G(Q);fs(U,{children:(ue,ke)=>{ur(ue,{icon:Kl})},$$slots:{default:!0}}),I(Q),A(()=>{pt(q,"active",e()>i()),pt(Q,"active",e()<d())}),xe("click",q,()=>{r(c).focus(),e()>i()&&k(-n())}),xe("mousedown",q,()=>T(()=>{e()>i()&&k(-n())})),xe("mouseup",q,()=>{clearTimeout(r(R)),f(H,!1)}),xe("click",Q,()=>{r(c).focus(),e()<d()&&k(n())}),xe("mousedown",Q,()=>T(()=>{e()<d()&&k(n())})),xe("mouseup",Q,()=>{clearTimeout(r(R)),f(H,!1)}),v(_,z)};Te(E,_=>{Xl()&&_(F)})}I(B),A(()=>{Ze(S,"min",i()*r(p)),Ze(S,"max",d()*r(p)),Ze(S,"step",n()*r(p)),Er(S,r(D)),Nl(S,"padding-left",r(a))}),xe("blur",S,y),xe("change",S,y),xe("input",S,M),xe("focusin",S,()=>h(!0)),xe("focusout",S,()=>h(!1)),xe("wheel",B,o),v(s,B),we()}var Mc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function rt(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"min",8,0),i=N(t,"max",8,9999),d=N(t,"step",8,.01),u=N(t,"percentage",8,!1),c=N(t,"focused",12,!1);var h=Nc(),p=oe(h);Ge(p,()=>({"--cols":13})),Ve(p.lastChild,{children:($,m)=>{var D=Mc(),y=oe(D);Ge(y,()=>({"--col-size":7})),Ct(y.lastChild,{breakpoint:"xs",children:(k,P)=>{var T=Je(),O=oe(T);yt(O,t,"default",{}),v(k,T)},$$slots:{default:!0}}),I(y);var o=g(y,2);Ge(o,()=>({"--col-size":6})),Ct(o.lastChild,{breakpoint:"xs",children:(k,P)=>{Pt(k,{children:(T,O)=>{an(T,{get min(){return n()},get max(){return i()},get step(){return d()},get percentage(){return u()},get value(){return a()},set value(M){a(M)},get focused(){return c()},set focused(M){c(M)},$$legacy:!0})},$$slots:{default:!0,revert:(T,O)=>{Jt(T,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(M){a(M)},$$legacy:!0})}}})},$$slots:{default:!0}}),I(o),v($,D)},$$slots:{default:!0}}),I(p),v(s,h)}var Fc=Z("<!> <!>",1),Vc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ke(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"min",8,0),i=N(t,"max",8,9999);var d=Hc(),u=oe(d);Ge(u,()=>({"--cols":13})),Ve(u.lastChild,{children:(c,h)=>{var p=Vc(),$=oe(p);Ge($,()=>({"--col-size":7})),Ct($.lastChild,{breakpoint:"xs",children:(D,y)=>{var o=Je(),k=oe(o);yt(k,t,"default",{}),v(D,o)},$$slots:{default:!0}}),I($);var m=g($,2);Ge(m,()=>({"--col-size":6})),Ct(m.lastChild,{breakpoint:"xs",children:(D,y)=>{Ve(D,{class:"flex-grow-1",children:(o,k)=>{var P=Fc(),T=oe(P);yt(T,t,"tabs",{});var O=g(T,2);Pt(O,{children:(M,W)=>{an(M,{get min(){return n()},get max(){return i()},get value(){return a()},set value(H){a(H)},$$legacy:!0})},$$slots:{default:!0,revert:(M,W)=>{Jt(M,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(H){a(H)},$$legacy:!0})}}}),v(o,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(m),v(c,p)},$$slots:{default:!0}}),I(u),v(s,d)}var zc=Z('<input type="date" class="svelte-67zife">'),Bc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wc=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Gc=Z("<div><!></div>");function jc(s,t){Ce(t,!1);let a=N(t,"date",12);ne(()=>We(a()),()=>{a(a()?a():"1970-01-01")}),ze();var e=Gc(),n=G(e);Pt(n,{children:(i,d)=>{var u=Wc(),c=oe(u);Ge(c,()=>({"--cols":13})),Ve(c.lastChild,{children:(h,p)=>{var $=Bc(),m=oe($);Ge(m,()=>({"--col-size":7})),Ct(m.lastChild,{breakpoint:"xs",children:(y,o)=>{var k=Je(),P=oe(k);yt(P,t,"default",{}),v(y,k)},$$slots:{default:!0}}),I(m);var D=g(m,2);Ge(D,()=>({"--col-size":6})),Ct(D.lastChild,{breakpoint:"xs",children:(y,o)=>{var k=zc();$t(k),er(k,a),v(y,k)},$$slots:{default:!0}}),I(D),v(h,$)},$$slots:{default:!0}}),I(c),v(i,u)},$$slots:{default:!0}}),I(e),v(s,e),we()}var qc=Z("<!> <!> <!> <!> <!>",1),Uc=Z("<!> <!> <!>",1),Qc=Z("<!> <!> <!> <!>",1);function Yc(s,t){Ce(t,!1);const a=Ie(),e=()=>ge($,"$config",a),n=()=>ge(y,"$fsrs",a),i=()=>ge(D,"$cardStateCustomizer",a),d=x(),u=x(),c=x();let h=N(t,"state",8),p=N(t,"api",8);const $=h().currentConfig,m=h().defaults,D=h().cardStateCustomizer,y=h().fsrs,o={maximumInterval:{title:Ds(),help:la(),url:ye.DeckOptions.maximumInterval},historicalRetention:{title:Jr(),help:ua(),sched:Ue.FSRS},ignoreRevlogsBeforeMs:{title:es(),help:ca(),sched:Ue.FSRS},startingEase:{title:da(),help:fa(),url:ye.DeckOptions.startingEase,sched:Ue.SM2},easyBonus:{title:ga(),help:va(),url:ye.DeckOptions.easyBonus,sched:Ue.SM2},intervalModifier:{title:$a(),help:ha(),url:ye.DeckOptions.intervalModifier,sched:Ue.SM2},hardInterval:{title:ma(),help:pa(),url:ye.DeckOptions.hardInterval,sched:Ue.SM2},newInterval:{title:ya(),help:Ca(),url:ye.DeckOptions.newInterval,sched:Ue.SM2},customScheduling:{title:wa(),help:_a(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},k=Object.values(o);let P=x(null),T="";function O(l){T!=l&&(W&&l&&l!="1970-01-01"?(T=l,An({search:e().paramSearch||`preset:"${h().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:l}).then(E=>{f(P,E)})):f(P,null),W=!0)}let M=x(void 0),W=!0;const H=1e3;let L=x("alert-warning"),R=x(),B=x();function S(l){r(R).show(),r(B).to(l)}ne(()=>e(),()=>{f(d,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ne(()=>(e(),ut),()=>{f(u,e().maximumReviewInterval<180?ka():"")}),ne(()=>(r(M),e()),()=>{clearTimeout(r(M)),f(M,setTimeout(()=>{O(e().ignoreRevlogsBeforeDate)},H))}),ne(()=>r(P),()=>{r(P)&&(Number(r(P).included)/Number(r(P).total)<.1?f(L,"alert-danger"):r(P).included!=r(P).total?f(L,"alert-warning"):f(L,"alert-info"))}),ne(()=>(r(P),ut),()=>{f(c,r(P)?Pa({included:r(P).included.toString(),totalCards:r(P).total.toString()}):"")}),ze(),_e();var C=fe(()=>ts());st(s,{get title(){return r(C)},children:(l,E)=>{it(l,{slotHost:K,get api(){return p()},children:(F,_)=>{var z=Qc(),q=oe(z);K(q,{children:(de,Pe)=>{Ke(de,{get defaultValue(){return m.maximumReviewInterval},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(Se){J($,w(e).maximumReviewInterval=Se,w(e))},children:(Se,ce)=>{ee(Se,{$$events:{click:()=>S(Object.keys(o).indexOf("maximumInterval"))},children:(he,Re)=>{te();var Me=Y();A(()=>V(Me,o.maximumInterval.title)),v(he,Me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ae=g(q,2);K(ae,{children:(de,Pe)=>{He(de,{get warning(){return r(u)},get className(){return r(d)}})},$$slots:{default:!0}});var Q=g(ae,2);{var U=de=>{var Pe=qc(),Se=oe(Pe);K(Se,{children:(me,Ee)=>{rt(me,{get defaultValue(){return m.initialEase},min:1.31,max:5,get value(){return e().initialEase},set value(se){J($,w(e).initialEase=se,w(e))},children:(se,Le)=>{ee(se,{$$events:{click:()=>S(Object.keys(o).indexOf("startingEase"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,o.startingEase.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ce=g(Se,2);K(ce,{children:(me,Ee)=>{rt(me,{get defaultValue(){return m.easyMultiplier},min:1,max:5,get value(){return e().easyMultiplier},set value(se){J($,w(e).easyMultiplier=se,w(e))},children:(se,Le)=>{ee(se,{$$events:{click:()=>S(Object.keys(o).indexOf("easyBonus"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,o.easyBonus.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var he=g(ce,2);K(he,{children:(me,Ee)=>{rt(me,{get defaultValue(){return m.intervalMultiplier},min:.5,max:2,get value(){return e().intervalMultiplier},set value(se){J($,w(e).intervalMultiplier=se,w(e))},children:(se,Le)=>{ee(se,{$$events:{click:()=>S(Object.keys(o).indexOf("intervalModifier"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,o.intervalModifier.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Re=g(he,2);K(Re,{children:(me,Ee)=>{rt(me,{get defaultValue(){return m.hardMultiplier},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(se){J($,w(e).hardMultiplier=se,w(e))},children:(se,Le)=>{ee(se,{$$events:{click:()=>S(Object.keys(o).indexOf("hardInterval"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,o.hardInterval.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Me=g(Re,2);K(Me,{children:(me,Ee)=>{rt(me,{get defaultValue(){return m.lapseMultiplier},max:1,get value(){return e().lapseMultiplier},set value(se){J($,w(e).lapseMultiplier=se,w(e))},children:(se,Le)=>{ee(se,{$$events:{click:()=>S(Object.keys(o).indexOf("newInterval"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,o.newInterval.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(de,Pe)},ue=de=>{var Pe=Uc(),Se=oe(Pe);rt(Se,{get defaultValue(){return m.historicalRetention},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(Re){J($,w(e).historicalRetention=Re,w(e))},children:(Re,Me)=>{ee(Re,{$$events:{click:()=>S(Object.keys(o).indexOf("historicalRetention"))},children:(me,Ee)=>{te();var se=Y();A(()=>V(se,Jr())),v(me,se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ce=g(Se,2);K(ce,{children:(Re,Me)=>{jc(Re,{get date(){return e().ignoreRevlogsBeforeDate},set date(me){J($,w(e).ignoreRevlogsBeforeDate=me,w(e))},children:(me,Ee)=>{ee(me,{$$events:{click:()=>S(Object.keys(o).indexOf("ignoreRevlogsBeforeMs"))},children:(se,Le)=>{te();var pe=Y();A(()=>V(pe,es())),v(se,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var he=g(ce,2);K(he,{children:(Re,Me)=>{He(Re,{get warning(){return r(c)},get className(){return r(L)}})},$$slots:{default:!0}}),v(de,Pe)};Te(Q,de=>{n()?de(ue,!1):de(U)})}var ke=g(Q,2);K(ke,{children:(de,Pe)=>{Ac(de,{get title(){return o.customScheduling.title},get value(){return _t(),i()},set value(Se){ct(D,Se)},$$events:{click:()=>S(Object.keys(o).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),v(F,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(l,E)=>{var F=fe(()=>ts());dt(l,{get title(){return r(F)},get url(){return ye.DeckOptions.advanced},slot:"tooltip",get fsrs(){return n()},helpSections:k,$$events:{mount:_=>{f(R,_.detail.modal),f(B,_.detail.carousel)}}})}}}),we()}var Kc=Z("<!> <!>",1);function Xc(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(d,"$config",a);let n=N(t,"state",8),i=N(t,"api",8);const d=n().currentConfig,u=n().defaults,c={disableAutoplay:{title:ba(),help:xa()},skipQuestionWhenReplaying:{title:Sa(),help:Oa()}},h=Object.values(c);let p=x(),$=x();function m(y){r(p).show(),r($).to(y)}_e();var D=fe(()=>rs());st(s,{get title(){return r(D)},children:(y,o)=>{it(y,{slotHost:K,get api(){return i()},children:(k,P)=>{var T=Kc(),O=oe(T);K(O,{children:(W,H)=>{je(W,{get defaultValue(){return u.disableAutoplay},get value(){return e().disableAutoplay},set value(L){J(d,w(e).disableAutoplay=L,w(e))},children:(L,R)=>{ee(L,{$$events:{click:()=>m(Object.keys(c).indexOf("disableAutoplay"))},children:(B,S)=>{te();var C=Y();A(()=>V(C,c.disableAutoplay.title)),v(B,C)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=g(O,2);K(M,{children:(W,H)=>{je(W,{get defaultValue(){return u.skipQuestionWhenReplayingAnswer},get value(){return e().skipQuestionWhenReplayingAnswer},set value(L){J(d,w(e).skipQuestionWhenReplayingAnswer=L,w(e))},children:(L,R)=>{ee(L,{$$events:{click:()=>m(Object.keys(c).indexOf("skipQuestionWhenReplaying"))},children:(B,S)=>{te();var C=Y();A(()=>V(C,c.skipQuestionWhenReplaying.title)),v(B,C)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(k,T)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,o)=>{var k=fe(()=>rs());dt(y,{get title(){return r(k)},get url(){return ye.DeckOptions.audio},slot:"tooltip",helpSections:h,$$events:{mount:P=>{f(p,P.detail.modal),f($,P.detail.carousel)}}})}}}),we()}function Zc(){return[{label:Ra(),value:vt.DECK},{label:Ta(),value:vt.DECK_THEN_RANDOM_NOTES},{label:Aa(),value:vt.LOWEST_POSITION},{label:Da(),value:vt.HIGHEST_POSITION},{label:Ia(),value:vt.RANDOM_NOTES},{label:Ea(),value:vt.RANDOM_CARDS}]}function Jc(){return[{label:La(),value:nt.TEMPLATE},{label:Ma(),value:nt.NO_SORT},{label:Na(),value:nt.TEMPLATE_THEN_RANDOM},{label:Fa(),value:nt.RANDOM_NOTE_THEN_TEMPLATE},{label:Is(),value:nt.RANDOM_CARD}]}function on(s){return[{label:Va(),value:tt.DAY},{label:Ha(),value:tt.DAY_THEN_DECK},{label:za(),value:tt.DECK_THEN_DAY},{label:Ba(),value:tt.INTERVALS_ASCENDING},{label:Wa(),value:tt.INTERVALS_DESCENDING},...ad(s),{label:Ga(),value:tt.RETRIEVABILITY_ASCENDING},{label:ja(),value:tt.RETRIEVABILITY_DESCENDING},{label:Is(),value:tt.RANDOM},{label:qa(),value:tt.ADDED},{label:Ua(),value:tt.REVERSE_ADDED}]}function _s(){return[{label:Qa(),value:yr.MIX_WITH_REVIEWS},{label:Ya(),value:yr.AFTER_REVIEWS},{label:Ka(),value:yr.BEFORE_REVIEWS}]}function ed(){return[{label:Xa(),value:Dt.SUSPEND},{label:Za(),value:Dt.TAG_ONLY}]}function td(){return[{label:Ja(),value:br.DUE},{label:eo(),value:br.RANDOM}]}function rd(){return[{label:to(),value:Qt.BURY_CARD},{label:ro(),value:Qt.ANSWER_AGAIN},{label:so(),value:Qt.ANSWER_GOOD},{label:no(),value:Qt.ANSWER_HARD},{label:ao(),value:Qt.SHOW_REMINDER}]}function sd(){return[{label:oo(),value:Kr.SHOW_ANSWER},{label:io(),value:Kr.SHOW_REMINDER}]}const ks="memorized";function nd(){return[{label:"Memorized (Default)",value:"memorized"},{label:"Stability (Experimental)",value:"stability"},{label:"Post Abandon Memorized (Experimental)",value:"futureMemorized"},{label:"Average Post Abandon Memorized (Experimental)",value:"averageFutureMemorized"}]}function ad(s){const t=[{label:s?lo():uo(),value:tt.EASE_ASCENDING},{label:s?co():fo(),value:tt.EASE_DESCENDING}];return s&&t.reverse(),t}var od=Z("<!> <!> <!> <!> <!>",1);function id(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(d,"$config",a);let n=N(t,"state",8),i=N(t,"api",8);const d=n().currentConfig,u=n().defaults,c={secondsToShowQuestion:{title:go(),help:vo()},secondsToShowAnswer:{title:$o(),help:ho()},waitForAudio:{title:mo(),help:po()},questionAction:{title:yo(),help:Co()},answerAction:{title:wo(),help:_o()}},h=Object.values(c);let p=x(),$=x();function m(y){r(p).show(),r($).to(y)}_e();var D=fe(()=>ss());st(s,{get title(){return r(D)},children:(y,o)=>{it(y,{slotHost:K,get api(){return i()},children:(k,P)=>{var T=od(),O=oe(T);K(O,{children:(R,B)=>{rt(R,{get defaultValue(){return u.secondsToShowQuestion},step:.1,get value(){return e().secondsToShowQuestion},set value(S){J(d,w(e).secondsToShowQuestion=S,w(e))},children:(S,C)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("secondsToShowQuestion"))},children:(l,E)=>{te();var F=Y();A(()=>V(F,c.secondsToShowQuestion.title)),v(l,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=g(O,2);K(M,{children:(R,B)=>{rt(R,{get defaultValue(){return u.secondsToShowAnswer},step:.1,get value(){return e().secondsToShowAnswer},set value(S){J(d,w(e).secondsToShowAnswer=S,w(e))},children:(S,C)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("secondsToShowAnswer"))},children:(l,E)=>{te();var F=Y();A(()=>V(F,c.secondsToShowAnswer.title)),v(l,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=g(M,2);K(W,{children:(R,B)=>{je(R,{get defaultValue(){return u.waitForAudio},get value(){return e().waitForAudio},set value(S){J(d,w(e).waitForAudio=S,w(e))},children:(S,C)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("waitForAudio"))},children:(l,E)=>{te();var F=Y();A(()=>V(F,c.waitForAudio.title)),v(l,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=g(W,2);K(H,{children:(R,B)=>{var S=fe(sd);at(R,{get defaultValue(){return u.questionAction},get choices(){return r(S)},get value(){return e().questionAction},set value(C){J(d,w(e).questionAction=C,w(e))},children:(C,l)=>{ee(C,{$$events:{click:()=>m(Object.keys(c).indexOf("questionAction"))},children:(E,F)=>{te();var _=Y();A(()=>V(_,c.questionAction.title)),v(E,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=g(H,2);K(L,{children:(R,B)=>{var S=fe(rd);at(R,{get defaultValue(){return u.answerAction},get choices(){return r(S)},get value(){return e().answerAction},set value(C){J(d,w(e).answerAction=C,w(e))},children:(C,l)=>{ee(C,{$$events:{click:()=>m(Object.keys(c).indexOf("answerAction"))},children:(E,F)=>{te();var _=Y();A(()=>V(_,c.answerAction.title)),v(E,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(k,T)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,o)=>{var k=fe(()=>ss());dt(y,{get title(){return r(k)},get url(){return ye.DeckOptions.autoAdvance},slot:"tooltip",helpSections:h,$$events:{mount:P=>{f(p,P.detail.modal),f($,P.detail.carousel)}}})}}}),we()}var ld=Z("<!> <!> <!>",1);function ud(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(d,"$config",a);let n=N(t,"state",8),i=N(t,"api",8);const d=n().currentConfig,u=n().defaults,c=`

`+ko(),h={buryNewSiblings:{title:Po(),help:bo()+c},buryReviewSiblings:{title:xo(),help:So()+c},buryInterdayLearningSiblings:{title:Oo(),help:Ro()+c}},p=Object.values(h);let $=x(),m=x();function D(o){r($).show(),r(m).to(o)}_e();var y=fe(()=>ns());st(s,{get title(){return r(y)},children:(o,k)=>{it(o,{slotHost:K,get api(){return i()},children:(P,T)=>{var O=ld(),M=oe(O);K(M,{children:(L,R)=>{je(L,{get defaultValue(){return u.buryNew},get value(){return e().buryNew},set value(B){J(d,w(e).buryNew=B,w(e))},children:(B,S)=>{ee(B,{$$events:{click:()=>D(Object.keys(h).indexOf("buryNewSiblings"))},children:(C,l)=>{te();var E=Y();A(()=>V(E,h.buryNewSiblings.title)),v(C,E)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=g(M,2);K(W,{children:(L,R)=>{je(L,{get defaultValue(){return u.buryReviews},get value(){return e().buryReviews},set value(B){J(d,w(e).buryReviews=B,w(e))},children:(B,S)=>{ee(B,{$$events:{click:()=>D(Object.keys(h).indexOf("buryReviewSiblings"))},children:(C,l)=>{te();var E=Y();A(()=>V(E,h.buryReviewSiblings.title)),v(C,E)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=g(W,2);K(H,{children:(L,R)=>{je(L,{get defaultValue(){return u.buryInterdayLearning},get value(){return e().buryInterdayLearning},set value(B){J(d,w(e).buryInterdayLearning=B,w(e))},children:(B,S)=>{ee(B,{$$events:{click:()=>D(Object.keys(h).indexOf("buryInterdayLearningSiblings"))},children:(C,l)=>{te();var E=Y();A(()=>V(E,h.buryInterdayLearningSiblings.title)),v(C,E)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(P,O)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(o,k)=>{var P=fe(()=>ns());dt(o,{get title(){return r(P)},get url(){return ye.Studying.siblingsAndBurying},slot:"tooltip",helpSections:p,$$events:{mount:T=>{f($,T.detail.modal),f(m,T.detail.carousel)}}})}}}),we()}function cd(){}var dd=Z('<hr class="dropdown-divider">');function fd(s){var t=dd();v(s,t)}var gd=Z('<div class="save svelte-ymxw35"> </div>'),vd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$d=Z("<!> <!> <!> <!> <!> <!>",1),hd=Z('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function md(s,t){Ce(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",e=Ts();let n=N(t,"state",8);async function i(){if(await wt(),n().defaultConfigSelected()){alert(To());return}const y=(n().removalWilLForceFullSync()?Ao()+" ":"")+Do({name:n().getCurrentName()});if(confirm(qn(y)))try{n().removeCurrentConfig(),e("remove")}catch(o){alert(o)}}async function d(y){await Vr(),n().save(y)}const u="Control+Enter";let c=x(!1);_e();var h=hd(),p=G(h),$=fe(()=>Jl(u));Ge(p,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),tu(p.lastChild,{primary:!0,get tooltip(){return r($)},$$events:{click:()=>d(lr.NORMAL)},children:(y,o)=>{var k=gd(),P=G(k,!0);A(()=>V(P,Io())),I(k),v(y,k)},$$slots:{default:!0}}),I(p);var m=g(p,2);Zl(m,{keyCombination:u,$$events:{action:()=>d(lr.NORMAL)}});var D=g(m,2);ql(D,{get show(){return r(c)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>f(c,!1)},$$slots:{reference:(y,o)=>{var k=vd(),P=oe(k);Ge(P,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),su(P.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>f(c,!r(c))},children:(T,O)=>{ur(T,{icon:Zs})},$$slots:{default:!0}}),I(P),v(y,k)},floating:(y,o)=>{Ul(y,{slot:"floating",children:(k,P)=>{var T=$d(),O=oe(T);Yt(O,{$$events:{click:()=>e("add")},children:(B,S)=>{te();var C=Y();A(()=>V(C,Es())),v(B,C)},$$slots:{default:!0}});var M=g(O,2);Yt(M,{$$events:{click:()=>e("clone")},children:(B,S)=>{te();var C=Y();A(()=>V(C,Ls())),v(B,C)},$$slots:{default:!0}});var W=g(M,2);Yt(W,{$$events:{click:()=>e("rename")},children:(B,S)=>{te();var C=Y();A(()=>V(C,Ms())),v(B,C)},$$slots:{default:!0}});var H=g(W,2);Yt(H,{$$events:{click:i},children:(B,S)=>{te();var C=Y();A(()=>V(C,Eo())),v(B,C)},$$slots:{default:!0}});var L=g(H,2);fd(L);var R=g(L,2);Yt(R,{$$events:{click:()=>d(lr.APPLY_TO_CHILDREN)},children:(B,S)=>{te();var C=Y();A(()=>V(C,Lo())),v(B,C)},$$slots:{default:!0}}),v(k,T)},$$slots:{default:!0}})}}}),I(h),v(s,h),we()}var pd=Z('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function yd(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(Fl,"$pageTheme",a),n=x();let i=N(t,"title",8),d=N(t,"prompt",8),u=N(t,"initialValue",8,""),c=N(t,"onOk",8);const h=Math.random().toString(36).substring(2),p=Ar(Js);let $=x(),m,D=x();function y(){c()(r(D).value),m.hide(),f(n,u())}function o(){m.hide(),f(n,u())}function k(){r(D).focus(),T(!0)}function P(){T(!1)}const{set:T,remove:O}=nu(o);Ir(()=>{r($).addEventListener("shown.bs.modal",k),r($).addEventListener("hidden.bs.modal",P),m=new Vl(r($),{keyboard:!1}),p.set(h,m)}),na(()=>{O(),r($).removeEventListener("shown.bs.modal",k),r($).removeEventListener("hidden.bs.modal",P)}),ne(()=>We(u()),()=>{f(n,u())}),ze(),_e();var M=pd(),W=G(M),H=G(W),L=G(H),R=G(L),B=G(R,!0);I(R);var S=g(R,2);I(L);var C=g(L,2),l=G(C),E=G(l),F=G(E),_=G(F);I(F);var z=g(F,2);$t(z),Et(z,U=>f(D,U),()=>r(D)),I(E),I(l),I(C);var q=g(C,2),ae=G(q),Q=g(ae,2);return I(q),I(H),I(W),I(M),Et(M,U=>f($,U),()=>r($)),A(()=>{var U;pt(H,"default-colors",e().isDark),V(B,i()),pt(S,"invert",e().isDark),V(_,`${(U=d())!=null?U:""}:`),pt(z,"nightMode",e().isDark)}),er(z,()=>r(n),U=>f(n,U)),xe("submit",l,eu(y)),xe("click",ae,o),xe("click",Q,y),v(s,M),qe(t,"modalKey",h),we({modalKey:h})}var Cd=Z('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),wd=Z('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function _d(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(u,"$configList",a),n=x(),i=x();let d=N(t,"state",8);const u=d().configList,c=Ts(),h=()=>c("presetchange");function p(C){const l=Mo({decks:C.useCount});return`${C.name} (${l})`}function $(C){d().setCurrentIndex(C.detail.value),h()}function m(C){const l=C.trim();l.length&&(d().addConfig(l),h())}function D(C){const l=C.trim();l.length&&(d().cloneConfig(l),h())}function y(C){d().setCurrentName(C)}const o=Ar(Js);let k=x(),P=x(""),T=x(""),O=x(cd);function M(){f(T,Es()),f(O,m),f(P,""),o.get(r(k)).show()}function W(){f(T,Ls()),f(O,D),f(P,d().getCurrentName()),o.get(r(k)).show()}function H(){f(T,Ms()),f(O,y),f(P,d().getCurrentName()),o.get(r(k)).show()}ne(()=>e(),()=>{f(n,e().findIndex(C=>C.current))}),ne(()=>(e(),r(n)),()=>{f(i,p(e()[r(n)]))}),ze(),_e();var L=wd(),R=oe(L),B=fe(()=>No());yd(R,{get title(){return r(T)},get prompt(){return r(B)},get initialValue(){return r(P)},get onOk(){return r(O)},get modalKey(){return r(k)},set modalKey(C){f(k,C)},$$legacy:!0});var S=g(R,2);Ge(S,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),ru(S.lastChild,{breakpoint:"sm",children:(C,l)=>{var E=Cd(),F=G(E);ra(F,{class:"flex-grow-1 mr1",get label(){return r(i)},get list(){return e()},parser:z=>({content:p(z),value:z.idx}),get value(){return r(n)},set value(z){f(n,z)},$$events:{change:$},$$legacy:!0});var _=g(F,2);md(_,{get state(){return d()},$$events:{add:M,clone:W,rename:H,remove:h}}),I(E),v(C,E)},$$slots:{default:!0}}),I(S),v(s,L),we()}var kd=Z('<li class="svelte-11xpnuy"><button class="svelte-11xpnuy"> </button></li>'),Pd=Z('<ul class="svelte-11xpnuy"></ul>');function Ps(s,t){Ce(t,!1);let a=N(t,"tabs",8),e=N(t,"value",12),n=x(i());function i(){const h=a().slice().reverse().findIndex(p=>p.value!==null);return h===-1?0:a().length-h-1}function d(h){for(const[p,$]of a().entries())h===p?$.enable(e()):h>p?$.reset():$.disable()}const u=h=>()=>f(n,h);ne(()=>r(n),()=>{d(r(n))}),ne(()=>(We(a()),r(n)),()=>{var h;e((h=a()[r(n)].value)!=null?h:0)}),ne(()=>(We(a()),r(n),We(e())),()=>{a()[r(n)].setValue(e())}),ze(),_e();var c=Pd();Xt(c,5,a,cr,(h,p,$)=>{var m=kd(),D=G(m),y=Zn(()=>u($)),o=G(D,!0);I(D),I(m),A(()=>{pt(m,"active",r(n)===$),V(o,r(p).title)}),xe("click",D,function(...k){var P;(P=r(y))==null||P.apply(this,k)}),v(h,m)}),I(c),v(s,c),we()}var bd=Z("<!> <!> <!> <!> <!>",1);function xd(s,t){var F,_,z,q,ae,Q;Ce(t,!1);const a=Ie(),e=()=>ge($,"$config",a),n=()=>ge(m,"$limits",a),i=()=>ge(y,"$newCardsIgnoreReviewLimit",a),d=()=>ge(o,"$applyAllParentLimits",a),u=x();let c=N(t,"state",8),h=N(t,"api",8);function p(){It(M,r(M)[0]=new mt(ir(),e().newPerDay,U=>J($,w(e).newPerDay=U,w(e)),e().newPerDay,null)),It(W,r(W)[0]=new mt(ir(),e().reviewsPerDay,U=>J($,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null))}const $=c().currentConfig,m=c().deckLimits,D=c().defaults,y=c().newCardsIgnoreReviewLimit,o=c().applyAllParentLimits,k=`

`+Fo()+`

`+Vo(),P=`

`+Ho()+k,T=Sr()+`

`+zo(),O=Sr()+`

`+Bo(),M=x([new mt(ir(),e().newPerDay,U=>J($,w(e).newPerDay=U,w(e)),e().newPerDay,null),new mt(as(),(F=n().new)!=null?F:null,U=>J(m,w(n).new=U!=null?U:void 0,w(n)),null,null),new mt(os(),n().newTodayActive&&(_=n().newToday)!=null?_:null,U=>J(m,w(n).newToday=U!=null?U:void 0,w(n)),null,(z=n().newToday)!=null?z:null)]),W=x([new mt(ir(),e().reviewsPerDay,U=>J($,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null),new mt(as(),(q=n().review)!=null?q:null,U=>J(m,w(n).review=U!=null?U:void 0,w(n)),null,null),new mt(os(),n().reviewTodayActive&&(ae=n().reviewToday)!=null?ae:null,U=>J(m,w(n).reviewToday=U!=null?U:void 0,w(n)),null,(Q=n().reviewToday)!=null?Q:null)]);let H=x(0),L=x(0);const R={newLimit:{title:Ns(),help:Wo()+k,url:ye.DeckOptions.newCardsday},reviewLimit:{title:Fs(),help:Go()+P,url:ye.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Vs(),help:T,url:ye.DeckOptions.newCardsday},applyAllParentLimits:{title:jo(),help:O,url:ye.DeckOptions.newCardsday}},B=Object.values(R);let S=x(),C=x();function l(U){r(S).show(),r(C).to(U)}ne(()=>(r(H),r(L),ut),()=>{f(u,Math.min(9999,r(H)*10)>r(L)?qo({cards:r(H),expected:Math.min(9999,r(H)*10)}):"")}),ze(),_e();var E=fe(()=>is());return st(s,{get title(){return r(E)},children:(U,ue)=>{it(U,{slotHost:K,get api(){return h()},children:(ke,de)=>{var Pe=bd(),Se=oe(Pe);K(Se,{children:(me,Ee)=>{Ke(me,{get defaultValue(){return D.newPerDay},get value(){return r(H)},set value(se){f(H,se)},children:(se,Le)=>{ee(se,{$$events:{click:()=>l(Object.keys(R).indexOf("newLimit"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,R.newLimit.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,Le)=>{Ps(se,{slot:"tabs",get tabs(){return r(M)},get value(){return r(H)},set value(pe){f(H,pe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var ce=g(Se,2);K(ce,{children:(me,Ee)=>{Ke(me,{get defaultValue(){return D.reviewsPerDay},get value(){return r(L)},set value(se){f(L,se)},children:(se,Le)=>{ee(se,{$$events:{click:()=>l(Object.keys(R).indexOf("reviewLimit"))},children:(pe,Xe)=>{te();var be=Y();A(()=>V(be,R.reviewLimit.title)),v(pe,be)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,Le)=>{Ps(se,{slot:"tabs",get tabs(){return r(W)},get value(){return r(L)},set value(pe){f(L,pe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var he=g(ce,2);K(he,{children:(me,Ee)=>{He(me,{get warning(){return r(u)}})},$$slots:{default:!0}});var Re=g(he,2);K(Re,{children:(me,Ee)=>{je(me,{defaultValue:!1,get value(){return _t(),i()},set value(se){ct(y,se)},children:(se,Le)=>{ee(se,{$$events:{click:()=>l(Object.keys(R).indexOf("newCardsIgnoreReviewLimit"))},children:(pe,Xe)=>{kt(pe,{get title(){return R.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Me=g(Re,2);K(Me,{children:(me,Ee)=>{je(me,{defaultValue:!1,get value(){return _t(),d()},set value(se){ct(o,se)},children:(se,Le)=>{ee(se,{$$events:{click:()=>l(Object.keys(R).indexOf("applyAllParentLimits"))},children:(pe,Xe)=>{kt(pe,{get title(){return R.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(ke,Pe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(U,ue)=>{var ke=fe(()=>is());dt(U,{get title(){return r(ke)},get url(){return ye.DeckOptions.dailyLimits},slot:"tooltip",helpSections:B,$$events:{mount:de=>{f(S,de.detail.modal),f(C,de.detail.carousel)}}})}}}),qe(t,"onPresetChange",p),we({onPresetChange:p})}var Sd=Z("<!> <!> <!> <!> <!>",1);function Od(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(u,"$config",a),n=()=>ge(h,"$fsrs",a);let i=N(t,"state",8),d=N(t,"api",8);const u=i().currentConfig,c=i().defaults,h=i().fsrs,p=`

`+Uo();let $=x([]);const m={newGatherPriority:{title:Qo(),help:Yo()+p},newCardSortOrder:{title:Ko(),help:Xo()+p},newReviewPriority:{title:Zo(),help:Jo()+p},interdayStepPriority:{title:ei(),help:ti()+p},reviewSortOrder:{title:Hs(),help:ri()+p}},D=Object.values(m);let y=x(),o=x();function k(T){r(y).show(),r(o).to(T)}ne(()=>(e(),r($),vt),()=>{switch(e().newCardGatherPriority){case vt.RANDOM_NOTES:f($,[nt.TEMPLATE_THEN_RANDOM,nt.RANDOM_NOTE_THEN_TEMPLATE]);break;case vt.RANDOM_CARDS:f($,[nt.TEMPLATE_THEN_RANDOM,nt.RANDOM_NOTE_THEN_TEMPLATE,nt.RANDOM_CARD]);break;default:f($,[]);break}r($).includes(e().newCardSortOrder)&&J(u,w(e).newCardSortOrder=0,w(e)),e().newCardSortOrder in nt||J(u,w(e).newCardSortOrder=0,w(e))}),ze(),_e();var P=fe(()=>ls());st(s,{get title(){return r(P)},children:(T,O)=>{it(T,{slotHost:K,get api(){return d()},children:(M,W)=>{var H=Sd(),L=oe(H);K(L,{children:(l,E)=>{var F=fe(Zc);at(l,{get defaultValue(){return c.newCardGatherPriority},get choices(){return r(F)},get value(){return e().newCardGatherPriority},set value(_){J(u,w(e).newCardGatherPriority=_,w(e))},children:(_,z)=>{ee(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newGatherPriority"))},children:(q,ae)=>{te();var Q=Y();A(()=>V(Q,m.newGatherPriority.title)),v(q,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var R=g(L,2);K(R,{children:(l,E)=>{var F=fe(Jc);at(l,{get defaultValue(){return c.newCardSortOrder},get choices(){return r(F)},get disabledChoices(){return r($)},get value(){return e().newCardSortOrder},set value(_){J(u,w(e).newCardSortOrder=_,w(e))},children:(_,z)=>{ee(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newCardSortOrder"))},children:(q,ae)=>{te();var Q=Y();A(()=>V(Q,m.newCardSortOrder.title)),v(q,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=g(R,2);K(B,{children:(l,E)=>{var F=fe(_s);at(l,{get defaultValue(){return c.newMix},get choices(){return r(F)},get value(){return e().newMix},set value(_){J(u,w(e).newMix=_,w(e))},children:(_,z)=>{ee(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newReviewPriority"))},children:(q,ae)=>{te();var Q=Y();A(()=>V(Q,m.newReviewPriority.title)),v(q,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=g(B,2);K(S,{children:(l,E)=>{var F=fe(_s);at(l,{get defaultValue(){return c.interdayLearningMix},get choices(){return r(F)},get value(){return e().interdayLearningMix},set value(_){J(u,w(e).interdayLearningMix=_,w(e))},children:(_,z)=>{ee(_,{$$events:{click:()=>k(Object.keys(m).indexOf("interdayStepPriority"))},children:(q,ae)=>{te();var Q=Y();A(()=>V(Q,m.interdayStepPriority.title)),v(q,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var C=g(S,2);K(C,{children:(l,E)=>{var F=fe(()=>on(n()));at(l,{get defaultValue(){return c.reviewOrder},get choices(){return r(F)},get value(){return e().reviewOrder},set value(_){J(u,w(e).reviewOrder=_,w(e))},children:(_,z)=>{ee(_,{$$events:{click:()=>k(Object.keys(m).indexOf("reviewSortOrder"))},children:(q,ae)=>{te();var Q=Y();A(()=>V(Q,m.reviewSortOrder.title)),v(q,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(M,H)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(T,O)=>{var M=fe(()=>ls());dt(T,{get title(){return r(M)},get url(){return ye.DeckOptions.displayOrder},slot:"tooltip",helpSections:D,$$events:{mount:W=>{f(y,W.detail.modal),f(o,W.detail.carousel)}}})}}}),we()}var Rd=Z('<textarea class="w-100 svelte-29jwoy"></textarea>');function Td(s,t){Ce(t,!1);let a=N(t,"value",12),e=N(t,"defaults",8),n=x(),i=x();function d(){r(i)&&(It(i,r(i).style.height="auto"),It(i,r(i).style.height=`${r(i).scrollHeight+2}px`))}function u($){return $.map(m=>m.toFixed(4)).join(", ")}const c=[0,17,19,21];function h($){const m=$.target,D=m.value.replace(/ /g,"").split(",").filter(y=>y).map(y=>Number(y));c.includes(D.length)?a(D):(alert(si()),m.value=r(n))}ne(()=>(We(a()),wt),()=>{f(n,u(a())),wt().then(d)}),ze(),_e();var p=Rd();xe("resize",Jn,d),Rs(p),A(()=>Ze(p,"placeholder",u(e()))),Et(p,$=>f(i,$),()=>r(i)),A(()=>Er(p,r(n))),xe("blur",p,h),v(s,p),we()}var Ad=Z("<!> <!>",1);function Dd(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"defaults",8);var i=Ad(),d=oe(i);yt(d,t,"default",{});var u=g(d,2);Pt(u,{children:(c,h)=>{Td(c,{get defaults(){return n()},get value(){return a()},set value(p){a(p)},$$legacy:!0})},$$slots:{default:!0,revert:(c,h)=>{Jt(c,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(p){a(p)},$$legacy:!0})}}}),v(s,i)}var Id=Z('<input type="text" class="w-100 mb-1">');function Ed(s,t){let a=N(t,"value",12),e=N(t,"placeholder",8);Pt(s,{children:(n,i)=>{var d=Id();$t(d),A(()=>Ze(d,"placeholder",e())),er(d,a),v(n,d)},$$slots:{default:!0}})}var Ye=(s=>(s[s.time=0]="time",s[s.count=1]="count",s[s.memorized=2]="memorized",s))(Ye||{});function Pr(s,t,a,e){const n=gs(s);if(n.selectAll(".lines").remove(),n.selectAll(".hover-columns").remove(),n.selectAll(".focus-line").remove(),n.selectAll(".legend").remove(),a.length==0)return vs(n,!1),[];const i=n.transition().duration(600),d=new Date,u=a.map(l=>({...l,date:new Date(d.getTime()+l.x*24*60*60*1e3)})),c=d,h=$s(u,l=>l.date),p=xu().domain([c,h]).range([t.marginLeft,t.width-t.marginRight]);n.select(".x-ticks").call(l=>l.transition(i).call(ou(p).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const $=l=>e==0?wr(l,!0):l.toString(),m={1:u.map(l=>({...l,y:l.count})),0:u.map(l=>({...l,y:l.timeCost})),2:u.map(l=>({...l,y:l.memorized}))}[e],D=$s(m,l=>l.y),y=iu().range([t.height-t.marginBottom,t.marginTop]).domain([0,D]).nice();n.select(".y-ticks").call(l=>l.transition(i).call(lu(y).ticks(t.height/50).tickSizeOuter(0).tickFormat($))).attr("direction","ltr"),n.select(".y-ticks .y-axis-title").remove(),n.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const o=m.map(l=>[p(l.date),y(l.y),l.label]),k=Iu(o,l=>Object.assign(l,{z:l[0][2]}),l=>l[2]),P=Lu;n.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(k.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(l,E)=>P[E%P.length]).attr("d",l=>uu()(l[1].map(E=>[E[0],E[1]]))).attr("data-group",l=>l[0]);const T=n.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),O=Array.from(k.values()).reduce((l,E)=>l.length>E.length?l:E),M=t.width/O.length;n.append("g").attr("class","hover-columns").selectAll("rect").data(O).join("rect").attr("x",l=>l[0]-M/2).attr("y",t.marginTop).attr("width",M).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",H).on("mouseout",()=>{T.style("opacity",0),hs()});const W={0:wr,1:l=>zs({reviews:Math.round(l)}),2:l=>oi({memorized:Math.round(l).toFixed(0)})}[e];function H(l,E){cu(l,document.body);const F=p.invert(E[0]),_={};k.forEach((ae,Q)=>{const U=du(de=>p.invert(de[0])).left,ue=U(ae,F),ke=ae[ue];ke&&(_[Q]=y.invert(ke[1]))}),T.attr("x1",E[0]).attr("x2",E[0]).style("opacity",1);const z=+((F.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let q=`Date: ${Un(F)}<br>In ${z} Days<br>`;for(const[ae,Q]of Object.entries(_))n.select(`path[data-group="${ae}"]`).classed("hidden")||(q+=`<span style="color:${P[(parseInt(ae)-1)%P.length]}">■</span> #${ae}: ${W(Q)}<br>`);ms(q,l.pageX,l.pageY)}const L=n.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(k.keys())).join("g").attr("transform",(l,E)=>`translate(0,${E*20})`).attr("cursor","pointer").on("click",(l,E)=>S(l,E)).on("mousemove",B).on("mouseout",hs),R={1:ii,0:({count:l})=>wr(l),2:li}[e];function B(l,E){const F=m.filter(q=>q.label==E),_=e==2?F[F.length-1].memorized-F[0].memorized:dc(F,q=>q.y),z=_/((F==null?void 0:F.length)||1);ms(`#${E}:<br/>
                ${ni()}: ${R({count:z})}<br/>
                ${ai()}: ${W(_)}`,l.pageX,l.pageY)}L.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(l,E)=>P[E%P.length]),L.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(l=>`#${l}`);const S=(l,E)=>{const F=E,_=n.select(`path[data-group="${F}"]`),z=_.classed("hidden"),q=l.currentTarget;_.classed("hidden",!z),_.style("display",()=>z?null:"none"),gs(q).select("rect").style("opacity",z?1:.5)};return vs(n,!0),[]}var Ld=Z('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"></td></tr>'),Md=Z('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function ln(s,t){Ce(t,!1);const a=[ui(),ci(),di(),fi(),gi(),vi(),$i()];let e=N(t,"values",28,()=>[0,0,0,0,0,0,0]);_e(),K(s,{children:(n,i)=>{var d=Md(),u=G(d),c=G(u),h=G(c),p=g(G(h)),$=G(p),m=G($,!0);A(()=>V(m,hi())),I($),I(p);var D=g(p),y=G(D),o=G(y,!0);A(()=>V(o,mi())),I(y),I(D);var k=g(D),P=G(k),T=G(P,!0);A(()=>V(T,pi())),I(P),I(k),I(h),I(c);var O=g(c);Xt(O,5,()=>a,cr,(M,W,H)=>{var L=Ld(),R=G(L),B=G(R,!0);I(R);var S=g(R),C=G(S);$t(C),Ze(C,"step",.5),Ze(C,"max",1),Ze(C,"min",0),I(S),I(L),A(()=>V(B,r(W))),er(C,()=>e()[H],l=>e(e()[H]=l,!0)),v(M,L)}),I(O),I(u),I(d),v(n,d)},$$slots:{default:!0}}),we()}var Nd=Z(" <!>",1),Fd=Z("<div> </div>"),Vd=Z('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label>',1),Hd=Z('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),zd=Z('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!> <!> <!> <!></details> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Bd(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(W,"$config",a),n=()=>ge(B,"$fsrs",a),i=()=>ge(F,"$newCardsIgnoreReviewLimit",a),d=x(),u=x(),c=x(),h=x(),p=x(),$=x(),m=[];let D=N(t,"shown",12,!1),y=N(t,"state",8),o=N(t,"simulateFsrsRequest",12),k=N(t,"computing",8),P=N(t,"openHelpModal",8),T=N(t,"onPresetChange",8),O=x(ks),M=x(r(O));const W=y().currentConfig;let H=x(Ye.count),L=x([]),R=x(!1);const B=y().fsrs,S=mu();let C=x(null),l=0,E=x([]);const F=y().newCardsIgnoreReviewLimit;let _=x(!0),z=x(e().leechAction==Dt.SUSPEND),q=x(e().leechThreshold),ae=x(null),Q=x(!1),U=x(void 0);function ue(b,X){const re=[];for(let le=0;le<b.length;le++){let ie=0,Oe=0;for(let De=Math.max(0,le-X+1);De<=le;De++)ie+=b[De],Oe++;re.push(ie/Oe)}return re}function ke(b,X){return b.map((re,le)=>re+X[le])}function de(b){return b?Di({num:b.toFixed(2)}):""}function Pe(){o(o().daysToSimulate=r(d),!0),o(o().deckSize=r(u),!0),o(o().suspendAfterLapseCount=r(z)?r(q):void 0,!0),o(o().easyDaysPercentages=r($),!0)}function Se(b){return b?Ii({count:b.current}):""}async function ce(){let b;Pe();try{await Rr(async()=>{f(Q,!0),b=await Dn(o())},X=>{X.value.case==="computeRetention"&&f(U,X.value.value)})}finally{f(Q,!1),b&&f(ae,b.optimalRetention)}}async function he(){let b;Pe();try{await Rr(async()=>{f(R,!0),b=await In(o())},()=>{})}finally{if(f(R,!1),b){l+=1;const X=ke(b.dailyReviewCount,b.dailyNewCount),re=b.accumulatedKnowledgeAcquisition;f(E,r(E).concat(b.dailyTimeCost.map((le,ie)=>({x:ie,timeCost:le,count:X[ie],memorized:re[ie],label:l})))),f(L,Pr(r(C),S,r(E),r(H)))}}}function Re(){f(E,r(E).filter(b=>b.label!==l)),l=Math.max(0,l-1),f(L,Pr(r(C),S,r(E),r(H)))}ne(()=>(We(o()),r(O),r(M),Xr),()=>{var b;if((b=o())!=null&&b.target&&r(O)!==r(M)){switch(r(O)){case"memorized":o(o().target.kind={case:"memorized",value:new xr({lossAversion:1.6})},!0);break;case"stability":o(o().target.kind={case:"stability",value:new Ln({})},!0);break;case"futureMemorized":o(o().target.kind={case:"futureMemorized",value:new En({days:365})},!0);break;case"averageFutureMemorized":o(o().target.kind={case:"averageFutureMemorized",value:new Xr({days:365})},!0);break}f(M,r(O))}}),ne(()=>{},()=>{f(d,365)}),ne(()=>{},()=>{f(u,0)}),ne(()=>r(d),()=>{f(c,Math.ceil(r(d)/365))}),ne(()=>(r(R),r(Q)),()=>{f(h,r(R)||r(Q))}),ne(()=>r(U),()=>{f(p,Se(r(U)))}),ne(()=>(r(C),r(E),r(_),r(c),r(H)),()=>{if(r(C)){let b=r(E);if(r(_)){const X=r(E).reduce((re,le)=>(re[le.label]=re[le.label]||[],re[le.label].push(le),re),{});b=Object.values(X).flatMap(re=>{const le=ue(re.map(De=>De.timeCost),r(c)),ie=ue(re.map(De=>De.count),r(c)),Oe=ue(re.map(De=>De.memorized),r(c));return re.map((De,gt)=>({...De,timeCost:le[gt],count:ie[gt],memorized:Oe[gt]}))})}f(L,Pr(r(C),S,b,r(H)))}}),ne(()=>e(),()=>{f($,[...e().easyDaysPercentages])}),ze(),_e();var Me=zd(),me=G(Me),Ee=G(me),se=G(Ee),Le=G(se),pe=G(Le,!0);A(()=>V(pe,Bs())),I(Le);var Xe=g(Le,2);I(se);var be=g(se,2),Lt=G(be);Ke(Lt,{defaultValue:365,min:1,max:3650,get value(){return r(d)},set value(b){f(d,b)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,yi())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Mt=g(Lt,2);Ke(Mt,{defaultValue:0,min:0,max:1e5,get value(){return r(u)},set value(b){f(u,b)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Ci())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=g(Mt,2);rt(Nt,{get defaultValue(){return e().desiredRetention},min:.7,max:.99,percentage:!0,get value(){return o().desiredRetention},set value(b){o(o().desiredRetention=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("desiredRetention")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Lr())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=g(Nt,2);Ke(Ft,{get defaultValue(){return e().newPerDay},min:0,max:9999,get value(){return o().newLimit},set value(b){o(o().newLimit=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Ns())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var tr=g(Ft,2);Ke(tr,{get defaultValue(){return e().reviewsPerDay},min:0,max:9999,get value(){return o().reviewLimit},set value(b){o(o().reviewLimit=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Fs())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var bt=g(tr,2),lt=G(bt),fr=G(lt,!0);A(()=>V(fr,Ws())),I(lt);var gr=g(lt,2);au(gr,()=>r($),b=>{ln(b,{get values(){return r($)},set values(X){f($,X)},$$legacy:!0})}),I(bt);var Vt=g(bt,2),xt=G(Vt),rr=G(xt,!0);A(()=>V(rr,wi())),I(xt);var sr=g(xt,2);Ke(sr,{get defaultValue(){return e().maximumReviewInterval},min:1,max:36500,get value(){return o().maxInterval},set value(b){o(o().maxInterval=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Ds())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var nr=g(sr,2),vr=fe(()=>on(n()));at(nr,{get defaultValue(){return e().reviewOrder},get choices(){return r(vr)},get value(){return o().reviewOrder},set value(b){o(o().reviewOrder=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,Hs())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var St=g(nr,2);je(St,{get defaultValue(){return i()},get value(){return o().newCardsIgnoreReviewLimit},set value(b){o(o().newCardsIgnoreReviewLimit=b,!0)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{var ie=fe(()=>Vs());kt(re,{get title(){return r(ie)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ht=g(St,2);je(Ht,{defaultValue:!0,get value(){return r(_)},set value(b){f(_,b)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,_i())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ot=g(Ht,2),$r=fe(()=>e().leechAction==Dt.SUSPEND);je(Ot,{get defaultValue(){return r($r)},get value(){return r(z)},set value(b){f(z,b)},children:(b,X)=>{ee(b,{$$events:{click:()=>P()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();A(()=>V(ie,ki())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var zt=g(Ot,2);{var Bt=b=>{Ke(b,{get defaultValue(){return e().leechThreshold},min:1,max:9999,get value(){return r(q)},set value(X){f(q,X)},children:(X,re)=>{ee(X,{$$events:{click:()=>P()("simulateFsrsReview")},children:(le,ie)=>{te();var Oe=Y();A(()=>V(Oe,Gs())),v(le,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(zt,b=>{r(z)&&b(Bt)})}I(Vt);var Wt=g(Vt,2),Gt=G(Wt),j=G(Gt,!0);A(()=>V(j,js())),I(Gt);var ve=g(Gt,2),Be=G(ve);{var et=b=>{var X=Y();A(()=>V(X,qs())),v(b,X)},Ae=b=>{var X=Y();A(()=>V(X,Pi())),v(b,X)};Te(Be,b=>{r(Q)?b(et):b(Ae,!1)})}I(ve);var ht=g(ve,2);{var ft=b=>{var X=Nd(),re=oe(X);A(()=>{var Oe;return V(re,`${(Oe=de(r(ae)))!=null?Oe:""} `)});var le=g(re);{var ie=Oe=>{var De=fe(()=>Ei());He(Oe,{get warning(){return r(De)},className:"alert-warning"})};Te(le,Oe=>{r(ae)-e().desiredRetention>=.01&&Oe(ie)})}v(b,X)};Te(ht,b=>{r(ae)&&b(ft)})}var ar=g(ht,2);{var cn=b=>{var X=Fd(),re=G(X,!0);I(X),A(()=>V(re,r(p))),v(b,X)};Te(ar,b=>{r(Q)&&b(cn)})}var Hr=g(ar,2);K(Hr,{children:(b,X)=>{var re=fe(nd);at(b,{get choices(){return r(re)},defaultValue:ks,get value(){return r(O)},set value(le){f(O,le)},children:(le,ie)=>{ee(le,{children:(Oe,De)=>{te();var gt=Y();gt.nodeValue="Target: ",v(Oe,gt)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var zr=g(Hr,2);{var dn=b=>{rt(b,{defaultValue:1.6,get value(){return o().target.kind.value.lossAversion},set value(X){o(o().target.kind.value.lossAversion=X,!0)},children:(X,re)=>{ee(X,{children:(le,ie)=>{te();var Oe=Y();Oe.nodeValue="Fail Cost Multiplier: ",v(le,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(zr,b=>{var X;((X=o().target)==null?void 0:X.kind.case)==="memorized"&&b(dn)})}var fn=g(zr,2);{var gn=b=>{rt(b,{defaultValue:365,step:1,get value(){return o().target.kind.value.days},set value(X){o(o().target.kind.value.days=X,!0)},children:(X,re)=>{ee(X,{children:(le,ie)=>{te();var Oe=Y();Oe.nodeValue="Days after simulation end: ",v(le,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(fn,b=>{var X,re;(((X=o().target)==null?void 0:X.kind.case)==="futureMemorized"||((re=o().target)==null?void 0:re.kind.case)==="averageFutureMemorized")&&b(gn)})}I(Wt);var Rt=g(Wt,2),vn=G(Rt,!0);A(()=>V(vn,bi())),I(Rt);var Tt=g(Rt,2),$n=G(Tt,!0);A(()=>V($n,xi())),I(Tt);var At=g(Tt,2),hn=G(At,!0);A(()=>V(hn,Si())),I(At);var Br=g(At,2);{var mn=b=>{var X=Y();A(()=>V(X,Oi())),v(b,X)};Te(Br,b=>{r(h)&&b(mn)})}var pn=g(Br,2);fu(pn,{children:(b,X)=>{var re=Hd(),le=oe(re),ie=G(le);gu(ie,{children:(hr,Cf)=>{var jr=Vd(),mr=oe(jr),jt=G(mr);$t(jt);var qr,wn=g(jt);A(()=>{var Qe;return V(wn,` ${(Qe=Ri())!=null?Qe:""}`)}),I(mr);var pr=g(mr,2),qt=G(pr);$t(qt);var Ur,_n=g(qt);A(()=>{var Qe;return V(_n,` ${(Qe=Ti())!=null?Qe:""}`)}),I(pr);var Qr=g(pr,2),Ut=G(Qr);$t(Ut);var Yr,kn=g(Ut);A(()=>{var Qe;return V(kn,` ${(Qe=Ai())!=null?Qe:""}`)}),I(Qr),A(()=>{qr!==(qr=Ye.count)&&(jt.value=(jt.__value=Ye.count)==null?"":Ye.count),Ur!==(Ur=Ye.time)&&(qt.value=(qt.__value=Ye.time)==null?"":Ye.time),Yr!==(Yr=Ye.memorized)&&(Ut.value=(Ut.__value=Ye.memorized)==null?"":Ye.memorized)}),Cr(m,[],jt,()=>(Ye.count,r(H)),Qe=>f(H,Qe)),Cr(m,[],qt,()=>(Ye.time,r(H)),Qe=>f(H,Qe)),Cr(m,[],Ut,()=>(Ye.memorized,r(H)),Qe=>f(H,Qe)),v(hr,jr)},$$slots:{default:!0}}),I(le);var Oe=g(le,2),De=G(Oe),gt=G(De);wu(gt);var Wr=g(gt);vu(Wr);var Gr=g(Wr);$u(Gr,{bounds:S});var yn=g(Gr);hu(yn,{bounds:S}),I(De),Et(De,hr=>f(C,hr),()=>r(C)),I(Oe);var Cn=g(Oe,2);_u(Cn,{get tableData(){return r(L)}}),A(()=>Ze(De,"viewBox",`0 0 ${S.width} ${S.height}`)),v(b,re)},$$slots:{default:!0}}),I(be),I(Ee),I(me),I(Me),A(()=>{var b,X,re,le;pt(Me,"show",D()),pt(Me,"d-block",D()),Kt(ve,`btn ${(b=r(Q)?"btn-warning":"btn-primary")!=null?b:""} svelte-18vh0ci`),ve.disabled=!r(Q)&&k(),Kt(Rt,`btn ${(X=k()?"btn-warning":"btn-primary")!=null?X:""} svelte-18vh0ci`),Rt.disabled=k(),Kt(Tt,`btn ${(re=k()?"btn-warning":"btn-primary")!=null?re:""} svelte-18vh0ci`),Tt.disabled=k(),Kt(At,`btn ${(le=k()?"btn-warning":"btn-primary")!=null?le:""} svelte-18vh0ci`),At.disabled=k()}),xe("click",Xe,()=>D(!1)),xe("click",ve,()=>ce()),xe("click",Rt,he),xe("click",Tt,Re),xe("click",At,()=>{J(W,w(e).newPerDay=o().newLimit,w(e)),J(W,w(e).reviewsPerDay=o().reviewLimit,w(e)),J(W,w(e).maximumReviewInterval=o().maxInterval,w(e)),J(W,w(e).desiredRetention=o().desiredRetention,w(e)),ct(F,o().newCardsIgnoreReviewLimit),J(W,w(e).reviewOrder=o().reviewOrder,w(e)),J(W,w(e).leechAction=r(z)?Dt.SUSPEND:Dt.TAG_ONLY,w(e)),J(W,w(e).leechThreshold=r(q),w(e)),J(W,w(e).easyDaysPercentages=[...r($)],w(e)),T()()}),v(s,Me),we()}var Wd=Z('<!> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!>',1);function Gd(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(S,"$daysSinceLastOptimization",a),n=()=>ge(L,"$config",a),i=()=>ge(r(o),"$newCardsIgnoreReviewLimit",a),d=()=>ge(ae,"$healthCheck",a),u=()=>ge(B,"$fsrsReschedule",a),c=x(),h=x(),p=x(),$=x(),m=x(),D=x(),y=x(),o=x(),k=x(),P=x(),T=x();let O=N(t,"state",8),M=N(t,"openHelpModal",8),W=N(t,"onPresetChange",8),H=N(t,"newlyEnabled",8,!1);const L=O().currentConfig,R=O().defaults,B=O().fsrsReschedule,S=O().daysSinceLastOptimization;let C=x(!1),l=x(!1),E=x(!1);const F=n().desiredRetention.toFixed(2);let _=x(),z=x(!1),q=x(!1);const ae=O().fsrsHealthCheck;let Q=x(void 0);const U=100;let ue=x("");const ke=.8,de=.95;function Pe(j){return j<ke?Wi():j>de?Gi():""}async function Se(j,ve){if(+F==r(m)){f(ue,ji());return}const Be=new Hn({w:ve,search:r($),before:+F,after:j}),et=await zn(Be);f(ue,qi({factor:et.factor.toFixed(2),previousDr:(+F*100).toString()}))}function ce(j){return j<.7||j>.97?"alert-danger":j<ke||j>de?"alert-warning":"alert-info"}function he(){return BigInt(n().ignoreRevlogsBeforeDate?new Date(n().ignoreRevlogsBeforeDate).getTime():0)}async function Re(){if(r(z)){await Mn({});return}if(O().presetAssignmentsChanged()){alert(Li());return}f(z,!0),f(_,void 0);try{await Rr(async()=>{const j=_r(n()),ve=n().relearnSteps;let Be=0,et=0;for(let ft=0;ft<ve.length&&(et+=ve[ft],!(et>=1440));ft++)Be++;const Ae=await Nn({search:n().paramSearch?n().paramSearch:r($),ignoreRevlogsBeforeMs:he(),currentParams:j,numOfRelearningSteps:Be,healthCheck:d()}),ht=j.length&&j.every((ft,ar)=>ft.toFixed(4)===Ae.params[ar].toFixed(4))||Ae.params.length===0;if(Ae.healthCheckPassed!==void 0)Ae.healthCheckPassed?setTimeout(()=>alert(Mi()),200):setTimeout(()=>alert(Ni()),200);else if(ht){const ft=Ae.fsrsItems?Fi():Vi();setTimeout(()=>alert(ft),200)}ht||(J(L,w(n).fsrsParams6=Ae.params,w(n)),setTimeout(()=>{f(E,!0)},201)),r(_)&&It(_,r(_).current=r(_).total)},j=>{j.value.case==="computeParams"&&f(_,j.value.value)})}finally{f(z,!1)}}function Me(j){if(!j||!j.total)return"";const ve=(j.current/j.total*100).toFixed(1);return j instanceof Bn?`${ve}%`:j.current===j.total?Ui():Qi({pct:ve,reviews:j.reviews})}async function me(){await Vr(),O().save(lr.COMPUTE_ALL_PARAMS)}let Ee=x(!1);ne(()=>(e(),ut),()=>{f(c,e()>30?Hi():"")}),ne(()=>r(C),()=>{r(C)&&f(l,!0)}),ne(()=>(We(H()),r(l),r(E)),()=>{f(h,H()||r(l)||r(E))}),ne(()=>(r(z),r(q)),()=>{f(p,r(z)||r(q))}),ne(()=>We(O()),()=>{f($,`preset:"${O().getCurrentNameForSearch()}" -is:suspended`)}),ne(()=>n(),()=>{f(m,Number(n().desiredRetention.toFixed(2)))}),ne(()=>r(m),()=>{f(D,Pe(r(m)))}),ne(()=>(r(Q),r(h),r(m),n()),()=>{clearTimeout(r(Q)),r(h)?f(Q,setTimeout(()=>{Se(r(m),_r(n()))},U)):f(ue,"")}),ne(()=>r(m),()=>{f(y,ce(r(m)))}),ne(()=>We(O()),()=>{Ll(f(o,O().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ne(()=>(n(),We(O()),i(),xr),()=>{f(k,new Fn({params:_r(n()),desiredRetention:n().desiredRetention,newLimit:n().newPerDay,reviewLimit:n().reviewsPerDay,maxInterval:n().maximumReviewInterval,search:`preset:"${O().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:i(),easyDaysPercentages:n().easyDaysPercentages,reviewOrder:n().reviewOrder,target:new Vn({kind:{case:"memorized",value:new xr({lossAversion:1.6})}})}))}),ne(()=>r(_),()=>{f(P,Me(r(_)))}),ne(()=>r(_),()=>{var j,ve;f(T,(ve=(j=r(_))==null?void 0:j.reviews)!=null?ve:void 0)}),ze(),_e();var se=Wd(),Le=oe(se);rt(Le,{get defaultValue(){return R.desiredRetention},min:.7,max:.99,percentage:!0,get value(){return n().desiredRetention},set value(j){J(L,w(n).desiredRetention=j,w(n))},get focused(){return r(C)},set focused(j){f(C,j)},children:(j,ve)=>{ee(j,{$$events:{click:()=>M()("desiredRetention")},children:(Be,et)=>{te();var Ae=Y();A(()=>V(Ae,Lr())),v(Be,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var pe=g(Le,2);He(pe,{get warning(){return r(ue)},className:"alert-info two-line"});var Xe=g(pe,2);He(Xe,{get warning(){return r(D)},get className(){return r(y)}});var be=g(Xe,2),Lt=G(be);Dd(Lt,{defaultValue:[],get defaults(){return R.fsrsParams6},get value(){return n().fsrsParams6},set value(j){J(L,w(n).fsrsParams6=j,w(n))},children:(j,ve)=>{ee(j,{$$events:{click:()=>M()("modelParams")},children:(Be,et)=>{te();var Ae=Y();A(()=>V(Ae,Us())),v(Be,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Mt=g(Lt,2);Ed(Mt,{get placeholder(){return r($)},get value(){return n().paramSearch},set value(j){J(L,w(n).paramSearch=j,w(n))},$$legacy:!0});var Nt=g(Mt,2);je(Nt,{defaultValue:!1,get value(){return _t(),u()},set value(j){ct(B,j)},children:(j,ve)=>{ee(j,{$$events:{click:()=>M()("rescheduleCardsOnChange")},children:(Be,et)=>{var Ae=fe(()=>Qs());kt(Be,{get title(){return r(Ae)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=g(Nt,2);{var tr=j=>{var ve=fe(()=>Yi());He(j,{get warning(){return r(ve)}})};Te(Ft,j=>{u()&&j(tr)})}var bt=g(Ft,2);je(bt,{defaultValue:!1,get value(){return _t(),d()},set value(j){ct(ae,j)},children:(j,ve)=>{ee(j,{$$events:{click:()=>M()("healthCheck")},children:(Be,et)=>{var Ae=fe(()=>Ki({text:Ys()}));kt(Be,{get title(){return r(Ae)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var lt=g(bt,2),fr=G(lt);{var gr=j=>{var ve=Y();A(()=>V(ve,qs())),v(j,ve)},Vt=j=>{var ve=Y();A(()=>V(ve,zi())),v(j,ve)};Te(fr,j=>{r(z)?j(gr):j(Vt,!1)})}I(lt);var xt=g(lt,2);Te(xt,j=>{});var rr=g(xt,2),sr=G(rr);{var nr=j=>{var ve=Y();A(()=>V(ve,r(P))),v(j,ve)},vr=j=>{var ve=Je(),Be=oe(ve);{var et=Ae=>{var ht=Y();A(()=>V(ht,zs({reviews:r(T)}))),v(Ae,ht)};Te(Be,Ae=>{r(T)!==void 0&&Ae(et)},!0)}v(j,ve)};Te(sr,j=>{r(z)||r(q)?j(nr):j(vr,!1)})}I(rr),I(be);var St=g(be,2),Ht=G(St);He(Ht,{get warning(){return r(c)},className:"alert-warning"});var Ot=g(Ht,2),$r=G(Ot,!0);A(()=>V($r,Bi())),I(Ot),I(St);var zt=g(St,4),Bt=G(zt),Wt=G(Bt,!0);A(()=>V(Wt,Bs())),I(Bt),I(zt);var Gt=g(zt,2);Bd(Gt,{get state(){return O()},get simulateFsrsRequest(){return r(k)},get computing(){return r(p)},get openHelpModal(){return M()},get onPresetChange(){return W()},get shown(){return r(Ee)},set shown(j){f(Ee,j)},$$legacy:!0}),A(()=>{var j;Kt(lt,`btn ${(j=r(z)?"btn-warning":"btn-primary")!=null?j:""} svelte-1oyy9sz`),lt.disabled=!r(z)&&r(p)}),xe("click",lt,()=>Re()),xe("click",Ot,()=>me()),xe("click",Bt,()=>f(Ee,!0)),v(s,se),we()}var jd=Z("<!> <!>",1);function qd(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(u,"$fsrs",a);let n=N(t,"state",8),i=N(t,"api",8),d=N(t,"onPresetChange",8);const u=n().fsrs;let c=x(!1);const h={fsrs:{title:"FSRS",help:Xi(),url:ye.DeckOptions.fsrs},desiredRetention:{title:Lr(),help:Zi(),sched:Ue.FSRS},modelParams:{title:Us(),help:Ji()+`

`+el(),sched:Ue.FSRS},rescheduleCardsOnChange:{title:Qs(),help:tl(),sched:Ue.FSRS},computeOptimalRetention:{title:js(),help:rl(),sched:Ue.FSRS},healthCheck:{title:Ys(),help:sl()+`

`+nl(),sched:Ue.FSRS}},p=Object.values(h);let $=x(),m=x();function D(y){r($).show(),r(m).to(y)}ne(()=>e(),()=>{e()||f(c,!0)}),ze(),_e(),st(s,{title:"FSRS",children:(y,o)=>{it(y,{slotHost:K,get api(){return i()},children:(k,P)=>{var T=jd(),O=oe(T);K(O,{children:(H,L)=>{je(H,{defaultValue:!1,get value(){return _t(),e()},set value(R){ct(u,R)},children:(R,B)=>{ee(R,{$$events:{click:()=>D(Object.keys(h).indexOf("fsrs"))},children:(S,C)=>{kt(S,{get title(){return h.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=g(O,2);{var W=H=>{Gd(H,{get state(){return n()},get newlyEnabled(){return r(c)},openHelpModal:L=>D(Object.keys(h).indexOf(L)),get onPresetChange(){return d()}})};Te(M,H=>{e()&&H(W)})}v(k,T)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,o)=>{dt(y,{title:"FSRS",get url(){return ye.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:p,$$events:{mount:k=>{f($,k.detail.modal),f(m,k.detail.carousel)}}})}}}),we()}function Ud(s,t){Ce(t,!1);let a=N(t,"html",8),e=N(t,"mounted",8);Ir(e()),_e();var n=Je(),i=oe(n);al(i,a,!1,!1),v(s,n),we()}function Qd(s){switch(s){case ot.Seconds:return"s";case ot.Minutes:return"m";case ot.Hours:return"h";case ot.Days:return"d";default:return""}}function Yd(s){switch(s){case"s":return ot.Seconds;case"h":return ot.Hours;case"d":return ot.Days;default:return ot.Minutes}}function Kd(s){const t=s*60;let a=ku(t);return[ot.Months,ot.Years].includes(a)&&(a=ot.Days),`${Math.round(Pu(a,t))}${Qd(a)}`}function Xd(s){const t=s.match(/(\d+)(.*)/);if(t){const[a,e,n]=t,i=Yd(n),d=bu(i)*parseInt(e,10);return Math.min(d,2**31)/60}else return 0}function Zd(s){return s.map(Kd).join(" ")}function Jd(s){return s.split(" ").map(Xd).filter(t=>t)}var ef=Z('<input type="text" class="svelte-f5c9s0">');function tf(s,t){Ce(t,!1);let a=N(t,"value",12),e=x();function n(){a(Jd(this.value))}ne(()=>We(a()),()=>{f(e,Zd(a()))}),ze(),_e();var i=ef();$t(i),A(()=>Er(i,r(e))),xe("blur",i,n),v(s,i),we()}var rf=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),sf=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function un(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8);var n=sf(),i=oe(n);Ge(i,()=>({"--cols":13})),Ve(i.lastChild,{children:(d,u)=>{var c=rf(),h=oe(c);Ge(h,()=>({"--col-size":7})),Ct(h.lastChild,{breakpoint:"xs",children:($,m)=>{var D=Je(),y=oe(D);yt(y,t,"default",{}),v($,D)},$$slots:{default:!0}}),I(h);var p=g(h,2);Ge(p,()=>({"--col-size":6})),Ct(p.lastChild,{breakpoint:"xs",children:($,m)=>{Pt($,{children:(D,y)=>{tf(D,{get value(){return a()},set value(o){a(o)},$$legacy:!0})},$$slots:{default:!0,revert:(D,y)=>{Jt(D,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(o){a(o)},$$legacy:!0})}}})},$$slots:{default:!0}}),I(p),v(d,c)},$$slots:{default:!0}}),I(i),v(s,n)}var nf=Z("<!> <!> <!> <!> <!> <!>",1);function af(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(u,"$config",a),n=()=>ge(h,"$fsrs",a);let i=N(t,"state",8),d=N(t,"api",24,()=>({}));const u=i().currentConfig,c=i().defaults,h=i().fsrs;let p=x(),$=x();const m={relearningSteps:{title:ol(),help:il(),url:ye.DeckOptions.relearningSteps},minimumInterval:{title:ll(),help:ul(),url:ye.DeckOptions.minimumInterval,sched:Ue.SM2},leechThreshold:{title:Gs(),help:cl(),url:ye.Leeches.leeches},leechAction:{title:dl(),help:fl(),url:ye.Leeches.waiting}},D=Object.values(m);let y=x(),o=x();function k(T){r(y).show(),r(o).to(T)}ne(()=>(e(),n(),ut),()=>{const T=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;f(p,!n()&&T>e().minimumLapseInterval?gl():""),f($,n()&&T>=1?Ks():"")}),ze(),_e();var P=fe(()=>us());st(s,{get title(){return r(P)},children:(T,O)=>{it(T,{slotHost:K,get api(){return d()},children:(M,W)=>{var H=nf(),L=oe(H);K(L,{children:(F,_)=>{un(F,{get defaultValue(){return c.relearnSteps},get value(){return e().relearnSteps},set value(z){J(u,w(e).relearnSteps=z,w(e))},children:(z,q)=>{ee(z,{$$events:{click:()=>k(Object.keys(m).indexOf("relearningSteps"))},children:(ae,Q)=>{te();var U=Y();A(()=>V(U,m.relearningSteps.title)),v(ae,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var R=g(L,2);K(R,{children:(F,_)=>{He(F,{get warning(){return r($)}})},$$slots:{default:!0}});var B=g(R,2);{var S=F=>{K(F,{children:(_,z)=>{Ke(_,{get defaultValue(){return c.minimumLapseInterval},min:1,get value(){return e().minimumLapseInterval},set value(q){J(u,w(e).minimumLapseInterval=q,w(e))},children:(q,ae)=>{ee(q,{$$events:{click:()=>k(Object.keys(m).indexOf("minimumInterval"))},children:(Q,U)=>{te();var ue=Y();A(()=>V(ue,m.minimumInterval.title)),v(Q,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Te(B,F=>{n()||F(S)})}var C=g(B,2);K(C,{children:(F,_)=>{He(F,{get warning(){return r(p)}})},$$slots:{default:!0}});var l=g(C,2);K(l,{children:(F,_)=>{Ke(F,{get defaultValue(){return c.leechThreshold},min:1,get value(){return e().leechThreshold},set value(z){J(u,w(e).leechThreshold=z,w(e))},children:(z,q)=>{ee(z,{$$events:{click:()=>k(Object.keys(m).indexOf("leechThreshold"))},children:(ae,Q)=>{te();var U=Y();A(()=>V(U,m.leechThreshold.title)),v(ae,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(l,2);K(E,{children:(F,_)=>{var z=fe(ed);at(F,{get defaultValue(){return c.leechAction},get choices(){return r(z)},breakpoint:"md",get value(){return e().leechAction},set value(q){J(u,w(e).leechAction=q,w(e))},children:(q,ae)=>{ee(q,{$$events:{click:()=>k(Object.keys(m).indexOf("leechAction"))},children:(Q,U)=>{te();var ue=Y();A(()=>V(ue,m.leechAction.title)),v(Q,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(M,H)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(T,O)=>{var M=fe(()=>us());dt(T,{get title(){return r(M)},get url(){return ye.DeckOptions.lapses},slot:"tooltip",get fsrs(){return n()},helpSections:D,$$events:{mount:W=>{f(y,W.detail.modal),f(o,W.detail.carousel)}}})}}}),we()}var of=Z("<!> <!> <!> <!>",1),lf=Z("<!> <!> <!> <!> <!>",1);function uf(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(h,"$config",a),n=()=>ge($,"$fsrs",a),i=x(),d=x();let u=N(t,"state",8),c=N(t,"api",24,()=>({}));const h=u().currentConfig,p=u().defaults,$=u().fsrs;let m=x(),D=x();const y={learningSteps:{title:vl(),help:$l(),url:ye.DeckOptions.learningSteps},graduatingInterval:{title:hl(),help:ml(),url:ye.DeckOptions.graduatingInterval,sched:Ue.SM2},easyInterval:{title:pl(),help:yl(),url:ye.DeckOptions.easyInterval,sched:Ue.SM2},insertionOrder:{title:Cl(),help:wl(),url:ye.DeckOptions.insertionOrder}},o=Object.values(y);let k=x(),P=x();function T(M){r(k).show(),r(P).to(M)}ne(()=>(e(),n()),()=>{const M=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;f(m,M>e().graduatingIntervalGood?_l():""),f(D,n()&&M>=1?Ks():"")}),ne(()=>(e(),ut),()=>{f(i,e().graduatingIntervalGood>e().graduatingIntervalEasy?kl():"")}),ne(()=>(e(),ut),()=>{f(d,e().newCardInsertOrder==br.RANDOM?Pl():"")}),ze(),_e();var O=fe(()=>cs());st(s,{get title(){return r(O)},children:(M,W)=>{it(M,{slotHost:K,get api(){return c()},children:(H,L)=>{var R=lf(),B=oe(R);K(B,{children:(_,z)=>{un(_,{get defaultValue(){return p.learnSteps},get value(){return e().learnSteps},set value(q){J(h,w(e).learnSteps=q,w(e))},children:(q,ae)=>{ee(q,{$$events:{click:()=>T(Object.keys(y).indexOf("learningSteps"))},children:(Q,U)=>{te();var ue=Y();A(()=>V(ue,y.learningSteps.title)),v(Q,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=g(B,2);K(S,{children:(_,z)=>{He(_,{get warning(){return r(D)}})},$$slots:{default:!0}});var C=g(S,2);{var l=_=>{var z=of(),q=oe(z);K(q,{children:(ue,ke)=>{Ke(ue,{get defaultValue(){return p.graduatingIntervalGood},get value(){return e().graduatingIntervalGood},set value(de){J(h,w(e).graduatingIntervalGood=de,w(e))},children:(de,Pe)=>{ee(de,{$$events:{click:()=>T(Object.keys(y).indexOf("graduatingInterval"))},children:(Se,ce)=>{te();var he=Y();A(()=>V(he,y.graduatingInterval.title)),v(Se,he)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ae=g(q,2);K(ae,{children:(ue,ke)=>{He(ue,{get warning(){return r(m)}})},$$slots:{default:!0}});var Q=g(ae,2);K(Q,{children:(ue,ke)=>{Ke(ue,{get defaultValue(){return p.graduatingIntervalEasy},get value(){return e().graduatingIntervalEasy},set value(de){J(h,w(e).graduatingIntervalEasy=de,w(e))},children:(de,Pe)=>{ee(de,{$$events:{click:()=>T(Object.keys(y).indexOf("easyInterval"))},children:(Se,ce)=>{te();var he=Y();A(()=>V(he,y.easyInterval.title)),v(Se,he)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=g(Q,2);K(U,{children:(ue,ke)=>{He(ue,{get warning(){return r(i)}})},$$slots:{default:!0}}),v(_,z)};Te(C,_=>{n()||_(l)})}var E=g(C,2);K(E,{children:(_,z)=>{var q=fe(td);at(_,{get defaultValue(){return p.newCardInsertOrder},get choices(){return r(q)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(ae){J(h,w(e).newCardInsertOrder=ae,w(e))},children:(ae,Q)=>{ee(ae,{$$events:{click:()=>T(Object.keys(y).indexOf("insertionOrder"))},children:(U,ue)=>{te();var ke=Y();A(()=>V(ke,y.insertionOrder.title)),v(U,ke)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var F=g(E,2);K(F,{children:(_,z)=>{He(_,{get warning(){return r(d)}})},$$slots:{default:!0}}),v(H,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(M,W)=>{var H=fe(()=>cs());dt(M,{get title(){return r(H)},get url(){return ye.DeckOptions.newCards},slot:"tooltip",helpSections:o,get fsrs(){return n()},$$events:{mount:L=>{f(k,L.detail.modal),f(P,L.detail.carousel)}}})}}}),we()}var cf=Z('<div class="show-timer-switch" style="display: contents;"><!></div>'),df=Z('<div class="show-timer-switch" style="display: contents;"><!></div>'),ff=Z("<!> <!> <!> <!>",1);function gf(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(u,"$config",a),n=x();let i=N(t,"state",8),d=N(t,"api",8);const u=i().currentConfig,c=i().defaults,h={maximumAnswerSecs:{title:bl(),help:xl()},showAnswerTimer:{title:Sl(),help:Ol()},stopTimerOnAnswer:{title:Rl(),help:Tl()}},p=Object.values(h);let $=x(),m=x();function D(o){r($).show(),r(m).to(o)}ne(()=>(e(),ut),()=>{f(n,e().capAnswerTimeToSecs>600?Al():"")}),ze(),_e();var y=fe(()=>ds());st(s,{get title(){return r(y)},children:(o,k)=>{it(o,{slotHost:K,get api(){return d()},children:(P,T)=>{var O=ff(),M=oe(O);K(M,{children:(R,B)=>{Ke(R,{get defaultValue(){return c.capAnswerTimeToSecs},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(S){J(u,w(e).capAnswerTimeToSecs=S,w(e))},children:(S,C)=>{ee(S,{$$events:{click:()=>D(Object.keys(h).indexOf("maximumAnswerSecs"))},children:(l,E)=>{te();var F=Y();A(()=>V(F,h.maximumAnswerSecs.title)),v(l,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=g(M,2);K(W,{children:(R,B)=>{He(R,{get warning(){return r(n)}})},$$slots:{default:!0}});var H=g(W,2);K(H,{children:(R,B)=>{var S=cf(),C=G(S);je(C,{get defaultValue(){return c.showTimer},get value(){return e().showTimer},set value(l){J(u,w(e).showTimer=l,w(e))},children:(l,E)=>{ee(l,{$$events:{click:()=>D(Object.keys(h).indexOf("showAnswerTimer"))},children:(F,_)=>{te();var z=Y();A(()=>V(z,h.showAnswerTimer.title)),v(F,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),I(S),v(R,S)},$$slots:{default:!0}});var L=g(H,2);K(L,{children:(R,B)=>{var S=df(),C=G(S);je(C,{get defaultValue(){return c.stopTimerOnAnswer},get value(){return e().stopTimerOnAnswer},set value(l){J(u,w(e).stopTimerOnAnswer=l,w(e))},children:(l,E)=>{ee(l,{$$events:{click:()=>D(Object.keys(h).indexOf("stopTimerOnAnswer"))},children:(F,_)=>{te();var z=Y();A(()=>V(z,h.stopTimerOnAnswer.title)),v(F,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),I(S),v(R,S)},$$slots:{default:!0}}),v(P,O)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(o,k)=>{var P=fe(()=>ds());dt(o,{get title(){return r(P)},get url(){return ye.DeckOptions.timer},slot:"tooltip",helpSections:p,$$events:{mount:T=>{f($,T.detail.modal),f(m,T.detail.carousel)}}})}}}),we()}var vf=Z("<!> <!> <!>",1),$f=Z('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function hf(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(D,"$config",a),n=()=>ge($,"$fsrsEnabled",a),i=()=>ge(m,"$reschedule",a),d=x(),u=x(),c=x();let h=N(t,"state",8),p=N(t,"api",8);const $=h().fsrs,m=h().fsrsReschedule,D=h().currentConfig,y=h().defaults,o=e().easyDaysPercentages.slice();ne(()=>e(),()=>{e().easyDaysPercentages.length!==7&&J(D,w(e).easyDaysPercentages=y.easyDaysPercentages.slice(),w(e))}),ne(()=>e(),()=>{f(d,e().easyDaysPercentages.some((O,M)=>O!==o[M]))}),ne(()=>(e(),ut),()=>{f(u,e().easyDaysPercentages.some(O=>O===1)?"":Dl())}),ne(()=>(r(d),n(),i(),ut),()=>{f(c,r(d)&&!(n()&&i())?Il():"")}),ze(),_e();var k=$f(),P=g(oe(k),2),T=fe(()=>Ws());st(P,{get title(){return r(T)},children:(O,M)=>{it(O,{slotHost:K,get api(){return p()},children:(W,H)=>{var L=vf(),R=oe(L);ln(R,{get values(){return e().easyDaysPercentages},set values(C){J(D,w(e).easyDaysPercentages=C,w(e))},$$legacy:!0});var B=g(R,2);K(B,{children:(C,l)=>{He(C,{get warning(){return r(u)}})},$$slots:{default:!0}});var S=g(B,2);K(S,{children:(C,l)=>{He(C,{get warning(){return r(c)}})},$$slots:{default:!0}}),v(W,L)},$$slots:{default:!0}})},$$slots:{default:!0}}),v(s,k),we()}var mf=Z("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),pf=Z('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function yf(s,t){Ce(t,!1);const a=Ie(),e=()=>ge(i,"$addons",a);let n=N(t,"state",8);const i=n().addonComponents;function d(){return n().currentAuxData}function u(R){ct(i,[...e(),R])}function c(R,B){ct(i,[...e(),{component:Ud,html:R,mounted:B}])}const h={},p={},$={},m={},D={},y={},o={},k={},P={},T={};let O=x();_e();var M=pf(),W=oe(M);_d(W,{get state(){return n()},$$events:{presetchange(...R){var B;(B=r(O))==null||B.apply(this,R)}}});var H=g(W,2),L=G(H);return Ge(L,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Ml(L.lastChild,{breakpoint:"sm",class:"container-columns",children:(R,B)=>{var S=mf(),C=oe(S),l=G(C);Ve(l,{class:"row-columns",children:(ce,he)=>{xd(ce,{get state(){return n()},api:p,get onPresetChange(){return r(O)},set onPresetChange(Re){f(O,Re)},$$legacy:!0})},$$slots:{default:!0}});var E=g(l,2);Ve(E,{class:"row-columns",children:(ce,he)=>{uf(ce,{get state(){return n()},api:$})},$$slots:{default:!0}});var F=g(E,2);Ve(F,{class:"row-columns",children:(ce,he)=>{af(ce,{get state(){return n()},api:m})},$$slots:{default:!0}});var _=g(F,2);Ve(_,{class:"row-columns",children:(ce,he)=>{Od(ce,{get state(){return n()},api:y})},$$slots:{default:!0}});var z=g(_,2);Ve(z,{class:"row-columns",children:(ce,he)=>{qd(ce,{get state(){return n()},api:{},get onPresetChange(){return r(O)},set onPresetChange(Re){f(O,Re)},$$legacy:!0})},$$slots:{default:!0}}),I(C);var q=g(C,2),ae=G(q);Ve(ae,{class:"row-columns",children:(ce,he)=>{ud(ce,{get state(){return n()},api:D})},$$slots:{default:!0}});var Q=g(ae,2);Ve(Q,{class:"row-columns",children:(ce,he)=>{Xc(ce,{get state(){return n()},api:k})},$$slots:{default:!0}});var U=g(Q,2);Ve(U,{class:"row-columns",children:(ce,he)=>{gf(ce,{get state(){return n()},api:o})},$$slots:{default:!0}});var ue=g(U,2);Ve(ue,{class:"row-columns",children:(ce,he)=>{id(ce,{get state(){return n()},api:o})},$$slots:{default:!0}});var ke=g(ue,2);{var de=ce=>{Ve(ce,{class:"row-columns",children:(he,Re)=>{hc(he,{get state(){return n()}})},$$slots:{default:!0}})};Te(ke,ce=>{e().length&&ce(de)})}var Pe=g(ke,2);Ve(Pe,{class:"row-columns",children:(ce,he)=>{hf(ce,{get state(){return n()},api:T})},$$slots:{default:!0}});var Se=g(Pe,2);Ve(Se,{class:"row-columns",children:(ce,he)=>{Yc(ce,{get state(){return n()},api:P})},$$slots:{default:!0}}),I(q),v(R,S)},$$slots:{default:!0}}),I(L),I(H),v(s,M),qe(t,"auxData",d),qe(t,"addSvelteAddon",u),qe(t,"addHtmlAddon",c),qe(t,"options",h),qe(t,"dailyLimits",p),qe(t,"newOptions",$),qe(t,"lapseOptions",m),qe(t,"buryOptions",D),qe(t,"displayOrder",y),qe(t,"timerOptions",o),qe(t,"audioOptions",k),qe(t,"advancedOptions",P),qe(t,"easyDays",T),we({auxData:d,addSvelteAddon:u,addHtmlAddon:c,options:h,dailyLimits:p,newOptions:$,lapseOptions:m,buryOptions:D,displayOrder:y,timerOptions:o,audioOptions:k,advancedOptions:P,easyDays:T})}function ig(s,t){Ce(t,!1);let a=N(t,"data",8),e=x();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Vr(),(!await a().state.isModified()||confirm(El()))&&Wn({})},Ir(()=>{globalThis.$deckOptions=new Promise((n,i)=>{n(r(e))}),a().state.resolveOriginalConfigs(),Gn({})}),_e(),Et(yf(s,{get state(){return a().state},$$legacy:!0}),n=>f(e,n),()=>r(e)),we()}export{ig as component,og as universal};
