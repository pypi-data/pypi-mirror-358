var Sn=Object.defineProperty;var On=(s,t,a)=>t in s?Sn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var ve=(s,t,a)=>On(s,typeof t!="symbol"?t+"":t,a);import{L as Rn,M as Tn,N as An,O as Dn,P as In,s as mt,Q as En,S as vt,T as nt,U as tt,V as yr,W as Tt,X as br,Y as Qt,Z as Xr,_ as ir,$ as Ln,a0 as Mn,a1 as Zr,a2 as Nn,a3 as Fn,a4 as xr,a5 as Vn,a6 as Hn,a7 as zn,a8 as Bn,a9 as Wn,aa as Gn,ab as jn,ac as qn,ad as Un}from"../chunks/D1yVOiR4.mjs";import{e as Qn,f as Yn,b as Kn}from"../chunks/DpqBodsf.mjs";import{s as g,b9 as xs,g as r,L as Ss,K as y,aN as Ct,x as Xn,ba as Zn,p as Ce,e as Je,f as oe,c as v,d as we,aq as Jn,b2 as Ar,b3 as ea,i as X,h as j,V as f,r as I,b as R,n as te,l as ne,a as ze,m as b,T as Be,t as Y,b5 as Dt,al as fe,Z as ta,bb as ra}from"../chunks/DvQPdglG.mjs";import{w as Fe,g as Ne,d as sa,r as Os,a as na}from"../chunks/CAXUivPC.mjs";import{c as ar}from"../chunks/Du6Zs-i5.mjs";import{b as Dr,i as Jr,S as aa}from"../chunks/C4XEJ8_1.mjs";import"../chunks/Bg9kRutz.mjs";import{i as _e}from"../chunks/DTpo0kgr.mjs";import{b as It}from"../chunks/Bc5MJCE7.mjs";import{p as F,i as Te,s as Rs}from"../chunks/jy7gnWqU.mjs";import{q as oa,s as V,r as Ts,e as Pe,c as As,o as Ir,p as ia}from"../chunks/DWmaQdPb.mjs";import{e4 as Ds,u as Ze,e5 as Sr,av as $t,e6 as la,e7 as ua,t as At,c9 as Er,e8 as ca,T as We,e9 as Is,ea as da,eb as es,ec as fa,ed as ts,ee as ga,ef as va,eg as $a,eh as ha,ei as ma,ej as pa,ek as ya,el as Ca,em as wa,en as _a,eo as ka,ep as Pa,eq as ba,er as xa,b8 as ct,es as Sa,et as rs,eu as Oa,ev as Ra,ew as Ta,ex as Aa,ey as ss,ez as Da,eA as Ia,eB as Ea,eC as La,eD as Ma,eE as Na,eF as Fa,eG as Va,eH as Ha,eI as za,eJ as Es,eK as Ba,eL as Wa,eM as Ga,eN as ja,eO as qa,eP as Ua,eQ as Qa,eR as Ya,eS as Ka,eT as Xa,eU as Za,eV as Ja,eW as eo,eX as to,eY as ro,eZ as so,e_ as no,e$ as ao,f0 as oo,f1 as io,f2 as lo,f3 as uo,f4 as co,f5 as fo,f6 as go,f7 as vo,f8 as $o,f9 as ho,fa as mo,fb as po,fc as yo,fd as Co,fe as wo,ff as _o,fg as ko,fh as Po,fi as bo,fj as ns,fk as xo,fl as So,fm as Oo,fn as Ro,fo as To,fp as Ao,fq as Do,fr as as,fs as Io,ft as Eo,fu as Lo,fv as Mo,fw as Ls,fx as Ms,fy as Ns,fz as No,fA as Fo,fB as Vo,fC as Ho,fD as zo,fE as Bo,fF as Wo,fG as Go,fH as jo,fI as or,fJ as os,fK as is,fL as Fs,fM as qo,fN as Vs,fO as Uo,fP as Hs,fQ as Qo,fR as Yo,fS as ls,fT as Ko,fU as Xo,fV as Zo,fW as Jo,fX as ei,fY as ti,fZ as ri,f_ as si,f$ as ni,g0 as zs,g1 as ai,g2 as us,g3 as oi,co as ii,cm as li,cH as Bs,g4 as ui,cY as ci,cp as di,g5 as fi,g6 as gi,g7 as vi,g8 as $i,g9 as hi,ga as mi,gb as pi,gc as yi,gd as Ci,ge as wi,gf as Ws,gg as _i,gh as ki,gi as Lr,gj as Gs,gk as Pi,gl as bi,gm as xi,gn as js,go as qs,gp as Us,gq as Si,gr as Oi,gs as Ri,gt as Ti,gu as Ai,gv as Di,dB as Ii,gw as Ei,q as Kt,gx as Li,gy as Mi,gz as Ni,gA as Fi,gB as Vi,gC as Hi,gD as zi,gE as Bi,gF as Wi,gG as Qs,gH as Gi,gI as ji,gJ as qi,gK as Ui,gL as Qi,gM as Yi,gN as Ki,gO as Xi,gP as Ys,gQ as Zi,gR as Ji,gS as Ks,gT as el,gU as tl,gV as rl,gW as sl,gX as nl,gY as al,gZ as ol,g_ as il,g$ as ll,U as ul,h0 as cl,h1 as dl,h2 as fl,h3 as gl,h4 as vl,h5 as $l,h6 as hl,h7 as ml,h8 as Xs,h9 as cs,ha as pl,hb as yl,hc as Cl,hd as wl,he as _l,hf as kl,hg as Pl,hh as bl,hi as xl,hj as Sl,hk as Ol,hl as ds,hm as Rl,hn as Tl,ho as Al,hp as Dl,hq as Il,hr as El,hs as Ll,ht as fs,hu as Ml,hv as Nl,hw as Fl}from"../chunks/BVoZyvfW.mjs";import{b as qe}from"../chunks/CVnLI7kJ.mjs";import{s as Ee,a as ge,m as wt,b as dt,d as J,e as Vl}from"../chunks/B2Ge_TJA.mjs";import{C as Hl}from"../chunks/BBeIjo2R.mjs";import{e as Xt,i as ur,s as zl,R as Ve,p as Bl}from"../chunks/BHETkb4X.mjs";import{c as Or}from"../chunks/BF32I2AG.mjs";import{T as st}from"../chunks/D5HGIOn1.mjs";import{H as ye,b as Ue,a as ft,M as Zs}from"../chunks/CxtFmj7I.mjs";import{d as Zt,M as Js,S as Wl,l as Gl,t as jl,u as ql,v as Ul,a as en,W as Ql,P as Yl,D as Yt}from"../chunks/5cRRE90G.mjs";import{a as Kl}from"../chunks/CcaWrs5J.mjs";import{C as kt,R as Jt,a as ee,S as Ge,E as at}from"../chunks/BlNYwOkX.mjs";import{c as er,b as Cr}from"../chunks/Hy6HsZIe.mjs";import{a as lr,_ as Xl,I as gs,c as tn,$ as Zl}from"../chunks/ytsETe_u.mjs";import{C as pt}from"../chunks/Bk5eIai5.mjs";import{j as Jl,S as eu,g as tu,p as ru}from"../chunks/CInVtgem.mjs";import{W as He}from"../chunks/CC8SB2ob.mjs";import{m as rn}from"../chunks/Dbye-yJ_.mjs";import{L as su,S as nu}from"../chunks/DrU-pqQX.mjs";import{I as au}from"../chunks/CenkKYFW.mjs";import{r as ou}from"../chunks/DO5oavOX.mjs";import{r as Rr}from"../chunks/BXG0VEhB.mjs";import{k as iu}from"../chunks/CGNlSiuz.mjs";import{ac as Mr,y as vs,z as $s,A as hs,C as lu,B as uu,D as cu,E as du,H as ms,F as fu,G as ps,b as gu,I as vu,M as $u,K as hu,J as mu,N as pu,L as yu}from"../chunks/DD48U--W.mjs";import{I as Cu,i as wu,c as _u,C as ku,T as Pu}from"../chunks/B5_4gtZF.mjs";import{t as wr,T as ot,c as bu,u as xu,e as Su}from"../chunks/CTBFerHA.mjs";import{t as Ou}from"../chunks/BvqCLZw2.mjs";import{S as ys,a as Ru}from"../chunks/DB8w6JNV.mjs";function Tu(s){g(s,s.v+1)}function Au(s){let t=0,a=Xn(0),e;return()=>{xs()&&(r(a),Ss(()=>(t===0&&(e=y(()=>s(()=>Tu(a)))),t+=1,()=>{Ct().then(()=>{t-=1,t===0&&(e==null||e(),e=void 0)})})))}}function Du(s,t){let a=s();const e=Fe(a,n=>{let i=a!==s();const d=Zn(()=>{Ss(()=>{const u=s();i&&n(u)})});return i=!0,d});return t?{set:t,update:n=>t(n(s())),subscribe:e.subscribe}:{subscribe:e.subscribe}}function Iu(s){let t;const a=Au(n=>{let i=!1;const d=s.subscribe(u=>{t=u,i&&n()});return i=!0,d});function e(){return xs()?(a(),t):Ne(s)}return"set"in s?{get current(){return e()},set current(n){s.set(n)}}:{get current(){return e()}}}const Eu=Object.freeze(Object.defineProperty({__proto__:null,derived:sa,fromStore:Iu,get:Ne,readable:Os,readonly:na,toStore:Du,writable:Fe},Symbol.toStringTag,{value:"Module"}));function Lu(s,t,...a){return Mu(s,wu,t,a)}function Mu(s,t,a,e){return function n(i,d){if(d>=e.length)return a(i);const u=new Cu,c=e[d++];let h=-1;for(const p of i){const $=c(p,++h,i),m=u.get($);m?m.push(p):u.set($,[p])}for(const[p,$]of u)u.set(p,n($,d));return t(u)}(s,0)}const Nu=_u("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Fu(s,t){for(var a=-1,e=s==null?0:s.length,n=Array(e);++a<e;)n[a]=t(s[a],a,s);return n}var Cs=ys?ys.prototype:void 0,ws=Cs?Cs.toString:void 0;function sn(s){if(typeof s=="string")return s;if(Zt(s))return Fu(s,sn)+"";if(Mr(s))return ws?ws.call(s):"";var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function Vu(s){return s}var Hu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zu=/^\w*$/;function Nr(s,t){if(Zt(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||Mr(s)?!0:zu.test(s)||!Hu.test(s)||t!=null&&s in Object(t)}var Bu="Expected a function";function Fr(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(Bu);var a=function(){var e=arguments,n=t?t.apply(this,e):e[0],i=a.cache;if(i.has(n))return i.get(n);var d=s.apply(this,e);return a.cache=i.set(n,d)||i,d};return a.cache=new(Fr.Cache||Js),a}Fr.Cache=Js;var Wu=500;function Gu(s){var t=Fr(s,function(e){return a.size===Wu&&a.clear(),e}),a=t.cache;return t}var ju=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qu=/\\(\\)?/g,Uu=Gu(function(s){var t=[];return s.charCodeAt(0)===46&&t.push(""),s.replace(ju,function(a,e,n,i){t.push(n?i.replace(qu,"$1"):e||a)}),t});function Qu(s){return s==null?"":sn(s)}function nn(s,t){return Zt(s)?s:Nr(s,t)?[s]:Uu(Qu(s))}function cr(s){if(typeof s=="string"||Mr(s))return s;var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function an(s,t){t=nn(t,s);for(var a=0,e=t.length;s!=null&&a<e;)s=s[cr(t[a++])];return a&&a==e?s:void 0}function Yu(s,t,a){var e=s==null?void 0:an(s,t);return e===void 0?a:e}var Ku=1,Xu=2;function Zu(s,t,a,e){var n=a.length,i=n;if(s==null)return!i;for(s=Object(s);n--;){var d=a[n];if(d[2]?d[1]!==s[d[0]]:!(d[0]in s))return!1}for(;++n<i;){d=a[n];var u=d[0],c=s[u],h=d[1];if(d[2]){if(c===void 0&&!(u in s))return!1}else{var p=new Wl,$;if(!($===void 0?Dr(h,c,Ku|Xu,e,p):$))return!1}}return!0}function on(s){return s===s&&!Ru(s)}function Ju(s){for(var t=Gl(s),a=t.length;a--;){var e=t[a],n=s[e];t[a]=[e,n,on(n)]}return t}function ln(s,t){return function(a){return a==null?!1:a[s]===t&&(t!==void 0||s in Object(a))}}function ec(s){var t=Ju(s);return t.length==1&&t[0][2]?ln(t[0][0],t[0][1]):function(a){return a===s||Zu(a,s,t)}}function tc(s,t){return s!=null&&t in Object(s)}function rc(s,t,a){t=nn(t,s);for(var e=-1,n=t.length,i=!1;++e<n;){var d=cr(t[e]);if(!(i=s!=null&&a(s,d)))break;s=s[d]}return i||++e!=n?i:(n=s==null?0:s.length,!!n&&jl(n)&&ql(d,n)&&(Zt(s)||Ul(s)))}function sc(s,t){return s!=null&&rc(s,t,tc)}var nc=1,ac=2;function oc(s,t){return Nr(s)&&on(t)?ln(cr(s),t):function(a){var e=Yu(a,s);return e===void 0&&e===t?sc(a,s):Dr(t,e,nc|ac)}}function ic(s){return function(t){return t==null?void 0:t[s]}}function lc(s){return function(t){return an(t,s)}}function uc(s){return Nr(s)?ic(cr(s)):lc(s)}function cc(s){return typeof s=="function"?s:s==null?Vu:typeof s=="object"?Zt(s)?oc(s[0],s[1]):ec(s):uc(s)}function dc(s,t,a){a=typeof a=="function"?a:void 0;var e=a?a(s,t):void 0;return e===void 0?Dr(s,t,void 0,a):!!e}function fc(s,t){for(var a,e=-1,n=s.length;++e<n;){var i=t(s[e]);i!==void 0&&(a=a===void 0?i:a+i)}return a}function gc(s,t){return s&&s.length?fc(s,cc(t)):0}function Tr(){let s;return[new Promise(a=>s=a),s]}class vc{constructor(t,a){ve(this,"currentConfig");ve(this,"currentAuxData");ve(this,"configList");ve(this,"cardStateCustomizer");ve(this,"currentDeck");ve(this,"deckLimits");ve(this,"defaults");ve(this,"addonComponents");ve(this,"newCardsIgnoreReviewLimit");ve(this,"applyAllParentLimits");ve(this,"fsrs");ve(this,"fsrsReschedule",Fe(!1));ve(this,"fsrsHealthCheck");ve(this,"daysSinceLastOptimization");ve(this,"currentPresetName");ve(this,"originalConfigsPromise");ve(this,"originalConfigsResolve");ve(this,"targetDeckId");ve(this,"configs");ve(this,"selectedIdx");ve(this,"configListSetter");ve(this,"modifiedConfigs",new Set);ve(this,"removedConfigs",[]);ve(this,"schemaModified");ve(this,"_presetAssignmentsChanged",!1);ve(this,"loadedPresets",new Set);var e,n;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(i=>({config:i.config,useCount:i.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(i=>i.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Fe(a.cardStateCustomizer),this.deckLimits=Fe((n=(e=a.currentDeck)==null?void 0:e.limits)!=null?n:hc()),this.newCardsIgnoreReviewLimit=Fe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Fe(a.applyAllParentLimits),this.fsrs=Fe(a.fsrs),this.fsrsHealthCheck=Fe(a.fsrsHealthCheck),this.daysSinceLastOptimization=Fe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Fe(this.getCurrentConfig()),this.currentAuxData=Fe(this.getCurrentAuxData()),this.currentPresetName=Fe(this.configs[this.selectedIdx].config.name),this.configList=Os(this.getConfigList(),i=>{this.configListSetter=i}),this.schemaModified=a.schemaModified,this.addonComponents=Fe([]),Ne(this.configList),this.currentConfig.subscribe(i=>this.onCurrentConfigChanged(i)),this.currentAuxData.subscribe(i=>this.onCurrentAuxDataChanged(i)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Tr()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const e=await this.originalConfigsPromise,n=e.configs.findIndex(i=>i.id===t);n!==-1&&(e.configs[n]=ar(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),Ct().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=a,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const e=this.ensureNewNameUnique(t),i={config:new Rn({id:0n,name:e,config:new Tn(ar(a))}),useCount:0};this.configs.push(i),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const e=[...this.configs.map(n=>n.config).filter((n,i)=>i!==this.selectedIdx&&(n.id===0n||this.modifiedConfigs.has(n.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Ne(this.cardStateCustomizer),limits:Ne(this.deckLimits),newCardsIgnoreReviewLimit:Ne(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ne(this.applyAllParentLimits),fsrs:Ne(this.fsrs),fsrsReschedule:Ne(this.fsrsReschedule),fsrsHealthCheck:Ne(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await An(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;Jr(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();Jr(a,t)||this.currentConfig.update(e=>{const n=new TextEncoder().encode(JSON.stringify(t));return e.other=n,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return ar(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return $c(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,e)=>Qn(a.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,e)=>{const n=a.useCount+(e===this.selectedIdx?1:0);return{name:a.config.name,current:e===this.selectedIdx,idx:e,useCount:n}})}getAllConfigs(){return ar({configs:this.configs.map(t=>t.config),cardStateCustomizer:Ne(this.cardStateCustomizer),limits:Ne(this.deckLimits),newCardsIgnoreReviewLimit:Ne(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ne(this.applyAllParentLimits),fsrs:Ne(this.fsrs),fsrsReschedule:Ne(this.fsrsReschedule),currentConfig:Ne(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!dc(t,a,(e,n)=>{if(typeof e=="number"&&typeof n=="number")return Math.fround(e)===Math.fround(n)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function $c(s){if(!s.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(s))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function hc(){return new Dn({})}class ht{constructor(t,a,e,n,i){ve(this,"title");ve(this,"value");ve(this,"setter");ve(this,"disabledValue");ve(this,"startValue");ve(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=e,this.disabledValue=n,this.startValue=i}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,e;this.value=(e=(a=this.value)!=null?a:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Vr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Ct()}function _r(s){return s.fsrsParams6?s.fsrsParams6:s.fsrsParams5?s.fsrsParams5:s.fsrsParams4}const mc=async({params:s})=>{const t=Number(s.deckId),a=BigInt(t),e=await In({did:a});return{state:new vc(BigInt(a),e)}},lg=Object.freeze(Object.defineProperty({__proto__:null,load:mc},Symbol.toStringTag,{value:"Module"}));Ds("svelte",oa);Ds("svelte/store",Eu);function pc(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(d,"$components",a),n=()=>ge(u,"$auxData",a);let i=F(t,"state",8);const d=i().addonComponents,u=i().currentAuxData;_e();var c=Je(),h=oe(c);{var p=$=>{st($,{title:"Add-ons",children:(m,T)=>{var o=Je(),P=oe(o);Xt(P,1,e,ur,(w,O)=>{var x=Je(),A=oe(x);Or(A,()=>r(O).component,(E,G)=>{G(E,Rs(()=>r(O),{get data(){return wt(),n()},set data(W){dt(u,W)},$$legacy:!0}))}),v(w,x)}),v(m,o)},$$slots:{default:!0}})};Te(h,$=>{e().length&&$(p)})}v(s,c),we()}function kr(s,t){let a,e;if(t instanceof Element){if(a=t,e=Array.prototype.indexOf.call(s,a),e<0)return null}else if(typeof t=="string"){const n=s.namedItem(t);if(!n||(a=n,e=Array.prototype.indexOf.call(s,a),e<0))return null}else if(t<0){e=s.length+t;const n=s.item(e);if(!n)return null;a=n}else{e=t;const n=s.item(e);if(!n)return null;a=n}return[a,e]}class yc{constructor(t){ve(this,"parent");this.parent=t}insertElement(t,a){const e=kr(this.parent.children,a);if(!e)return-1;const[n,i]=e;return this.parent.insertBefore(t,n[0]),i}appendElement(t,a){var u;const e=kr(this.parent.children,a);if(!e)return-1;const[n,i]=e,d=(u=n.nextElementSibling)!=null?u:null;return this.parent.insertBefore(t,d),i+1}updateElement(t,a){const e=kr(this.parent.children,a);return e?(t(...e),!0):!1}}function Cc(s){return new yc(s)}function wc(s){return s.nodeType===Node.ELEMENT_NODE}function _c(s){function t(e){Jn(s,e)}return[{get(){return Ar(s)},available(){return ea(s)}},t]}function kc(s,t,a,e){const n=Fe([]);n.subscribe(t);function i(o,P){n.update(w=>(w.splice(o,0,P),w))}const[d,u]=Tr(),c=d.then(Cc),h=Fe([]);async function p(o,P){const[w,O]=Tr(),x=await c,A=s();function E(D){return!o.id||D.id===o.id}async function G(D,N){for(const S of D)for(const _ of S.addedNodes){if(!wc(_)||!E(_))continue;const H=P(_,x);return H>=0&&i(H,A),O(void 0),N.disconnect()}}new MutationObserver(G).observe(x.parent,{childList:!0});const L={component:o,hostProps:A};return h.update(D=>(D.push(L),D)),await w,{destroy(){h.update(D=>(Kl(D,L),D))}}}async function $(o,P){return(await c).updateElement((O,x)=>{n.update(A=>(A[x]=o(A[x]),A))},P)}const m=e({addComponent:p,updateProps:$});function T(){const o=s();return n.update(P=>(P.push(o),P)),o}return a({getProps:T}),{dynamicSlotted:h,resolveSlotContainer:u,slotsInterface:m}}function Pc(){return{detach:Fe(!1)}}function bc({addComponent:s,updateProps:t}){function a(u,c=0){return s(u,(h,p)=>p.insertElement(h,c))}function e(u,c=-1){return s(u,(h,p)=>p.appendElement(h,c))}function n(u){return t(c=>(c.detach.set(!1),c),u)}function i(u){return t(c=>(c.detach.set(!0),c),u)}function d(u){return t(c=>(c.detach.update(h=>!h),c),u)}return{insert:a,append:e,show:n,hide:i,toggle:d}}const xc=Symbol("dynamicSlotting"),[_s,Sc]=_c(xc);var Oc=X('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function it(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(m,"$dynamicSlotted",a);function n(O){return O}let i=F(t,"slotHost",8),d=F(t,"createProps",8,Pc),u=F(t,"updatePropsList",8,n),c=F(t,"setSlotHostContext",8,Sc),h=F(t,"createInterface",8,bc);const{slotsInterface:p,resolveSlotContainer:$,dynamicSlotted:m}=kc(d(),u(),c(),h());let T=F(t,"api",8);Object.assign(T(),p),_e();var o=Oc(),P=j(o);mt(P,t,"default",{});var w=f(P,2);Xt(w,1,e,({component:O,hostProps:x})=>O.id,(O,x)=>{let A=()=>r(x).component,E=()=>r(x).hostProps;var G=Je(),W=oe(G);Or(W,i,(L,D)=>{D(L,{get id(){return A().id},get hostProps(){return E()},children:(N,S)=>{var _=Je(),l=oe(_);Or(l,()=>A().component,(H,M)=>{M(H,Rs(()=>A().props))}),v(N,_)},$$slots:{default:!0}})}),v(O,G)}),I(o),en(o,O=>$==null?void 0:$(O)),v(s,o),we()}var Rc=X('<div class="item svelte-u5rx4p"><!></div>');function K(s,t){var p;Ce(t,!1);const a=Ee(),e=()=>ge(d,"$detach",a);let n=F(t,"id",8,void 0),i=F(t,"hostProps",8,void 0);_s.available()||console.log("Item: should always have a slotHostContext");const{detach:d}=(p=i())!=null?p:_s.get().getProps();_e();var u=Rc(),c=j(u);{var h=$=>{var m=Je(),T=oe(m);mt(T,t,"default",{}),v($,m)};Te(c,$=>{e()||$(h)})}I(u),R(()=>Ze(u,"id",n())),v(s,u),we()}var Tc=X(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function _t(s,t){Ce(t,!1);let a=F(t,"title",8);_e(),te();var e=Tc(),n=oe(e),i=f(n);R(()=>Ze(i,"title",Sr()));var d=j(i);lr(d,{icon:Xl}),I(i),R(()=>{var u;return V(n,`${(u=a())!=null?u:""} `)}),v(s,e),we()}var Ac=X('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Dc=X('<div class="m-2"><!></div>');function Ic(s,t){let a=F(t,"value",12),e=F(t,"title",8);var n=Dc(),i=j(n);kt(i,{children:(d,u)=>{var c=Ac(),h=j(c),p=j(h);_t(p,{get title(){return e()}}),I(h);var $=f(h,2),m=j($);Ts(m),I($),I(c),er(m,a),v(d,c)},$$slots:{default:!0,revert:(d,u)=>{Jt(d,{slot:"revert",defaultValue:"",get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),I(n),v(s,n)}var Ec=X('<span class="invisible svelte-xwrhci"> </span>'),Lc=X('<span class="suffix svelte-xwrhci"></span>'),Mc=X('<div class="spinner decrement svelte-xwrhci" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-xwrhci" tabindex="-1" role="button"><!></div>',1),Nc=X('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"> <!> <!></div>');function un(s,t){Ce(t,!1);const a=b();let e=F(t,"value",12),n=F(t,"step",8,1),i=F(t,"min",8,1),d=F(t,"max",8,9999),u=F(t,"percentage",8,!1),c=b(),h=F(t,"focused",12,!1),p=b();function $(k){Number.isNaN(k)||e(Math.min(d(),Math.max(i(),k))),Ct().then(()=>{Dt(c,r(c).value=r(T)),A(r(T))})}function m(k){if(Math.floor(k)===k)return 0;const z=k.toString().split(".")[1].length||0,q=u()?z-2:z;return Math.max(0,q)}let T=b();function o(){$(parseFloat(this.value)/r(p))}function P(k){h()&&($(e()+(k.deltaY<0?n():-n())),k.preventDefault())}function w(k){$(e()+k),r(W)&&setTimeout(()=>w(k),L)}const O=[1500,1250,1e3,750,500,250];async function x(k){g(W,!0),L=128,g(D,setTimeout(k,250));for(const z of O)L=await new Promise(q=>setTimeout(()=>q(r(W)?L/2:128),z))}function A(k){g(G,ca({pct:k}).replaceAll("%","-%-").split("-"))}function E(){A(r(c).value)}let G=b(),W=b(!1),L,D=b();ne(()=>Be(u()),()=>{g(p,u()?100:1)}),ne(()=>(Be(e()),r(p),Be(n())),()=>{g(T,(e()*r(p)).toFixed(m(n())))}),ne(()=>r(T),()=>{A(r(T))}),ne(()=>(Be(u()),r(G)),()=>{g(a,u()&&!r(G)[0]?"2.2ch":void 0)}),ze(),_e();var N=Nc(),S=j(N);$t(S),It(S,k=>g(c,k),()=>r(c));var _=f(S,2);{var l=k=>{var z=Lc();Xt(z,5,()=>r(G),ur,(q,se)=>{var Z=Je(),U=oe(Z);{var de=ue=>{var be=Y("%");v(ue,be)},ke=ue=>{var be=Ec(),xe=j(be,!0);I(be),R(()=>V(xe,r(se))),v(ue,be)};Te(U,ue=>{r(se)=="%"?ue(de):ue(ke,!1)})}v(q,Z)}),I(z),v(k,z)};Te(_,k=>{u()&&k(l)})}var H=f(_,2);{var M=k=>{var z=Mc(),q=oe(z);R(()=>Ze(q,"title",la()));var se=j(q);gs(se,{children:(de,ke)=>{lr(de,{icon:tn})},$$slots:{default:!0}}),I(q);var Z=f(q,2);R(()=>Ze(Z,"title",ua()));var U=j(Z);gs(U,{children:(de,ke)=>{lr(de,{icon:Zl})},$$slots:{default:!0}}),I(Z),R(()=>{At(q,"active",e()>i()),At(Z,"active",e()<d())}),Pe("click",q,()=>{r(c).focus(),e()>i()&&w(-n())}),Pe("mousedown",q,()=>x(()=>{e()>i()&&w(-n())})),Pe("mouseup",q,()=>{clearTimeout(r(D)),g(W,!1)}),Pe("click",Z,()=>{r(c).focus(),e()<d()&&w(n())}),Pe("mousedown",Z,()=>x(()=>{e()<d()&&w(n())})),Pe("mouseup",Z,()=>{clearTimeout(r(D)),g(W,!1)}),v(k,z)};Te(H,k=>{Jl()&&k(M)})}I(N),R(()=>{Ze(S,"min",i()*r(p)),Ze(S,"max",d()*r(p)),Ze(S,"step",n()*r(p)),Er(S,r(T)),zl(S,"padding-left",r(a))}),Pe("blur",S,o),Pe("change",S,o),Pe("input",S,E),Pe("focusin",S,()=>h(!0)),Pe("focusout",S,()=>h(!1)),Pe("wheel",N,P),v(s,N),we()}var Fc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function rt(s,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),n=F(t,"min",8,0),i=F(t,"max",8,9999),d=F(t,"step",8,.01),u=F(t,"percentage",8,!1),c=F(t,"focused",12,!1);var h=Vc(),p=oe(h);We(p,()=>({"--cols":13})),Ve(p.lastChild,{children:($,m)=>{var T=Fc(),o=oe(T);We(o,()=>({"--col-size":7})),pt(o.lastChild,{breakpoint:"xs",children:(w,O)=>{var x=Je(),A=oe(x);mt(A,t,"default",{}),v(w,x)},$$slots:{default:!0}}),I(o);var P=f(o,2);We(P,()=>({"--col-size":6})),pt(P.lastChild,{breakpoint:"xs",children:(w,O)=>{kt(w,{children:(x,A)=>{un(x,{get min(){return n()},get max(){return i()},get step(){return d()},get percentage(){return u()},get value(){return a()},set value(E){a(E)},get focused(){return c()},set focused(E){c(E)},$$legacy:!0})},$$slots:{default:!0,revert:(x,A)=>{Jt(x,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(E){a(E)},$$legacy:!0})}}})},$$slots:{default:!0}}),I(P),v($,T)},$$slots:{default:!0}}),I(p),v(s,h)}var Hc=X("<!> <!>",1),zc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Bc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ke(s,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),n=F(t,"min",8,0),i=F(t,"max",8,9999);var d=Bc(),u=oe(d);We(u,()=>({"--cols":13})),Ve(u.lastChild,{children:(c,h)=>{var p=zc(),$=oe(p);We($,()=>({"--col-size":7})),pt($.lastChild,{breakpoint:"xs",children:(T,o)=>{var P=Je(),w=oe(P);mt(w,t,"default",{}),v(T,P)},$$slots:{default:!0}}),I($);var m=f($,2);We(m,()=>({"--col-size":6})),pt(m.lastChild,{breakpoint:"xs",children:(T,o)=>{Ve(T,{class:"flex-grow-1",children:(P,w)=>{var O=Hc(),x=oe(O);mt(x,t,"tabs",{});var A=f(x,2);kt(A,{children:(E,G)=>{un(E,{get min(){return n()},get max(){return i()},get value(){return a()},set value(W){a(W)},$$legacy:!0})},$$slots:{default:!0,revert:(E,G)=>{Jt(E,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(W){a(W)},$$legacy:!0})}}}),v(P,O)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(m),v(c,p)},$$slots:{default:!0}}),I(u),v(s,d)}var Wc=X('<input type="date" class="svelte-67zife">'),Gc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jc=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),qc=X("<div><!></div>");function Uc(s,t){Ce(t,!1);let a=F(t,"date",12);ne(()=>Be(a()),()=>{a(a()?a():"1970-01-01")}),ze();var e=qc(),n=j(e);kt(n,{children:(i,d)=>{var u=jc(),c=oe(u);We(c,()=>({"--cols":13})),Ve(c.lastChild,{children:(h,p)=>{var $=Gc(),m=oe($);We(m,()=>({"--col-size":7})),pt(m.lastChild,{breakpoint:"xs",children:(o,P)=>{var w=Je(),O=oe(w);mt(O,t,"default",{}),v(o,w)},$$slots:{default:!0}}),I(m);var T=f(m,2);We(T,()=>({"--col-size":6})),pt(T.lastChild,{breakpoint:"xs",children:(o,P)=>{var w=Wc();$t(w),er(w,a),v(o,w)},$$slots:{default:!0}}),I(T),v(h,$)},$$slots:{default:!0}}),I(c),v(i,u)},$$slots:{default:!0}}),I(e),v(s,e),we()}var Qc=X("<!> <!> <!> <!> <!>",1),Yc=X("<!> <!> <!>",1),Kc=X("<!> <!> <!> <!>",1);function Xc(s,t){Ce(t,!1);const a=Ee(),e=()=>ge($,"$config",a),n=()=>ge(o,"$fsrs",a),i=()=>ge(T,"$cardStateCustomizer",a),d=b(),u=b(),c=b();let h=F(t,"state",8),p=F(t,"api",8);const $=h().currentConfig,m=h().defaults,T=h().cardStateCustomizer,o=h().fsrs,P={maximumInterval:{title:Is(),help:da(),url:ye.DeckOptions.maximumInterval},historicalRetention:{title:es(),help:fa(),sched:Ue.FSRS},ignoreRevlogsBeforeMs:{title:ts(),help:ga(),sched:Ue.FSRS},startingEase:{title:va(),help:$a(),url:ye.DeckOptions.startingEase,sched:Ue.SM2},easyBonus:{title:ha(),help:ma(),url:ye.DeckOptions.easyBonus,sched:Ue.SM2},intervalModifier:{title:pa(),help:ya(),url:ye.DeckOptions.intervalModifier,sched:Ue.SM2},hardInterval:{title:Ca(),help:wa(),url:ye.DeckOptions.hardInterval,sched:Ue.SM2},newInterval:{title:_a(),help:ka(),url:ye.DeckOptions.newInterval,sched:Ue.SM2},customScheduling:{title:Pa(),help:ba(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},w=Object.values(P);let O=b(null),x="";function A(l){x!=l&&(G&&l&&l!="1970-01-01"?(x=l,En({search:e().paramSearch||`preset:"${h().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:l}).then(H=>{g(O,H)})):g(O,null),G=!0)}let E=b(void 0),G=!0;const W=1e3;let L=b("alert-warning"),D=b(),N=b();function S(l){r(D).show(),r(N).to(l)}ne(()=>e(),()=>{g(d,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ne(()=>(e(),ct),()=>{g(u,e().maximumReviewInterval<180?xa():"")}),ne(()=>(r(E),e()),()=>{clearTimeout(r(E)),g(E,setTimeout(()=>{A(e().ignoreRevlogsBeforeDate)},W))}),ne(()=>r(O),()=>{r(O)&&(Number(r(O).included)/Number(r(O).total)<.1?g(L,"alert-danger"):r(O).included!=r(O).total?g(L,"alert-warning"):g(L,"alert-info"))}),ne(()=>(r(O),ct),()=>{g(c,r(O)?Sa({included:r(O).included.toString(),totalCards:r(O).total.toString()}):"")}),ze(),_e();var _=fe(()=>rs());st(s,{get title(){return r(_)},children:(l,H)=>{it(l,{slotHost:K,get api(){return p()},children:(M,k)=>{var z=Kc(),q=oe(z);K(q,{children:(ue,be)=>{Ke(ue,{get defaultValue(){return m.maximumReviewInterval},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(xe){J($,y(e).maximumReviewInterval=xe,y(e))},children:(xe,ce)=>{ee(xe,{$$events:{click:()=>S(Object.keys(P).indexOf("maximumInterval"))},children:($e,Se)=>{te();var je=Y();R(()=>V(je,P.maximumInterval.title)),v($e,je)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=f(q,2);K(se,{children:(ue,be)=>{He(ue,{get warning(){return r(u)},get className(){return r(d)}})},$$slots:{default:!0}});var Z=f(se,2);{var U=ue=>{var be=Qc(),xe=oe(be);K(xe,{children:(he,Le)=>{rt(he,{get defaultValue(){return m.initialEase},min:1.31,max:5,get value(){return e().initialEase},set value(ae){J($,y(e).initialEase=ae,y(e))},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>S(Object.keys(P).indexOf("startingEase"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,P.startingEase.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ce=f(xe,2);K(ce,{children:(he,Le)=>{rt(he,{get defaultValue(){return m.easyMultiplier},min:1,max:5,get value(){return e().easyMultiplier},set value(ae){J($,y(e).easyMultiplier=ae,y(e))},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>S(Object.keys(P).indexOf("easyBonus"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,P.easyBonus.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=f(ce,2);K($e,{children:(he,Le)=>{rt(he,{get defaultValue(){return m.intervalMultiplier},min:.5,max:2,get value(){return e().intervalMultiplier},set value(ae){J($,y(e).intervalMultiplier=ae,y(e))},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>S(Object.keys(P).indexOf("intervalModifier"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,P.intervalModifier.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Se=f($e,2);K(Se,{children:(he,Le)=>{rt(he,{get defaultValue(){return m.hardMultiplier},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(ae){J($,y(e).hardMultiplier=ae,y(e))},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>S(Object.keys(P).indexOf("hardInterval"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,P.hardInterval.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var je=f(Se,2);K(je,{children:(he,Le)=>{rt(he,{get defaultValue(){return m.lapseMultiplier},max:1,get value(){return e().lapseMultiplier},set value(ae){J($,y(e).lapseMultiplier=ae,y(e))},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>S(Object.keys(P).indexOf("newInterval"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,P.newInterval.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(ue,be)},de=ue=>{var be=Yc(),xe=oe(be);rt(xe,{get defaultValue(){return m.historicalRetention},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(Se){J($,y(e).historicalRetention=Se,y(e))},children:(Se,je)=>{ee(Se,{$$events:{click:()=>S(Object.keys(P).indexOf("historicalRetention"))},children:(he,Le)=>{te();var ae=Y();R(()=>V(ae,es())),v(he,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ce=f(xe,2);K(ce,{children:(Se,je)=>{Uc(Se,{get date(){return e().ignoreRevlogsBeforeDate},set date(he){J($,y(e).ignoreRevlogsBeforeDate=he,y(e))},children:(he,Le)=>{ee(he,{$$events:{click:()=>S(Object.keys(P).indexOf("ignoreRevlogsBeforeMs"))},children:(ae,Me)=>{te();var me=Y();R(()=>V(me,ts())),v(ae,me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=f(ce,2);K($e,{children:(Se,je)=>{He(Se,{get warning(){return r(c)},get className(){return r(L)}})},$$slots:{default:!0}}),v(ue,be)};Te(Z,ue=>{n()?ue(de,!1):ue(U)})}var ke=f(Z,2);K(ke,{children:(ue,be)=>{Ic(ue,{get title(){return P.customScheduling.title},get value(){return wt(),i()},set value(xe){dt(T,xe)},$$events:{click:()=>S(Object.keys(P).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),v(M,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(l,H)=>{var M=fe(()=>rs());ft(l,{get title(){return r(M)},get url(){return ye.DeckOptions.advanced},slot:"tooltip",get fsrs(){return n()},helpSections:w,$$events:{mount:k=>{g(D,k.detail.modal),g(N,k.detail.carousel)}}})}}}),we()}var Zc=X("<!> <!>",1);function Jc(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(d,"$config",a);let n=F(t,"state",8),i=F(t,"api",8);const d=n().currentConfig,u=n().defaults,c={disableAutoplay:{title:Oa(),help:Ra()},skipQuestionWhenReplaying:{title:Ta(),help:Aa()}},h=Object.values(c);let p=b(),$=b();function m(o){r(p).show(),r($).to(o)}_e();var T=fe(()=>ss());st(s,{get title(){return r(T)},children:(o,P)=>{it(o,{slotHost:K,get api(){return i()},children:(w,O)=>{var x=Zc(),A=oe(x);K(A,{children:(G,W)=>{Ge(G,{get defaultValue(){return u.disableAutoplay},get value(){return e().disableAutoplay},set value(L){J(d,y(e).disableAutoplay=L,y(e))},children:(L,D)=>{ee(L,{$$events:{click:()=>m(Object.keys(c).indexOf("disableAutoplay"))},children:(N,S)=>{te();var _=Y();R(()=>V(_,c.disableAutoplay.title)),v(N,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=f(A,2);K(E,{children:(G,W)=>{Ge(G,{get defaultValue(){return u.skipQuestionWhenReplayingAnswer},get value(){return e().skipQuestionWhenReplayingAnswer},set value(L){J(d,y(e).skipQuestionWhenReplayingAnswer=L,y(e))},children:(L,D)=>{ee(L,{$$events:{click:()=>m(Object.keys(c).indexOf("skipQuestionWhenReplaying"))},children:(N,S)=>{te();var _=Y();R(()=>V(_,c.skipQuestionWhenReplaying.title)),v(N,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(w,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(o,P)=>{var w=fe(()=>ss());ft(o,{get title(){return r(w)},get url(){return ye.DeckOptions.audio},slot:"tooltip",helpSections:h,$$events:{mount:O=>{g(p,O.detail.modal),g($,O.detail.carousel)}}})}}}),we()}function ed(){return[{label:Da(),value:vt.DECK},{label:Ia(),value:vt.DECK_THEN_RANDOM_NOTES},{label:Ea(),value:vt.LOWEST_POSITION},{label:La(),value:vt.HIGHEST_POSITION},{label:Ma(),value:vt.RANDOM_NOTES},{label:Na(),value:vt.RANDOM_CARDS}]}function td(){return[{label:Fa(),value:nt.TEMPLATE},{label:Va(),value:nt.NO_SORT},{label:Ha(),value:nt.TEMPLATE_THEN_RANDOM},{label:za(),value:nt.RANDOM_NOTE_THEN_TEMPLATE},{label:Es(),value:nt.RANDOM_CARD}]}function cn(s){return[{label:Ba(),value:tt.DAY},{label:Wa(),value:tt.DAY_THEN_DECK},{label:Ga(),value:tt.DECK_THEN_DAY},{label:ja(),value:tt.INTERVALS_ASCENDING},{label:qa(),value:tt.INTERVALS_DESCENDING},...id(s),{label:Ua(),value:tt.RETRIEVABILITY_ASCENDING},{label:Qa(),value:tt.RETRIEVABILITY_DESCENDING},{label:Es(),value:tt.RANDOM},{label:Ya(),value:tt.ADDED},{label:Ka(),value:tt.REVERSE_ADDED}]}function ks(){return[{label:Xa(),value:yr.MIX_WITH_REVIEWS},{label:Za(),value:yr.AFTER_REVIEWS},{label:Ja(),value:yr.BEFORE_REVIEWS}]}function rd(){return[{label:eo(),value:Tt.SUSPEND},{label:to(),value:Tt.TAG_ONLY}]}function sd(){return[{label:ro(),value:br.DUE},{label:so(),value:br.RANDOM}]}function nd(){return[{label:no(),value:Qt.BURY_CARD},{label:ao(),value:Qt.ANSWER_AGAIN},{label:oo(),value:Qt.ANSWER_GOOD},{label:io(),value:Qt.ANSWER_HARD},{label:lo(),value:Qt.SHOW_REMINDER}]}function ad(){return[{label:uo(),value:Xr.SHOW_ANSWER},{label:co(),value:Xr.SHOW_REMINDER}]}const Ps="memorized";function od(){return[{label:"Memorized (Default)",value:"memorized"},{label:"Stability (Experimental)",value:"stability"},{label:"Post Abandon Memorized (Experimental)",value:"futureMemorized"},{label:"Average Post Abandon Memorized (Experimental)",value:"averageFutureMemorized"}]}function id(s){const t=[{label:s?fo():go(),value:tt.EASE_ASCENDING},{label:s?vo():$o(),value:tt.EASE_DESCENDING}];return s&&t.reverse(),t}var ld=X("<!> <!> <!> <!> <!>",1);function ud(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(d,"$config",a);let n=F(t,"state",8),i=F(t,"api",8);const d=n().currentConfig,u=n().defaults,c={secondsToShowQuestion:{title:ho(),help:mo()},secondsToShowAnswer:{title:po(),help:yo()},waitForAudio:{title:Co(),help:wo()},questionAction:{title:_o(),help:ko()},answerAction:{title:Po(),help:bo()}},h=Object.values(c);let p=b(),$=b();function m(o){r(p).show(),r($).to(o)}_e();var T=fe(()=>ns());st(s,{get title(){return r(T)},children:(o,P)=>{it(o,{slotHost:K,get api(){return i()},children:(w,O)=>{var x=ld(),A=oe(x);K(A,{children:(D,N)=>{rt(D,{get defaultValue(){return u.secondsToShowQuestion},step:.1,get value(){return e().secondsToShowQuestion},set value(S){J(d,y(e).secondsToShowQuestion=S,y(e))},children:(S,_)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("secondsToShowQuestion"))},children:(l,H)=>{te();var M=Y();R(()=>V(M,c.secondsToShowQuestion.title)),v(l,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=f(A,2);K(E,{children:(D,N)=>{rt(D,{get defaultValue(){return u.secondsToShowAnswer},step:.1,get value(){return e().secondsToShowAnswer},set value(S){J(d,y(e).secondsToShowAnswer=S,y(e))},children:(S,_)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("secondsToShowAnswer"))},children:(l,H)=>{te();var M=Y();R(()=>V(M,c.secondsToShowAnswer.title)),v(l,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=f(E,2);K(G,{children:(D,N)=>{Ge(D,{get defaultValue(){return u.waitForAudio},get value(){return e().waitForAudio},set value(S){J(d,y(e).waitForAudio=S,y(e))},children:(S,_)=>{ee(S,{$$events:{click:()=>m(Object.keys(c).indexOf("waitForAudio"))},children:(l,H)=>{te();var M=Y();R(()=>V(M,c.waitForAudio.title)),v(l,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=f(G,2);K(W,{children:(D,N)=>{var S=fe(ad);at(D,{get defaultValue(){return u.questionAction},get choices(){return r(S)},get value(){return e().questionAction},set value(_){J(d,y(e).questionAction=_,y(e))},children:(_,l)=>{ee(_,{$$events:{click:()=>m(Object.keys(c).indexOf("questionAction"))},children:(H,M)=>{te();var k=Y();R(()=>V(k,c.questionAction.title)),v(H,k)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=f(W,2);K(L,{children:(D,N)=>{var S=fe(nd);at(D,{get defaultValue(){return u.answerAction},get choices(){return r(S)},get value(){return e().answerAction},set value(_){J(d,y(e).answerAction=_,y(e))},children:(_,l)=>{ee(_,{$$events:{click:()=>m(Object.keys(c).indexOf("answerAction"))},children:(H,M)=>{te();var k=Y();R(()=>V(k,c.answerAction.title)),v(H,k)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(w,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(o,P)=>{var w=fe(()=>ns());ft(o,{get title(){return r(w)},get url(){return ye.DeckOptions.autoAdvance},slot:"tooltip",helpSections:h,$$events:{mount:O=>{g(p,O.detail.modal),g($,O.detail.carousel)}}})}}}),we()}var cd=X("<!> <!> <!>",1);function dd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(d,"$config",a);let n=F(t,"state",8),i=F(t,"api",8);const d=n().currentConfig,u=n().defaults,c=`

`+xo(),h={buryNewSiblings:{title:So(),help:Oo()+c},buryReviewSiblings:{title:Ro(),help:To()+c},buryInterdayLearningSiblings:{title:Ao(),help:Do()+c}},p=Object.values(h);let $=b(),m=b();function T(P){r($).show(),r(m).to(P)}_e();var o=fe(()=>as());st(s,{get title(){return r(o)},children:(P,w)=>{it(P,{slotHost:K,get api(){return i()},children:(O,x)=>{var A=cd(),E=oe(A);K(E,{children:(L,D)=>{Ge(L,{get defaultValue(){return u.buryNew},get value(){return e().buryNew},set value(N){J(d,y(e).buryNew=N,y(e))},children:(N,S)=>{ee(N,{$$events:{click:()=>T(Object.keys(h).indexOf("buryNewSiblings"))},children:(_,l)=>{te();var H=Y();R(()=>V(H,h.buryNewSiblings.title)),v(_,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=f(E,2);K(G,{children:(L,D)=>{Ge(L,{get defaultValue(){return u.buryReviews},get value(){return e().buryReviews},set value(N){J(d,y(e).buryReviews=N,y(e))},children:(N,S)=>{ee(N,{$$events:{click:()=>T(Object.keys(h).indexOf("buryReviewSiblings"))},children:(_,l)=>{te();var H=Y();R(()=>V(H,h.buryReviewSiblings.title)),v(_,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=f(G,2);K(W,{children:(L,D)=>{Ge(L,{get defaultValue(){return u.buryInterdayLearning},get value(){return e().buryInterdayLearning},set value(N){J(d,y(e).buryInterdayLearning=N,y(e))},children:(N,S)=>{ee(N,{$$events:{click:()=>T(Object.keys(h).indexOf("buryInterdayLearningSiblings"))},children:(_,l)=>{te();var H=Y();R(()=>V(H,h.buryInterdayLearningSiblings.title)),v(_,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(O,A)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,w)=>{var O=fe(()=>as());ft(P,{get title(){return r(O)},get url(){return ye.Studying.siblingsAndBurying},slot:"tooltip",helpSections:p,$$events:{mount:x=>{g($,x.detail.modal),g(m,x.detail.carousel)}}})}}}),we()}function fd(){}var gd=X('<hr class="dropdown-divider">');function vd(s){var t=gd();v(s,t)}var $d=X('<div class="save svelte-ymxw35"> </div>'),hd=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),md=X("<!> <!> <!> <!> <!> <!>",1),pd=X('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function yd(s,t){Ce(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",e=As();let n=F(t,"state",8);async function i(){if(await Ct(),n().defaultConfigSelected()){alert(Io());return}const o=(n().removalWilLForceFullSync()?Eo()+" ":"")+Lo({name:n().getCurrentName()});if(confirm(Yn(o)))try{n().removeCurrentConfig(),e("remove")}catch(P){alert(P)}}async function d(o){await Vr(),n().save(o)}const u="Control+Enter";let c=b(!1);_e();var h=pd(),p=j(h),$=fe(()=>tu(u));We(p,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),su(p.lastChild,{primary:!0,get tooltip(){return r($)},$$events:{click:()=>d(ir.NORMAL)},children:(o,P)=>{var w=$d(),O=j(w,!0);R(()=>V(O,Mo())),I(w),v(o,w)},$$slots:{default:!0}}),I(p);var m=f(p,2);eu(m,{keyCombination:u,$$events:{action:()=>d(ir.NORMAL)}});var T=f(m,2);Ql(T,{get show(){return r(c)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>g(c,!1)},$$slots:{reference:(o,P)=>{var w=hd(),O=oe(w);We(O,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),au(O.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>g(c,!r(c))},children:(x,A)=>{lr(x,{icon:tn})},$$slots:{default:!0}}),I(O),v(o,w)},floating:(o,P)=>{Yl(o,{slot:"floating",children:(w,O)=>{var x=md(),A=oe(x);Yt(A,{$$events:{click:()=>e("add")},children:(N,S)=>{te();var _=Y();R(()=>V(_,Ls())),v(N,_)},$$slots:{default:!0}});var E=f(A,2);Yt(E,{$$events:{click:()=>e("clone")},children:(N,S)=>{te();var _=Y();R(()=>V(_,Ms())),v(N,_)},$$slots:{default:!0}});var G=f(E,2);Yt(G,{$$events:{click:()=>e("rename")},children:(N,S)=>{te();var _=Y();R(()=>V(_,Ns())),v(N,_)},$$slots:{default:!0}});var W=f(G,2);Yt(W,{$$events:{click:i},children:(N,S)=>{te();var _=Y();R(()=>V(_,No())),v(N,_)},$$slots:{default:!0}});var L=f(W,2);vd(L);var D=f(L,2);Yt(D,{$$events:{click:()=>d(ir.APPLY_TO_CHILDREN)},children:(N,S)=>{te();var _=Y();R(()=>V(_,Fo())),v(N,_)},$$slots:{default:!0}}),v(w,x)},$$slots:{default:!0}})}}}),I(h),v(s,h),we()}var Cd=X('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function wd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(Bl,"$pageTheme",a),n=b();let i=F(t,"title",8),d=F(t,"prompt",8),u=F(t,"initialValue",8,""),c=F(t,"onOk",8);const h=Math.random().toString(36).substring(2),p=Ar(rn);let $=b(),m,T=b();function o(){c()(r(T).value),m.hide(),g(n,u())}function P(){m.hide(),g(n,u())}function w(){r(T).focus(),x(!0)}function O(){x(!1)}const{set:x,remove:A}=ou(P);Ir(()=>{r($).addEventListener("shown.bs.modal",w),r($).addEventListener("hidden.bs.modal",O),m=new Zs(r($),{keyboard:!1}),p.set(h,m)}),ia(()=>{A(),r($).removeEventListener("shown.bs.modal",w),r($).removeEventListener("hidden.bs.modal",O)}),ne(()=>Be(u()),()=>{g(n,u())}),ze(),_e();var E=Cd(),G=j(E),W=j(G),L=j(W),D=j(L),N=j(D,!0);I(D);var S=f(D,2);I(L);var _=f(L,2),l=j(_),H=j(l),M=j(H),k=j(M);I(M);var z=f(M,2);$t(z),It(z,U=>g(T,U),()=>r(T)),I(H),I(l),I(_);var q=f(_,2),se=j(q),Z=f(se,2);return I(q),I(W),I(G),I(E),It(E,U=>g($,U),()=>r($)),R(()=>{var U;At(W,"default-colors",e().isDark),V(N,i()),At(S,"invert",e().isDark),V(k,`${(U=d())!=null?U:""}:`),At(z,"nightMode",e().isDark)}),er(z,()=>r(n),U=>g(n,U)),Pe("submit",l,ru(o)),Pe("click",se,P),Pe("click",Z,o),v(s,E),qe(t,"modalKey",h),we({modalKey:h})}var _d=X('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),kd=X('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Pd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(u,"$configList",a),n=b(),i=b();let d=F(t,"state",8);const u=d().configList,c=As(),h=()=>c("presetchange");function p(_){const l=Vo({decks:_.useCount});return`${_.name} (${l})`}function $(_){d().setCurrentIndex(_.detail.value),h()}function m(_){const l=_.trim();l.length&&(d().addConfig(l),h())}function T(_){const l=_.trim();l.length&&(d().cloneConfig(l),h())}function o(_){d().setCurrentName(_)}const P=Ar(rn);let w=b(),O=b(""),x=b(""),A=b(fd);function E(){g(x,Ls()),g(A,m),g(O,""),P.get(r(w)).show()}function G(){g(x,Ms()),g(A,T),g(O,d().getCurrentName()),P.get(r(w)).show()}function W(){g(x,Ns()),g(A,o),g(O,d().getCurrentName()),P.get(r(w)).show()}ne(()=>e(),()=>{g(n,e().findIndex(_=>_.current))}),ne(()=>(e(),r(n)),()=>{g(i,p(e()[r(n)]))}),ze(),_e();var L=kd(),D=oe(L),N=fe(()=>Ho());wd(D,{get title(){return r(x)},get prompt(){return r(N)},get initialValue(){return r(O)},get onOk(){return r(A)},get modalKey(){return r(w)},set modalKey(_){g(w,_)},$$legacy:!0});var S=f(D,2);We(S,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),nu(S.lastChild,{breakpoint:"sm",children:(_,l)=>{var H=_d(),M=j(H);aa(M,{class:"flex-grow-1 mr1",get label(){return r(i)},get list(){return e()},parser:z=>({content:p(z),value:z.idx}),get value(){return r(n)},set value(z){g(n,z)},$$events:{change:$},$$legacy:!0});var k=f(M,2);yd(k,{get state(){return d()},$$events:{add:E,clone:G,rename:W,remove:h}}),I(H),v(_,H)},$$slots:{default:!0}}),I(S),v(s,L),we()}var bd=X('<li class="svelte-11xpnuy"><button class="svelte-11xpnuy"> </button></li>'),xd=X('<ul class="svelte-11xpnuy"></ul>');function bs(s,t){Ce(t,!1);let a=F(t,"tabs",8),e=F(t,"value",12),n=b(i());function i(){const h=a().slice().reverse().findIndex(p=>p.value!==null);return h===-1?0:a().length-h-1}function d(h){for(const[p,$]of a().entries())h===p?$.enable(e()):h>p?$.reset():$.disable()}const u=h=>()=>g(n,h);ne(()=>r(n),()=>{d(r(n))}),ne(()=>(Be(a()),r(n)),()=>{var h;e((h=a()[r(n)].value)!=null?h:0)}),ne(()=>(Be(a()),r(n),Be(e())),()=>{a()[r(n)].setValue(e())}),ze(),_e();var c=xd();Xt(c,5,a,ur,(h,p,$)=>{var m=bd(),T=j(m),o=ta(()=>u($)),P=j(T,!0);I(T),I(m),R(()=>{At(m,"active",r(n)===$),V(P,r(p).title)}),Pe("click",T,function(...w){var O;(O=r(o))==null||O.apply(this,w)}),v(h,m)}),I(c),v(s,c),we()}var Sd=X("<!> <!> <!> <!> <!>",1);function Od(s,t){var M,k,z,q,se,Z;Ce(t,!1);const a=Ee(),e=()=>ge($,"$config",a),n=()=>ge(m,"$limits",a),i=()=>ge(o,"$newCardsIgnoreReviewLimit",a),d=()=>ge(P,"$applyAllParentLimits",a),u=b();let c=F(t,"state",8),h=F(t,"api",8);function p(){Dt(E,r(E)[0]=new ht(or(),e().newPerDay,U=>J($,y(e).newPerDay=U,y(e)),e().newPerDay,null)),Dt(G,r(G)[0]=new ht(or(),e().reviewsPerDay,U=>J($,y(e).reviewsPerDay=U,y(e)),e().reviewsPerDay,null))}const $=c().currentConfig,m=c().deckLimits,T=c().defaults,o=c().newCardsIgnoreReviewLimit,P=c().applyAllParentLimits,w=`

`+zo()+`

`+Bo(),O=`

`+Wo()+w,x=Sr()+`

`+Go(),A=Sr()+`

`+jo(),E=b([new ht(or(),e().newPerDay,U=>J($,y(e).newPerDay=U,y(e)),e().newPerDay,null),new ht(os(),(M=n().new)!=null?M:null,U=>J(m,y(n).new=U!=null?U:void 0,y(n)),null,null),new ht(is(),n().newTodayActive&&(k=n().newToday)!=null?k:null,U=>J(m,y(n).newToday=U!=null?U:void 0,y(n)),null,(z=n().newToday)!=null?z:null)]),G=b([new ht(or(),e().reviewsPerDay,U=>J($,y(e).reviewsPerDay=U,y(e)),e().reviewsPerDay,null),new ht(os(),(q=n().review)!=null?q:null,U=>J(m,y(n).review=U!=null?U:void 0,y(n)),null,null),new ht(is(),n().reviewTodayActive&&(se=n().reviewToday)!=null?se:null,U=>J(m,y(n).reviewToday=U!=null?U:void 0,y(n)),null,(Z=n().reviewToday)!=null?Z:null)]);let W=b(0),L=b(0);const D={newLimit:{title:Fs(),help:qo()+w,url:ye.DeckOptions.newCardsday},reviewLimit:{title:Vs(),help:Uo()+O,url:ye.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Hs(),help:x,url:ye.DeckOptions.newCardsday},applyAllParentLimits:{title:Qo(),help:A,url:ye.DeckOptions.newCardsday}},N=Object.values(D);let S=b(),_=b();function l(U){r(S).show(),r(_).to(U)}ne(()=>(r(W),r(L),ct),()=>{g(u,Math.min(9999,r(W)*10)>r(L)?Yo({cards:r(W),expected:Math.min(9999,r(W)*10)}):"")}),ze(),_e();var H=fe(()=>ls());return st(s,{get title(){return r(H)},children:(U,de)=>{it(U,{slotHost:K,get api(){return h()},children:(ke,ue)=>{var be=Sd(),xe=oe(be);K(xe,{children:(he,Le)=>{Ke(he,{get defaultValue(){return T.newPerDay},get value(){return r(W)},set value(ae){g(W,ae)},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>l(Object.keys(D).indexOf("newLimit"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,D.newLimit.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ae,Me)=>{bs(ae,{slot:"tabs",get tabs(){return r(E)},get value(){return r(W)},set value(me){g(W,me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var ce=f(xe,2);K(ce,{children:(he,Le)=>{Ke(he,{get defaultValue(){return T.reviewsPerDay},get value(){return r(L)},set value(ae){g(L,ae)},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>l(Object.keys(D).indexOf("reviewLimit"))},children:(me,Xe)=>{te();var Oe=Y();R(()=>V(Oe,D.reviewLimit.title)),v(me,Oe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ae,Me)=>{bs(ae,{slot:"tabs",get tabs(){return r(G)},get value(){return r(L)},set value(me){g(L,me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var $e=f(ce,2);K($e,{children:(he,Le)=>{He(he,{get warning(){return r(u)}})},$$slots:{default:!0}});var Se=f($e,2);K(Se,{children:(he,Le)=>{Ge(he,{defaultValue:!1,get value(){return wt(),i()},set value(ae){dt(o,ae)},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>l(Object.keys(D).indexOf("newCardsIgnoreReviewLimit"))},children:(me,Xe)=>{_t(me,{get title(){return D.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var je=f(Se,2);K(je,{children:(he,Le)=>{Ge(he,{defaultValue:!1,get value(){return wt(),d()},set value(ae){dt(P,ae)},children:(ae,Me)=>{ee(ae,{$$events:{click:()=>l(Object.keys(D).indexOf("applyAllParentLimits"))},children:(me,Xe)=>{_t(me,{get title(){return D.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(ke,be)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(U,de)=>{var ke=fe(()=>ls());ft(U,{get title(){return r(ke)},get url(){return ye.DeckOptions.dailyLimits},slot:"tooltip",helpSections:N,$$events:{mount:ue=>{g(S,ue.detail.modal),g(_,ue.detail.carousel)}}})}}}),qe(t,"onPresetChange",p),we({onPresetChange:p})}var Rd=X("<!> <!> <!> <!> <!>",1);function Td(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(u,"$config",a),n=()=>ge(h,"$fsrs",a);let i=F(t,"state",8),d=F(t,"api",8);const u=i().currentConfig,c=i().defaults,h=i().fsrs,p=`

`+Ko();let $=b([]);const m={newGatherPriority:{title:Xo(),help:Zo()+p},newCardSortOrder:{title:Jo(),help:ei()+p},newReviewPriority:{title:ti(),help:ri()+p},interdayStepPriority:{title:si(),help:ni()+p},reviewSortOrder:{title:zs(),help:ai()+p}},T=Object.values(m);let o=b(),P=b();function w(x){r(o).show(),r(P).to(x)}ne(()=>(e(),r($),vt),()=>{switch(e().newCardGatherPriority){case vt.RANDOM_NOTES:g($,[nt.TEMPLATE_THEN_RANDOM,nt.RANDOM_NOTE_THEN_TEMPLATE]);break;case vt.RANDOM_CARDS:g($,[nt.TEMPLATE_THEN_RANDOM,nt.RANDOM_NOTE_THEN_TEMPLATE,nt.RANDOM_CARD]);break;default:g($,[]);break}r($).includes(e().newCardSortOrder)&&J(u,y(e).newCardSortOrder=0,y(e)),e().newCardSortOrder in nt||J(u,y(e).newCardSortOrder=0,y(e))}),ze(),_e();var O=fe(()=>us());st(s,{get title(){return r(O)},children:(x,A)=>{it(x,{slotHost:K,get api(){return d()},children:(E,G)=>{var W=Rd(),L=oe(W);K(L,{children:(l,H)=>{var M=fe(ed);at(l,{get defaultValue(){return c.newCardGatherPriority},get choices(){return r(M)},get value(){return e().newCardGatherPriority},set value(k){J(u,y(e).newCardGatherPriority=k,y(e))},children:(k,z)=>{ee(k,{$$events:{click:()=>w(Object.keys(m).indexOf("newGatherPriority"))},children:(q,se)=>{te();var Z=Y();R(()=>V(Z,m.newGatherPriority.title)),v(q,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=f(L,2);K(D,{children:(l,H)=>{var M=fe(td);at(l,{get defaultValue(){return c.newCardSortOrder},get choices(){return r(M)},get disabledChoices(){return r($)},get value(){return e().newCardSortOrder},set value(k){J(u,y(e).newCardSortOrder=k,y(e))},children:(k,z)=>{ee(k,{$$events:{click:()=>w(Object.keys(m).indexOf("newCardSortOrder"))},children:(q,se)=>{te();var Z=Y();R(()=>V(Z,m.newCardSortOrder.title)),v(q,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var N=f(D,2);K(N,{children:(l,H)=>{var M=fe(ks);at(l,{get defaultValue(){return c.newMix},get choices(){return r(M)},get value(){return e().newMix},set value(k){J(u,y(e).newMix=k,y(e))},children:(k,z)=>{ee(k,{$$events:{click:()=>w(Object.keys(m).indexOf("newReviewPriority"))},children:(q,se)=>{te();var Z=Y();R(()=>V(Z,m.newReviewPriority.title)),v(q,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=f(N,2);K(S,{children:(l,H)=>{var M=fe(ks);at(l,{get defaultValue(){return c.interdayLearningMix},get choices(){return r(M)},get value(){return e().interdayLearningMix},set value(k){J(u,y(e).interdayLearningMix=k,y(e))},children:(k,z)=>{ee(k,{$$events:{click:()=>w(Object.keys(m).indexOf("interdayStepPriority"))},children:(q,se)=>{te();var Z=Y();R(()=>V(Z,m.interdayStepPriority.title)),v(q,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=f(S,2);K(_,{children:(l,H)=>{var M=fe(()=>cn(n()));at(l,{get defaultValue(){return c.reviewOrder},get choices(){return r(M)},get value(){return e().reviewOrder},set value(k){J(u,y(e).reviewOrder=k,y(e))},children:(k,z)=>{ee(k,{$$events:{click:()=>w(Object.keys(m).indexOf("reviewSortOrder"))},children:(q,se)=>{te();var Z=Y();R(()=>V(Z,m.reviewSortOrder.title)),v(q,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(E,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,A)=>{var E=fe(()=>us());ft(x,{get title(){return r(E)},get url(){return ye.DeckOptions.displayOrder},slot:"tooltip",helpSections:T,$$events:{mount:G=>{g(o,G.detail.modal),g(P,G.detail.carousel)}}})}}}),we()}var Ad=X('<textarea class="w-100 svelte-29jwoy"></textarea>');function Dd(s,t){Ce(t,!1);let a=F(t,"value",12),e=F(t,"defaults",8),n=b(),i=b();function d(){r(i)&&(Dt(i,r(i).style.height="auto"),Dt(i,r(i).style.height=`${r(i).scrollHeight+2}px`))}function u($){return $.map(m=>m.toFixed(4)).join(", ")}const c=[0,17,19,21];function h($){const m=$.target,T=m.value.replace(/ /g,"").split(",").filter(o=>o).map(o=>Number(o));c.includes(T.length)?a(T):(alert(oi()),m.value=r(n))}ne(()=>(Be(a()),Ct),()=>{g(n,u(a())),Ct().then(d)}),ze(),_e();var p=Ad();Pe("resize",ra,d),Ts(p),R(()=>Ze(p,"placeholder",u(e()))),It(p,$=>g(i,$),()=>r(i)),R(()=>Er(p,r(n))),Pe("blur",p,h),v(s,p),we()}var Id=X("<!> <!>",1);function Ed(s,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),n=F(t,"defaults",8);var i=Id(),d=oe(i);mt(d,t,"default",{});var u=f(d,2);kt(u,{children:(c,h)=>{Dd(c,{get defaults(){return n()},get value(){return a()},set value(p){a(p)},$$legacy:!0})},$$slots:{default:!0,revert:(c,h)=>{Jt(c,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(p){a(p)},$$legacy:!0})}}}),v(s,i)}var Ld=X('<input type="text" class="w-100 mb-1">');function Md(s,t){let a=F(t,"value",12),e=F(t,"placeholder",8);kt(s,{children:(n,i)=>{var d=Ld();$t(d),R(()=>Ze(d,"placeholder",e())),er(d,a),v(n,d)},$$slots:{default:!0}})}var Ye=(s=>(s[s.time=0]="time",s[s.count=1]="count",s[s.memorized=2]="memorized",s))(Ye||{});function Pr(s,t,a,e){const n=vs(s);if(n.selectAll(".lines").remove(),n.selectAll(".hover-columns").remove(),n.selectAll(".focus-line").remove(),n.selectAll(".legend").remove(),a.length==0)return $s(n,!1),[];const i=n.transition().duration(600),d=new Date,u=a.map(l=>({...l,date:new Date(d.getTime()+l.x*24*60*60*1e3)})),c=d,h=hs(u,l=>l.date),p=Ou().domain([c,h]).range([t.marginLeft,t.width-t.marginRight]);n.select(".x-ticks").call(l=>l.transition(i).call(lu(p).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const $=l=>e==0?wr(l,!0):l.toString(),m={1:u.map(l=>({...l,y:l.count})),0:u.map(l=>({...l,y:l.timeCost})),2:u.map(l=>({...l,y:l.memorized}))}[e],T=hs(m,l=>l.y),o=uu().range([t.height-t.marginBottom,t.marginTop]).domain([0,T]).nice();n.select(".y-ticks").call(l=>l.transition(i).call(cu(o).ticks(t.height/50).tickSizeOuter(0).tickFormat($))).attr("direction","ltr"),n.select(".y-ticks .y-axis-title").remove(),n.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const P=m.map(l=>[p(l.date),o(l.y),l.label]),w=Lu(P,l=>Object.assign(l,{z:l[0][2]}),l=>l[2]),O=Nu;n.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(w.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(l,H)=>O[H%O.length]).attr("d",l=>du()(l[1].map(H=>[H[0],H[1]]))).attr("data-group",l=>l[0]);const x=n.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),A=Array.from(w.values()).reduce((l,H)=>l.length>H.length?l:H),E=t.width/A.length;n.append("g").attr("class","hover-columns").selectAll("rect").data(A).join("rect").attr("x",l=>l[0]-E/2).attr("y",t.marginTop).attr("width",E).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",W).on("mouseout",()=>{x.style("opacity",0),ms()});const G={0:wr,1:l=>Bs({reviews:Math.round(l)}),2:l=>ui({memorized:Math.round(l).toFixed(0)})}[e];function W(l,H){fu(l,document.body);const M=p.invert(H[0]),k={};w.forEach((se,Z)=>{const U=gu(ue=>p.invert(ue[0])).left,de=U(se,M),ke=se[de];ke&&(k[Z]=o.invert(ke[1]))}),x.attr("x1",H[0]).attr("x2",H[0]).style("opacity",1);const z=+((M.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let q=`Date: ${Kn(M)}<br>In ${z} Days<br>`;for(const[se,Z]of Object.entries(k))n.select(`path[data-group="${se}"]`).classed("hidden")||(q+=`<span style="color:${O[(parseInt(se)-1)%O.length]}">■</span> #${se}: ${G(Z)}<br>`);ps(q,l.pageX,l.pageY)}const L=n.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(w.keys())).join("g").attr("transform",(l,H)=>`translate(0,${H*20})`).attr("cursor","pointer").on("click",(l,H)=>S(l,H)).on("mousemove",N).on("mouseout",ms),D={1:ci,0:({count:l})=>wr(l),2:di}[e];function N(l,H){const M=m.filter(q=>q.label==H),k=e==2?M[M.length-1].memorized-M[0].memorized:gc(M,q=>q.y),z=k/((M==null?void 0:M.length)||1);ps(`#${H}:<br/>
                ${ii()}: ${D({count:z})}<br/>
                ${li()}: ${G(k)}`,l.pageX,l.pageY)}L.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(l,H)=>O[H%O.length]),L.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(l=>`#${l}`);const S=(l,H)=>{const M=H,k=n.select(`path[data-group="${M}"]`),z=k.classed("hidden"),q=l.currentTarget;k.classed("hidden",!z),k.style("display",()=>z?null:"none"),vs(q).select("rect").style("opacity",z?1:.5)};return $s(n,!0),[]}var Nd=X('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"></td></tr>'),Fd=X('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function dn(s,t){Ce(t,!1);const a=[fi(),gi(),vi(),$i(),hi(),mi(),pi()];let e=F(t,"values",28,()=>[0,0,0,0,0,0,0]);_e(),K(s,{children:(n,i)=>{var d=Fd(),u=j(d),c=j(u),h=j(c),p=f(j(h)),$=j(p),m=j($,!0);R(()=>V(m,yi())),I($),I(p);var T=f(p),o=j(T),P=j(o,!0);R(()=>V(P,Ci())),I(o),I(T);var w=f(T),O=j(w),x=j(O,!0);R(()=>V(x,wi())),I(O),I(w),I(h),I(c);var A=f(c);Xt(A,5,()=>a,ur,(E,G,W)=>{var L=Nd(),D=j(L),N=j(D,!0);I(D);var S=f(D),_=j(S);$t(_),Ze(_,"step",.5),Ze(_,"max",1),Ze(_,"min",0),I(S),I(L),R(()=>V(N,r(G))),er(_,()=>e()[W],l=>e(e()[W]=l,!0)),v(E,L)}),I(A),I(u),I(d),v(n,d)},$$slots:{default:!0}}),we()}var Vd=X(" <!>",1),Hd=X("<div> </div>"),zd=X('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label>',1),Bd=X('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),Wd=X('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!> <!> <!> <!></details> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Gd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(E,"$config",a),n=()=>ge(D,"$fsrs",a),i=()=>ge(H,"$newCardsIgnoreReviewLimit",a),d=b(),u=b(),c=b(),h=b(),p=b(),$=b(),m=[];let T=F(t,"state",8),o=F(t,"simulateFsrsRequest",12),P=F(t,"computing",8),w=F(t,"openHelpModal",8),O=F(t,"onPresetChange",8),x=b(Ps),A=b(r(x));const E=T().currentConfig;let G=b(Ye.count),W=b([]),L=b(!1);const D=T().fsrs,N=yu();let S=b(null),_=0,l=b([]);const H=T().newCardsIgnoreReviewLimit;let M=b(!0),k=b(e().leechAction==Tt.SUSPEND),z=b(e().leechThreshold),q=b(null),se=b(!1),Z=b(void 0);function U(C,Q){const re=[];for(let le=0;le<C.length;le++){let ie=0,Re=0;for(let Ie=Math.max(0,le-Q+1);Ie<=le;Ie++)ie+=C[Ie],Re++;re.push(ie/Re)}return re}function de(C,Q){return C.map((re,le)=>re+Q[le])}function ke(C){return C?Li({num:C.toFixed(2)}):""}function ue(){o(o().daysToSimulate=r(d),!0),o(o().deckSize=r(u),!0),o(o().suspendAfterLapseCount=r(k)?r(z):void 0,!0),o(o().easyDaysPercentages=r($),!0)}function be(C){return C?Mi({count:C.current}):""}async function xe(){let C;ue();try{await Rr(async()=>{g(se,!0),C=await Ln(o())},Q=>{Q.value.case==="computeRetention"&&g(Z,Q.value.value)})}finally{g(se,!1),C&&g(q,C.optimalRetention)}}async function ce(){let C;ue();try{await Rr(async()=>{g(L,!0),C=await Mn(o())},()=>{})}finally{if(g(L,!1),C){_+=1;const Q=de(C.dailyReviewCount,C.dailyNewCount),re=C.accumulatedKnowledgeAcquisition;g(l,r(l).concat(C.dailyTimeCost.map((le,ie)=>({x:ie,timeCost:le,count:Q[ie],memorized:re[ie],label:_})))),g(W,Pr(r(S),N,r(l),r(G)))}}}function $e(){g(l,r(l).filter(C=>C.label!==_)),_=Math.max(0,_-1),g(W,Pr(r(S),N,r(l),r(G)))}let Se=F(t,"modal",12,null);function je(C){return Se(new Zs(C)),{destroy(){var Q;(Q=Se())==null||Q.dispose(),Se(null)}}}ne(()=>(Be(o()),r(x),r(A),Zr),()=>{var C;if((C=o())!=null&&C.target&&r(x)!==r(A)){switch(r(x)){case"memorized":o(o().target.kind={case:"memorized",value:new xr({lossAversion:1.6})},!0);break;case"stability":o(o().target.kind={case:"stability",value:new Fn({})},!0);break;case"futureMemorized":o(o().target.kind={case:"futureMemorized",value:new Nn({days:365})},!0);break;case"averageFutureMemorized":o(o().target.kind={case:"averageFutureMemorized",value:new Zr({days:365})},!0);break}g(A,r(x))}}),ne(()=>{},()=>{g(d,365)}),ne(()=>{},()=>{g(u,0)}),ne(()=>r(d),()=>{g(c,Math.ceil(r(d)/365))}),ne(()=>(r(L),r(se)),()=>{g(h,r(L)||r(se))}),ne(()=>r(Z),()=>{g(p,be(r(Z)))}),ne(()=>(r(S),r(l),r(M),r(c),r(G)),()=>{if(r(S)){let C=r(l);if(r(M)){const Q=r(l).reduce((re,le)=>(re[le.label]=re[le.label]||[],re[le.label].push(le),re),{});C=Object.values(Q).flatMap(re=>{const le=U(re.map(Ie=>Ie.timeCost),r(c)),ie=U(re.map(Ie=>Ie.count),r(c)),Re=U(re.map(Ie=>Ie.memorized),r(c));return re.map((Ie,gt)=>({...Ie,timeCost:le[gt],count:ie[gt],memorized:Re[gt]}))})}g(W,Pr(r(S),N,C,r(G)))}}),ne(()=>e(),()=>{g($,[...e().easyDaysPercentages])}),ze(),_e();var he=Wd(),Le=j(he),ae=j(Le),Me=j(ae),me=j(Me),Xe=j(me,!0);R(()=>V(Xe,Ws())),I(me);var Oe=f(me,2);I(Me);var Et=f(Me,2),Lt=j(Et);Ke(Lt,{defaultValue:365,min:1,max:3650,get value(){return r(d)},set value(C){g(d,C)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,_i())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Mt=f(Lt,2);Ke(Mt,{defaultValue:0,min:0,max:1e5,get value(){return r(u)},set value(C){g(u,C)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,ki())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=f(Mt,2);rt(Nt,{get defaultValue(){return e().desiredRetention},min:.7,max:.99,percentage:!0,get value(){return o().desiredRetention},set value(C){o(o().desiredRetention=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("desiredRetention")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,Lr())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var tr=f(Nt,2);Ke(tr,{get defaultValue(){return e().newPerDay},min:0,max:9999,get value(){return o().newLimit},set value(C){o(o().newLimit=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,Fs())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=f(tr,2);Ke(Ft,{get defaultValue(){return e().reviewsPerDay},min:0,max:9999,get value(){return o().reviewLimit},set value(C){o(o().reviewLimit=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,Vs())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var lt=f(Ft,2),Vt=j(lt),dr=j(Vt,!0);R(()=>V(dr,Gs())),I(Vt);var fr=f(Vt,2);iu(fr,()=>r($),C=>{dn(C,{get values(){return r($)},set values(Q){g($,Q)},$$legacy:!0})}),I(lt);var Pt=f(lt,2),bt=j(Pt),gr=j(bt,!0);R(()=>V(gr,Pi())),I(bt);var rr=f(bt,2);Ke(rr,{get defaultValue(){return e().maximumReviewInterval},min:1,max:36500,get value(){return o().maxInterval},set value(C){o(o().maxInterval=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,Is())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var sr=f(rr,2),Ht=fe(()=>cn(n()));at(sr,{get defaultValue(){return e().reviewOrder},get choices(){return r(Ht)},get value(){return o().reviewOrder},set value(C){o(o().reviewOrder=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,zs())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var zt=f(sr,2);Ge(zt,{get defaultValue(){return i()},get value(){return o().newCardsIgnoreReviewLimit},set value(C){o(o().newCardsIgnoreReviewLimit=C,!0)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{var ie=fe(()=>Hs());_t(re,{get title(){return r(ie)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var xt=f(zt,2);Ge(xt,{defaultValue:!0,get value(){return r(M)},set value(C){g(M,C)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,bi())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var nr=f(xt,2),Bt=fe(()=>e().leechAction==Tt.SUSPEND);Ge(nr,{get defaultValue(){return r(Bt)},get value(){return r(k)},set value(C){g(k,C)},children:(C,Q)=>{ee(C,{$$events:{click:()=>w()("simulateFsrsReview")},children:(re,le)=>{te();var ie=Y();R(()=>V(ie,xi())),v(re,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Wt=f(nr,2);{var vr=C=>{Ke(C,{get defaultValue(){return e().leechThreshold},min:1,max:9999,get value(){return r(z)},set value(Q){g(z,Q)},children:(Q,re)=>{ee(Q,{$$events:{click:()=>w()("simulateFsrsReview")},children:(le,ie)=>{te();var Re=Y();R(()=>V(Re,js())),v(le,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(Wt,C=>{r(k)&&C(vr)})}I(Pt);var Gt=f(Pt,2),B=j(Gt),pe=j(B,!0);R(()=>V(pe,qs())),I(B);var De=f(B,2),et=j(De);{var Ae=C=>{var Q=Y();R(()=>V(Q,Us())),v(C,Q)},yt=C=>{var Q=Y();R(()=>V(Q,Si())),v(C,Q)};Te(et,C=>{r(se)?C(Ae):C(yt,!1)})}I(De);var ut=f(De,2);{var $r=C=>{var Q=Vd(),re=oe(Q);R(()=>{var Re;return V(re,`${(Re=ke(r(q)))!=null?Re:""} `)});var le=f(re);{var ie=Re=>{var Ie=fe(()=>Ni());He(Re,{get warning(){return r(Ie)},className:"alert-warning"})};Te(le,Re=>{r(q)-e().desiredRetention>=.01&&Re(ie)})}v(C,Q)};Te(ut,C=>{r(q)&&C($r)})}var Hr=f(ut,2);{var gn=C=>{var Q=Hd(),re=j(Q,!0);I(Q),R(()=>V(re,r(p))),v(C,Q)};Te(Hr,C=>{r(se)&&C(gn)})}var zr=f(Hr,2);K(zr,{children:(C,Q)=>{var re=fe(od);at(C,{get choices(){return r(re)},defaultValue:Ps,get value(){return r(x)},set value(le){g(x,le)},children:(le,ie)=>{ee(le,{children:(Re,Ie)=>{te();var gt=Y();gt.nodeValue="Target: ",v(Re,gt)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Br=f(zr,2);{var vn=C=>{rt(C,{defaultValue:1.6,get value(){return o().target.kind.value.lossAversion},set value(Q){o(o().target.kind.value.lossAversion=Q,!0)},children:(Q,re)=>{ee(Q,{children:(le,ie)=>{te();var Re=Y();Re.nodeValue="Fail Cost Multiplier: ",v(le,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(Br,C=>{var Q;((Q=o().target)==null?void 0:Q.kind.case)==="memorized"&&C(vn)})}var $n=f(Br,2);{var hn=C=>{rt(C,{defaultValue:365,step:1,get value(){return o().target.kind.value.days},set value(Q){o(o().target.kind.value.days=Q,!0)},children:(Q,re)=>{ee(Q,{children:(le,ie)=>{te();var Re=Y();Re.nodeValue="Days after simulation end: ",v(le,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te($n,C=>{var Q,re;(((Q=o().target)==null?void 0:Q.kind.case)==="futureMemorized"||((re=o().target)==null?void 0:re.kind.case)==="averageFutureMemorized")&&C(hn)})}I(Gt);var St=f(Gt,2),mn=j(St,!0);R(()=>V(mn,Oi())),I(St);var Ot=f(St,2),pn=j(Ot,!0);R(()=>V(pn,Ri())),I(Ot);var Rt=f(Ot,2),yn=j(Rt,!0);R(()=>V(yn,Ti())),I(Rt);var Wr=f(Rt,2);{var Cn=C=>{var Q=Y();R(()=>V(Q,Ai())),v(C,Q)};Te(Wr,C=>{r(h)&&C(Cn)})}var wn=f(Wr,2);vu(wn,{children:(C,Q)=>{var re=Bd(),le=oe(re),ie=j(le);$u(ie,{children:(hr,_f)=>{var qr=zd(),mr=oe(qr),jt=j(mr);$t(jt);var Ur,Pn=f(jt);R(()=>{var Qe;return V(Pn,` ${(Qe=Di())!=null?Qe:""}`)}),I(mr);var pr=f(mr,2),qt=j(pr);$t(qt);var Qr,bn=f(qt);R(()=>{var Qe;return V(bn,` ${(Qe=Ii())!=null?Qe:""}`)}),I(pr);var Yr=f(pr,2),Ut=j(Yr);$t(Ut);var Kr,xn=f(Ut);R(()=>{var Qe;return V(xn,` ${(Qe=Ei())!=null?Qe:""}`)}),I(Yr),R(()=>{Ur!==(Ur=Ye.count)&&(jt.value=(jt.__value=Ye.count)==null?"":Ye.count),Qr!==(Qr=Ye.time)&&(qt.value=(qt.__value=Ye.time)==null?"":Ye.time),Kr!==(Kr=Ye.memorized)&&(Ut.value=(Ut.__value=Ye.memorized)==null?"":Ye.memorized)}),Cr(m,[],jt,()=>(Ye.count,r(G)),Qe=>g(G,Qe)),Cr(m,[],qt,()=>(Ye.time,r(G)),Qe=>g(G,Qe)),Cr(m,[],Ut,()=>(Ye.memorized,r(G)),Qe=>g(G,Qe)),v(hr,qr)},$$slots:{default:!0}}),I(le);var Re=f(le,2),Ie=j(Re),gt=j(Ie);ku(gt);var Gr=f(gt);hu(Gr);var jr=f(Gr);mu(jr,{bounds:N});var _n=f(jr);pu(_n,{bounds:N}),I(Ie),It(Ie,hr=>g(S,hr),()=>r(S)),I(Re);var kn=f(Re,2);Pu(kn,{get tableData(){return r(W)}}),R(()=>Ze(Ie,"viewBox",`0 0 ${N.width} ${N.height}`)),v(C,re)},$$slots:{default:!0}}),I(Et),I(ae),I(Le),I(he),en(he,C=>je==null?void 0:je(C)),R(()=>{var C,Q,re,le;Kt(De,`btn ${(C=r(se)?"btn-warning":"btn-primary")!=null?C:""} svelte-18vh0ci`),De.disabled=!r(se)&&P(),Kt(St,`btn ${(Q=P()?"btn-warning":"btn-primary")!=null?Q:""} svelte-18vh0ci`),St.disabled=P(),Kt(Ot,`btn ${(re=P()?"btn-warning":"btn-primary")!=null?re:""} svelte-18vh0ci`),Ot.disabled=P(),Kt(Rt,`btn ${(le=P()?"btn-warning":"btn-primary")!=null?le:""} svelte-18vh0ci`),Rt.disabled=P()}),Pe("click",Oe,()=>{var C;return(C=Se())==null?void 0:C.hide()}),Pe("click",De,()=>xe()),Pe("click",St,ce),Pe("click",Ot,$e),Pe("click",Rt,()=>{J(E,y(e).newPerDay=o().newLimit,y(e)),J(E,y(e).reviewsPerDay=o().reviewLimit,y(e)),J(E,y(e).maximumReviewInterval=o().maxInterval,y(e)),J(E,y(e).desiredRetention=o().desiredRetention,y(e)),dt(H,o().newCardsIgnoreReviewLimit),J(E,y(e).reviewOrder=o().reviewOrder,y(e)),J(E,y(e).leechAction=r(k)?Tt.SUSPEND:Tt.TAG_ONLY,y(e)),J(E,y(e).leechThreshold=r(z),y(e)),J(E,y(e).easyDaysPercentages=[...r($)],y(e)),O()()}),v(s,he),we()}var jd=X('<!> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!>',1);function qd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(S,"$daysSinceLastOptimization",a),n=()=>ge(L,"$config",a),i=()=>ge(r(P),"$newCardsIgnoreReviewLimit",a),d=()=>ge(se,"$healthCheck",a),u=()=>ge(N,"$fsrsReschedule",a),c=b(),h=b(),p=b(),$=b(),m=b(),T=b(),o=b(),P=b(),w=b(),O=b(),x=b();let A=F(t,"state",8),E=F(t,"openHelpModal",8),G=F(t,"onPresetChange",8),W=F(t,"newlyEnabled",8,!1);const L=A().currentConfig,D=A().defaults,N=A().fsrsReschedule,S=A().daysSinceLastOptimization;let _=b(!1),l=b(!1),H=b(!1);const M=n().desiredRetention.toFixed(2);let k=b(),z=b(!1),q=b(!1);const se=A().fsrsHealthCheck;let Z=b(void 0);const U=100;let de=b("");const ke=.8,ue=.95;function be(B){return B<ke?qi():B>ue?Ui():""}async function xe(B,pe){if(+M==r(m)){g(de,Qi());return}const De=new Wn({w:pe,search:r($),before:+M,after:B}),et=await Gn(De);g(de,Yi({factor:et.factor.toFixed(2),previousDr:(+M*100).toString()}))}function ce(B){return B<.7||B>.97?"alert-danger":B<ke||B>ue?"alert-warning":"alert-info"}function $e(){return BigInt(n().ignoreRevlogsBeforeDate?new Date(n().ignoreRevlogsBeforeDate).getTime():0)}async function Se(){if(r(z)){await Vn({});return}if(A().presetAssignmentsChanged()){alert(Fi());return}g(z,!0),g(k,void 0);try{await Rr(async()=>{const B=_r(n()),pe=n().relearnSteps;let De=0,et=0;for(let ut=0;ut<pe.length&&(et+=pe[ut],!(et>=1440));ut++)De++;const Ae=await Hn({search:n().paramSearch?n().paramSearch:r($),ignoreRevlogsBeforeMs:$e(),currentParams:B,numOfRelearningSteps:De,healthCheck:d()}),yt=B.length&&B.every((ut,$r)=>ut.toFixed(4)===Ae.params[$r].toFixed(4))||Ae.params.length===0;if(Ae.healthCheckPassed!==void 0)Ae.healthCheckPassed?setTimeout(()=>alert(Vi()),200):setTimeout(()=>alert(Hi()),200);else if(yt){const ut=Ae.fsrsItems?zi():Bi();setTimeout(()=>alert(ut),200)}yt||(J(L,y(n).fsrsParams6=Ae.params,y(n)),setTimeout(()=>{g(H,!0)},201)),r(k)&&Dt(k,r(k).current=r(k).total)},B=>{B.value.case==="computeParams"&&g(k,B.value.value)})}finally{g(z,!1)}}function je(B){if(!B||!B.total)return"";const pe=(B.current/B.total*100).toFixed(1);return B instanceof jn?`${pe}%`:B.current===B.total?Ki():Xi({pct:pe,reviews:B.reviews})}async function he(){await Vr(),A().save(ir.COMPUTE_ALL_PARAMS)}let Le=b();ne(()=>(e(),ct),()=>{g(c,e()>30?Wi():"")}),ne(()=>r(_),()=>{r(_)&&g(l,!0)}),ne(()=>(Be(W()),r(l),r(H)),()=>{g(h,W()||r(l)||r(H))}),ne(()=>(r(z),r(q)),()=>{g(p,r(z)||r(q))}),ne(()=>Be(A()),()=>{g($,`preset:"${A().getCurrentNameForSearch()}" -is:suspended`)}),ne(()=>n(),()=>{g(m,Number(n().desiredRetention.toFixed(2)))}),ne(()=>r(m),()=>{g(T,be(r(m)))}),ne(()=>(r(Z),r(h),r(m),n()),()=>{clearTimeout(r(Z)),r(h)?g(Z,setTimeout(()=>{xe(r(m),_r(n()))},U)):g(de,"")}),ne(()=>r(m),()=>{g(o,ce(r(m)))}),ne(()=>Be(A()),()=>{Vl(g(P,A().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ne(()=>(n(),Be(A()),i(),xr),()=>{g(w,new zn({params:_r(n()),desiredRetention:n().desiredRetention,newLimit:n().newPerDay,reviewLimit:n().reviewsPerDay,maxInterval:n().maximumReviewInterval,search:`preset:"${A().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:i(),easyDaysPercentages:n().easyDaysPercentages,reviewOrder:n().reviewOrder,target:new Bn({kind:{case:"memorized",value:new xr({lossAversion:1.6})}})}))}),ne(()=>r(k),()=>{g(O,je(r(k)))}),ne(()=>r(k),()=>{var B,pe;g(x,(pe=(B=r(k))==null?void 0:B.reviews)!=null?pe:void 0)}),ze(),_e();var ae=jd(),Me=oe(ae);rt(Me,{get defaultValue(){return D.desiredRetention},min:.7,max:.99,percentage:!0,get value(){return n().desiredRetention},set value(B){J(L,y(n).desiredRetention=B,y(n))},get focused(){return r(_)},set focused(B){g(_,B)},children:(B,pe)=>{ee(B,{$$events:{click:()=>E()("desiredRetention")},children:(De,et)=>{te();var Ae=Y();R(()=>V(Ae,Lr())),v(De,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var me=f(Me,2);He(me,{get warning(){return r(de)},className:"alert-info two-line"});var Xe=f(me,2);He(Xe,{get warning(){return r(T)},get className(){return r(o)}});var Oe=f(Xe,2),Et=j(Oe);Ed(Et,{defaultValue:[],get defaults(){return D.fsrsParams6},get value(){return n().fsrsParams6},set value(B){J(L,y(n).fsrsParams6=B,y(n))},children:(B,pe)=>{ee(B,{$$events:{click:()=>E()("modelParams")},children:(De,et)=>{te();var Ae=Y();R(()=>V(Ae,Qs())),v(De,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Lt=f(Et,2);Md(Lt,{get placeholder(){return r($)},get value(){return n().paramSearch},set value(B){J(L,y(n).paramSearch=B,y(n))},$$legacy:!0});var Mt=f(Lt,2);Ge(Mt,{defaultValue:!1,get value(){return wt(),u()},set value(B){dt(N,B)},children:(B,pe)=>{ee(B,{$$events:{click:()=>E()("rescheduleCardsOnChange")},children:(De,et)=>{var Ae=fe(()=>Ys());_t(De,{get title(){return r(Ae)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=f(Mt,2);{var tr=B=>{var pe=fe(()=>Zi());He(B,{get warning(){return r(pe)}})};Te(Nt,B=>{u()&&B(tr)})}var Ft=f(Nt,2);Ge(Ft,{defaultValue:!1,get value(){return wt(),d()},set value(B){dt(se,B)},children:(B,pe)=>{ee(B,{$$events:{click:()=>E()("healthCheck")},children:(De,et)=>{var Ae=fe(()=>Ji({text:Ks()}));_t(De,{get title(){return r(Ae)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var lt=f(Ft,2),Vt=j(lt);{var dr=B=>{var pe=Y();R(()=>V(pe,Us())),v(B,pe)},fr=B=>{var pe=Y();R(()=>V(pe,Gi())),v(B,pe)};Te(Vt,B=>{r(z)?B(dr):B(fr,!1)})}I(lt);var Pt=f(lt,2);Te(Pt,B=>{});var bt=f(Pt,2),gr=j(bt);{var rr=B=>{var pe=Y();R(()=>V(pe,r(O))),v(B,pe)},sr=B=>{var pe=Je(),De=oe(pe);{var et=Ae=>{var yt=Y();R(()=>V(yt,Bs({reviews:r(x)}))),v(Ae,yt)};Te(De,Ae=>{r(x)!==void 0&&Ae(et)},!0)}v(B,pe)};Te(gr,B=>{r(z)||r(q)?B(rr):B(sr,!1)})}I(bt),I(Oe);var Ht=f(Oe,2),zt=j(Ht);He(zt,{get warning(){return r(c)},className:"alert-warning"});var xt=f(zt,2),nr=j(xt,!0);R(()=>V(nr,ji())),I(xt),I(Ht);var Bt=f(Ht,4),Wt=j(Bt),vr=j(Wt,!0);R(()=>V(vr,Ws())),I(Wt),I(Bt);var Gt=f(Bt,2);Gd(Gt,{get state(){return A()},get simulateFsrsRequest(){return r(w)},get computing(){return r(p)},get openHelpModal(){return E()},get onPresetChange(){return G()},get modal(){return r(Le)},set modal(B){g(Le,B)},$$legacy:!0}),R(()=>{var B;Kt(lt,`btn ${(B=r(z)?"btn-warning":"btn-primary")!=null?B:""} svelte-1oyy9sz`),lt.disabled=!r(z)&&r(p)}),Pe("click",lt,()=>Se()),Pe("click",xt,()=>he()),Pe("click",Wt,()=>{var B;return(B=r(Le))==null?void 0:B.show()}),v(s,ae),we()}var Ud=X("<!> <!>",1);function Qd(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(u,"$fsrs",a);let n=F(t,"state",8),i=F(t,"api",8),d=F(t,"onPresetChange",8);const u=n().fsrs;let c=b(!1);const h={fsrs:{title:"FSRS",help:el(),url:ye.DeckOptions.fsrs},desiredRetention:{title:Lr(),help:tl()+`

`+rl(),sched:Ue.FSRS},modelParams:{title:Qs(),help:sl()+`

`+nl(),sched:Ue.FSRS},rescheduleCardsOnChange:{title:Ys(),help:al(),sched:Ue.FSRS},computeOptimalRetention:{title:qs(),help:ol(),sched:Ue.FSRS},healthCheck:{title:Ks(),help:il()+`

`+ll(),sched:Ue.FSRS}},p=Object.values(h);let $=b(),m=b();function T(o){r($).show(),r(m).to(o)}ne(()=>e(),()=>{e()||g(c,!0)}),ze(),_e(),st(s,{title:"FSRS",children:(o,P)=>{it(o,{slotHost:K,get api(){return i()},children:(w,O)=>{var x=Ud(),A=oe(x);K(A,{children:(W,L)=>{Ge(W,{defaultValue:!1,get value(){return wt(),e()},set value(D){dt(u,D)},children:(D,N)=>{ee(D,{$$events:{click:()=>T(Object.keys(h).indexOf("fsrs"))},children:(S,_)=>{_t(S,{get title(){return h.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=f(A,2);{var G=W=>{qd(W,{get state(){return n()},get newlyEnabled(){return r(c)},openHelpModal:L=>T(Object.keys(h).indexOf(L)),get onPresetChange(){return d()}})};Te(E,W=>{e()&&W(G)})}v(w,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(o,P)=>{ft(o,{title:"FSRS",get url(){return ye.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:p,$$events:{mount:w=>{g($,w.detail.modal),g(m,w.detail.carousel)}}})}}}),we()}function Yd(s,t){Ce(t,!1);let a=F(t,"html",8),e=F(t,"mounted",8);Ir(e()),_e();var n=Je(),i=oe(n);ul(i,a,!1,!1),v(s,n),we()}function Kd(s){switch(s){case ot.Seconds:return"s";case ot.Minutes:return"m";case ot.Hours:return"h";case ot.Days:return"d";default:return""}}function Xd(s){switch(s){case"s":return ot.Seconds;case"h":return ot.Hours;case"d":return ot.Days;default:return ot.Minutes}}function Zd(s){const t=s*60;let a=bu(t);return[ot.Months,ot.Years].includes(a)&&(a=ot.Days),`${Math.round(xu(a,t))}${Kd(a)}`}function Jd(s){const t=s.match(/(\d+)(.*)/);if(t){const[a,e,n]=t,i=Xd(n),d=Su(i)*parseInt(e,10);return Math.min(d,2**31)/60}else return 0}function ef(s){return s.map(Zd).join(" ")}function tf(s){return s.split(" ").map(Jd).filter(t=>t)}var rf=X('<input type="text" class="svelte-f5c9s0">');function sf(s,t){Ce(t,!1);let a=F(t,"value",12),e=b();function n(){a(tf(this.value))}ne(()=>Be(a()),()=>{g(e,ef(a()))}),ze(),_e();var i=rf();$t(i),R(()=>Er(i,r(e))),Pe("blur",i,n),v(s,i),we()}var nf=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),af=X('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function fn(s,t){let a=F(t,"value",12),e=F(t,"defaultValue",8);var n=af(),i=oe(n);We(i,()=>({"--cols":13})),Ve(i.lastChild,{children:(d,u)=>{var c=nf(),h=oe(c);We(h,()=>({"--col-size":7})),pt(h.lastChild,{breakpoint:"xs",children:($,m)=>{var T=Je(),o=oe(T);mt(o,t,"default",{}),v($,T)},$$slots:{default:!0}}),I(h);var p=f(h,2);We(p,()=>({"--col-size":6})),pt(p.lastChild,{breakpoint:"xs",children:($,m)=>{kt($,{children:(T,o)=>{sf(T,{get value(){return a()},set value(P){a(P)},$$legacy:!0})},$$slots:{default:!0,revert:(T,o)=>{Jt(T,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(P){a(P)},$$legacy:!0})}}})},$$slots:{default:!0}}),I(p),v(d,c)},$$slots:{default:!0}}),I(i),v(s,n)}var of=X("<!> <!> <!> <!> <!> <!>",1);function lf(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(u,"$config",a),n=()=>ge(h,"$fsrs",a);let i=F(t,"state",8),d=F(t,"api",24,()=>({}));const u=i().currentConfig,c=i().defaults,h=i().fsrs;let p=b(),$=b();const m={relearningSteps:{title:cl(),help:dl(),url:ye.DeckOptions.relearningSteps},minimumInterval:{title:fl(),help:gl(),url:ye.DeckOptions.minimumInterval,sched:Ue.SM2},leechThreshold:{title:js(),help:vl(),url:ye.Leeches.leeches},leechAction:{title:$l(),help:hl(),url:ye.Leeches.waiting}},T=Object.values(m);let o=b(),P=b();function w(x){r(o).show(),r(P).to(x)}ne(()=>(e(),n(),ct),()=>{const x=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;g(p,!n()&&x>e().minimumLapseInterval?ml():""),g($,n()&&x>=1?Xs():"")}),ze(),_e();var O=fe(()=>cs());st(s,{get title(){return r(O)},children:(x,A)=>{it(x,{slotHost:K,get api(){return d()},children:(E,G)=>{var W=of(),L=oe(W);K(L,{children:(M,k)=>{fn(M,{get defaultValue(){return c.relearnSteps},get value(){return e().relearnSteps},set value(z){J(u,y(e).relearnSteps=z,y(e))},children:(z,q)=>{ee(z,{$$events:{click:()=>w(Object.keys(m).indexOf("relearningSteps"))},children:(se,Z)=>{te();var U=Y();R(()=>V(U,m.relearningSteps.title)),v(se,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=f(L,2);K(D,{children:(M,k)=>{He(M,{get warning(){return r($)}})},$$slots:{default:!0}});var N=f(D,2);{var S=M=>{K(M,{children:(k,z)=>{Ke(k,{get defaultValue(){return c.minimumLapseInterval},min:1,get value(){return e().minimumLapseInterval},set value(q){J(u,y(e).minimumLapseInterval=q,y(e))},children:(q,se)=>{ee(q,{$$events:{click:()=>w(Object.keys(m).indexOf("minimumInterval"))},children:(Z,U)=>{te();var de=Y();R(()=>V(de,m.minimumInterval.title)),v(Z,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Te(N,M=>{n()||M(S)})}var _=f(N,2);K(_,{children:(M,k)=>{He(M,{get warning(){return r(p)}})},$$slots:{default:!0}});var l=f(_,2);K(l,{children:(M,k)=>{Ke(M,{get defaultValue(){return c.leechThreshold},min:1,get value(){return e().leechThreshold},set value(z){J(u,y(e).leechThreshold=z,y(e))},children:(z,q)=>{ee(z,{$$events:{click:()=>w(Object.keys(m).indexOf("leechThreshold"))},children:(se,Z)=>{te();var U=Y();R(()=>V(U,m.leechThreshold.title)),v(se,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=f(l,2);K(H,{children:(M,k)=>{var z=fe(rd);at(M,{get defaultValue(){return c.leechAction},get choices(){return r(z)},breakpoint:"md",get value(){return e().leechAction},set value(q){J(u,y(e).leechAction=q,y(e))},children:(q,se)=>{ee(q,{$$events:{click:()=>w(Object.keys(m).indexOf("leechAction"))},children:(Z,U)=>{te();var de=Y();R(()=>V(de,m.leechAction.title)),v(Z,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(E,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,A)=>{var E=fe(()=>cs());ft(x,{get title(){return r(E)},get url(){return ye.DeckOptions.lapses},slot:"tooltip",get fsrs(){return n()},helpSections:T,$$events:{mount:G=>{g(o,G.detail.modal),g(P,G.detail.carousel)}}})}}}),we()}var uf=X("<!> <!> <!> <!>",1),cf=X("<!> <!> <!> <!> <!>",1);function df(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(h,"$config",a),n=()=>ge($,"$fsrs",a),i=b(),d=b();let u=F(t,"state",8),c=F(t,"api",24,()=>({}));const h=u().currentConfig,p=u().defaults,$=u().fsrs;let m=b(),T=b();const o={learningSteps:{title:pl(),help:yl(),url:ye.DeckOptions.learningSteps},graduatingInterval:{title:Cl(),help:wl(),url:ye.DeckOptions.graduatingInterval,sched:Ue.SM2},easyInterval:{title:_l(),help:kl(),url:ye.DeckOptions.easyInterval,sched:Ue.SM2},insertionOrder:{title:Pl(),help:bl(),url:ye.DeckOptions.insertionOrder}},P=Object.values(o);let w=b(),O=b();function x(E){r(w).show(),r(O).to(E)}ne(()=>(e(),n()),()=>{const E=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;g(m,E>e().graduatingIntervalGood?xl():""),g(T,n()&&E>=1?Xs():"")}),ne(()=>(e(),ct),()=>{g(i,e().graduatingIntervalGood>e().graduatingIntervalEasy?Sl():"")}),ne(()=>(e(),ct),()=>{g(d,e().newCardInsertOrder==br.RANDOM?Ol():"")}),ze(),_e();var A=fe(()=>ds());st(s,{get title(){return r(A)},children:(E,G)=>{it(E,{slotHost:K,get api(){return c()},children:(W,L)=>{var D=cf(),N=oe(D);K(N,{children:(k,z)=>{fn(k,{get defaultValue(){return p.learnSteps},get value(){return e().learnSteps},set value(q){J(h,y(e).learnSteps=q,y(e))},children:(q,se)=>{ee(q,{$$events:{click:()=>x(Object.keys(o).indexOf("learningSteps"))},children:(Z,U)=>{te();var de=Y();R(()=>V(de,o.learningSteps.title)),v(Z,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=f(N,2);K(S,{children:(k,z)=>{He(k,{get warning(){return r(T)}})},$$slots:{default:!0}});var _=f(S,2);{var l=k=>{var z=uf(),q=oe(z);K(q,{children:(de,ke)=>{Ke(de,{get defaultValue(){return p.graduatingIntervalGood},get value(){return e().graduatingIntervalGood},set value(ue){J(h,y(e).graduatingIntervalGood=ue,y(e))},children:(ue,be)=>{ee(ue,{$$events:{click:()=>x(Object.keys(o).indexOf("graduatingInterval"))},children:(xe,ce)=>{te();var $e=Y();R(()=>V($e,o.graduatingInterval.title)),v(xe,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=f(q,2);K(se,{children:(de,ke)=>{He(de,{get warning(){return r(m)}})},$$slots:{default:!0}});var Z=f(se,2);K(Z,{children:(de,ke)=>{Ke(de,{get defaultValue(){return p.graduatingIntervalEasy},get value(){return e().graduatingIntervalEasy},set value(ue){J(h,y(e).graduatingIntervalEasy=ue,y(e))},children:(ue,be)=>{ee(ue,{$$events:{click:()=>x(Object.keys(o).indexOf("easyInterval"))},children:(xe,ce)=>{te();var $e=Y();R(()=>V($e,o.easyInterval.title)),v(xe,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=f(Z,2);K(U,{children:(de,ke)=>{He(de,{get warning(){return r(i)}})},$$slots:{default:!0}}),v(k,z)};Te(_,k=>{n()||k(l)})}var H=f(_,2);K(H,{children:(k,z)=>{var q=fe(sd);at(k,{get defaultValue(){return p.newCardInsertOrder},get choices(){return r(q)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(se){J(h,y(e).newCardInsertOrder=se,y(e))},children:(se,Z)=>{ee(se,{$$events:{click:()=>x(Object.keys(o).indexOf("insertionOrder"))},children:(U,de)=>{te();var ke=Y();R(()=>V(ke,o.insertionOrder.title)),v(U,ke)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=f(H,2);K(M,{children:(k,z)=>{He(k,{get warning(){return r(d)}})},$$slots:{default:!0}}),v(W,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(E,G)=>{var W=fe(()=>ds());ft(E,{get title(){return r(W)},get url(){return ye.DeckOptions.newCards},slot:"tooltip",helpSections:P,get fsrs(){return n()},$$events:{mount:L=>{g(w,L.detail.modal),g(O,L.detail.carousel)}}})}}}),we()}var ff=X('<div class="show-timer-switch" style="display: contents;"><!></div>'),gf=X('<div class="show-timer-switch" style="display: contents;"><!></div>'),vf=X("<!> <!> <!> <!>",1);function $f(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(u,"$config",a),n=b();let i=F(t,"state",8),d=F(t,"api",8);const u=i().currentConfig,c=i().defaults,h={maximumAnswerSecs:{title:Rl(),help:Tl()},showAnswerTimer:{title:Al(),help:Dl()},stopTimerOnAnswer:{title:Il(),help:El()}},p=Object.values(h);let $=b(),m=b();function T(P){r($).show(),r(m).to(P)}ne(()=>(e(),ct),()=>{g(n,e().capAnswerTimeToSecs>600?Ll():"")}),ze(),_e();var o=fe(()=>fs());st(s,{get title(){return r(o)},children:(P,w)=>{it(P,{slotHost:K,get api(){return d()},children:(O,x)=>{var A=vf(),E=oe(A);K(E,{children:(D,N)=>{Ke(D,{get defaultValue(){return c.capAnswerTimeToSecs},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(S){J(u,y(e).capAnswerTimeToSecs=S,y(e))},children:(S,_)=>{ee(S,{$$events:{click:()=>T(Object.keys(h).indexOf("maximumAnswerSecs"))},children:(l,H)=>{te();var M=Y();R(()=>V(M,h.maximumAnswerSecs.title)),v(l,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=f(E,2);K(G,{children:(D,N)=>{He(D,{get warning(){return r(n)}})},$$slots:{default:!0}});var W=f(G,2);K(W,{children:(D,N)=>{var S=ff(),_=j(S);Ge(_,{get defaultValue(){return c.showTimer},get value(){return e().showTimer},set value(l){J(u,y(e).showTimer=l,y(e))},children:(l,H)=>{ee(l,{$$events:{click:()=>T(Object.keys(h).indexOf("showAnswerTimer"))},children:(M,k)=>{te();var z=Y();R(()=>V(z,h.showAnswerTimer.title)),v(M,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),I(S),v(D,S)},$$slots:{default:!0}});var L=f(W,2);K(L,{children:(D,N)=>{var S=gf(),_=j(S);Ge(_,{get defaultValue(){return c.stopTimerOnAnswer},get value(){return e().stopTimerOnAnswer},set value(l){J(u,y(e).stopTimerOnAnswer=l,y(e))},children:(l,H)=>{ee(l,{$$events:{click:()=>T(Object.keys(h).indexOf("stopTimerOnAnswer"))},children:(M,k)=>{te();var z=Y();R(()=>V(z,h.stopTimerOnAnswer.title)),v(M,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),I(S),v(D,S)},$$slots:{default:!0}}),v(O,A)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,w)=>{var O=fe(()=>fs());ft(P,{get title(){return r(O)},get url(){return ye.DeckOptions.timer},slot:"tooltip",helpSections:p,$$events:{mount:x=>{g($,x.detail.modal),g(m,x.detail.carousel)}}})}}}),we()}var hf=X("<!> <!> <!>",1),mf=X('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function pf(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(T,"$config",a),n=()=>ge($,"$fsrsEnabled",a),i=()=>ge(m,"$reschedule",a),d=b(),u=b(),c=b();let h=F(t,"state",8),p=F(t,"api",8);const $=h().fsrs,m=h().fsrsReschedule,T=h().currentConfig,o=h().defaults,P=e().easyDaysPercentages.slice();ne(()=>e(),()=>{e().easyDaysPercentages.length!==7&&J(T,y(e).easyDaysPercentages=o.easyDaysPercentages.slice(),y(e))}),ne(()=>e(),()=>{g(d,e().easyDaysPercentages.some((A,E)=>A!==P[E]))}),ne(()=>(e(),ct),()=>{g(u,e().easyDaysPercentages.some(A=>A===1)?"":Ml())}),ne(()=>(r(d),n(),i(),ct),()=>{g(c,r(d)&&!(n()&&i())?Nl():"")}),ze(),_e();var w=mf(),O=f(oe(w),2),x=fe(()=>Gs());st(O,{get title(){return r(x)},children:(A,E)=>{it(A,{slotHost:K,get api(){return p()},children:(G,W)=>{var L=hf(),D=oe(L);dn(D,{get values(){return e().easyDaysPercentages},set values(_){J(T,y(e).easyDaysPercentages=_,y(e))},$$legacy:!0});var N=f(D,2);K(N,{children:(_,l)=>{He(_,{get warning(){return r(u)}})},$$slots:{default:!0}});var S=f(N,2);K(S,{children:(_,l)=>{He(_,{get warning(){return r(c)}})},$$slots:{default:!0}}),v(G,L)},$$slots:{default:!0}})},$$slots:{default:!0}}),v(s,w),we()}var yf=X("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Cf=X('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function wf(s,t){Ce(t,!1);const a=Ee(),e=()=>ge(i,"$addons",a);let n=F(t,"state",8);const i=n().addonComponents;function d(){return n().currentAuxData}function u(D){dt(i,[...e(),D])}function c(D,N){dt(i,[...e(),{component:Yd,html:D,mounted:N}])}const h={},p={},$={},m={},T={},o={},P={},w={},O={},x={};let A=b();_e();var E=Cf(),G=oe(E);Pd(G,{get state(){return n()},$$events:{presetchange(...D){var N;(N=r(A))==null||N.apply(this,D)}}});var W=f(G,2),L=j(W);return We(L,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Hl(L.lastChild,{breakpoint:"sm",class:"container-columns",children:(D,N)=>{var S=yf(),_=oe(S),l=j(_);Ve(l,{class:"row-columns",children:(ce,$e)=>{Od(ce,{get state(){return n()},api:p,get onPresetChange(){return r(A)},set onPresetChange(Se){g(A,Se)},$$legacy:!0})},$$slots:{default:!0}});var H=f(l,2);Ve(H,{class:"row-columns",children:(ce,$e)=>{df(ce,{get state(){return n()},api:$})},$$slots:{default:!0}});var M=f(H,2);Ve(M,{class:"row-columns",children:(ce,$e)=>{lf(ce,{get state(){return n()},api:m})},$$slots:{default:!0}});var k=f(M,2);Ve(k,{class:"row-columns",children:(ce,$e)=>{Td(ce,{get state(){return n()},api:o})},$$slots:{default:!0}});var z=f(k,2);Ve(z,{class:"row-columns",children:(ce,$e)=>{Qd(ce,{get state(){return n()},api:{},get onPresetChange(){return r(A)},set onPresetChange(Se){g(A,Se)},$$legacy:!0})},$$slots:{default:!0}}),I(_);var q=f(_,2),se=j(q);Ve(se,{class:"row-columns",children:(ce,$e)=>{dd(ce,{get state(){return n()},api:T})},$$slots:{default:!0}});var Z=f(se,2);Ve(Z,{class:"row-columns",children:(ce,$e)=>{Jc(ce,{get state(){return n()},api:w})},$$slots:{default:!0}});var U=f(Z,2);Ve(U,{class:"row-columns",children:(ce,$e)=>{$f(ce,{get state(){return n()},api:P})},$$slots:{default:!0}});var de=f(U,2);Ve(de,{class:"row-columns",children:(ce,$e)=>{ud(ce,{get state(){return n()},api:P})},$$slots:{default:!0}});var ke=f(de,2);{var ue=ce=>{Ve(ce,{class:"row-columns",children:($e,Se)=>{pc($e,{get state(){return n()}})},$$slots:{default:!0}})};Te(ke,ce=>{e().length&&ce(ue)})}var be=f(ke,2);Ve(be,{class:"row-columns",children:(ce,$e)=>{pf(ce,{get state(){return n()},api:x})},$$slots:{default:!0}});var xe=f(be,2);Ve(xe,{class:"row-columns",children:(ce,$e)=>{Xc(ce,{get state(){return n()},api:O})},$$slots:{default:!0}}),I(q),v(D,S)},$$slots:{default:!0}}),I(L),I(W),v(s,E),qe(t,"auxData",d),qe(t,"addSvelteAddon",u),qe(t,"addHtmlAddon",c),qe(t,"options",h),qe(t,"dailyLimits",p),qe(t,"newOptions",$),qe(t,"lapseOptions",m),qe(t,"buryOptions",T),qe(t,"displayOrder",o),qe(t,"timerOptions",P),qe(t,"audioOptions",w),qe(t,"advancedOptions",O),qe(t,"easyDays",x),we({auxData:d,addSvelteAddon:u,addHtmlAddon:c,options:h,dailyLimits:p,newOptions:$,lapseOptions:m,buryOptions:T,displayOrder:o,timerOptions:P,audioOptions:w,advancedOptions:O,easyDays:x})}function ug(s,t){Ce(t,!1);let a=F(t,"data",8),e=b();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Vr(),(!await a().state.isModified()||confirm(Fl()))&&qn({})},Ir(()=>{globalThis.$deckOptions=new Promise((n,i)=>{n(r(e))}),a().state.resolveOriginalConfigs(),Un({})}),_e(),It(wf(s,{get state(){return a().state},$$legacy:!0}),n=>g(e,n),()=>r(e)),we()}export{ug as component,lg as universal};
