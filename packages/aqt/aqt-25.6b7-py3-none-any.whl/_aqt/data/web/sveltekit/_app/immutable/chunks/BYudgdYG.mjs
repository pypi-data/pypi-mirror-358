import"./Bg9kRutz.mjs";import{i as H}from"./DTpo0kgr.mjs";import{p as L,l as O,T as D,a as G,e as j,f as z,c as p,d as U,g as t,s as $,h as _,V as P,r as m,b as C,i as I,m as N,al as W,b4 as ht,n as K,t as et}from"./DvQPdglG.mjs";import{p as k,i as R}from"./jy7gnWqU.mjs";import{t as bt,T as J,bg as _t,u as X,q as nt,bh as yt,bi as xt,bj as wt,bk as it,bl as Y,bm as $t,bn as lt,bo as dt,bp as kt,bq as Tt,br as St,bs as It,bt as Nt,bu as Pt,bv as Ct,bw as Bt,al as zt,bx as qt,by as Dt,bz as Et,bA as Ft,bB as Mt,bC as At}from"./BVoZyvfW.mjs";import{s as V,p as rt,v as Ot,w as Rt}from"./D1yVOiR4.mjs";import{b as Ht}from"./CVnLI7kJ.mjs";import{s as E,e as ct,c as Lt,o as Ut}from"./DWmaQdPb.mjs";import{s as jt,a as Qt}from"./B2Ge_TJA.mjs";import{r as Wt}from"./BXG0VEhB.mjs";import{p as Vt,e as ut,R as st,i as Gt}from"./BHETkb4X.mjs";import{C as vt}from"./BBeIjo2R.mjs";import{S as Jt,g as Kt}from"./CInVtgem.mjs";import{B as Xt}from"./C-Y2HJse.mjs";import{S as Yt,L as Zt}from"./DrU-pqQX.mjs";import{T as at}from"./D5HGIOn1.mjs";import{b as Z}from"./Bc5MJCE7.mjs";import{n as te,g as ee,u as re,h as se,a as mt,i as ae,I as oe}from"./ytsETe_u.mjs";import{I as ne}from"./CenkKYFW.mjs";import{W as ie}from"./BCVOyGJ1.mjs";var le=I('<div class="progress svelte-z9dt5x"><div class="spinner svelte-z9dt5x"><div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div></div> <div id="label" class="svelte-z9dt5x"> </div></div>');function de(n,e){L(e,!1);const r=jt(),s=()=>Qt(Vt,"$pageTheme",r);let o=k(e,"task",8),d=k(e,"result",12),f=k(e,"error",12),h=N("");function b(a){a.value.value&&a.value.case!=="none"&&t(h)!==a.value.value.toString()&&$(h,a.value.value.toString())}O(()=>(D(d()),D(f()),D(o())),()=>{(async()=>{if(!d()&&!f())try{d(await Wt(o(),b))}catch(a){if(a instanceof Error)f(a);else throw a}})()}),G(),H();var i=j(),x=z(i);{var y=a=>{var l=le(),u=_(l),g=P(u,2),T=_(g,!0);m(g),m(l),C(()=>{bt(u,"nightMode",s().isDark),E(T,t(h))}),p(a,l)};R(x,a=>{d()||a(y)})}p(n,i),U()}var ce=I('<div class="message svelte-1ebpei3"> </div>');function ue(n,e){L(e,!1);let r=k(e,"error",8);H();var s=ce(),o=_(s,!0);m(s),C(()=>E(o,r().message)),p(n,s),U()}var ve=I('<div class="import svelte-zco36t"> </div>'),me=I('<div class="filename svelte-zco36t"> </div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),pe=I('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function fe(n,e){L(e,!1);let r=k(e,"path",8),s=k(e,"onImport",8);const o="Control+Enter";function d(b){return b.split(/[\\/]/).pop()}H();var f=pe(),h=z(f);J(h,()=>({"--gutter-block":"0.5rem","--gutter-inline":"0.25rem","--sticky-borders":"0 0 1px"})),Yt(h.lastChild,{breakpoint:"sm",children:(b,i)=>{Xt(b,{class:"justify-content-between",wrap:!1,children:(x,y)=>{var a=me(),l=z(a),u=_(l,!0);C(()=>E(u,d(r()))),m(l);var g=P(l,2),T=W(()=>Kt(o));J(g,()=>({"--border-left-radius":"5px","--border-right-radius":"5px"})),Zt(g.lastChild,{primary:!0,get tooltip(){return t(T)},$$events:{click(...w){var S;(S=s())==null||S.apply(this,w)}},children:(w,S)=>{var q=ve(),A=_(q,!0);C(()=>E(A,_t())),m(q),p(w,q)},$$slots:{default:!0}}),m(g);var F=P(g,2);Jt(F,{keyCombination:o,$$events:{action(...w){var S;(S=s())==null||S.apply(this,w)}}}),p(x,a)},$$slots:{default:!0}})},$$slots:{default:!0}}),m(h),p(n,f),U()}var ge=I("<tr><td></td></tr>"),he=I("<tr><td></td></tr>"),be=I('<div class="outer svelte-1c3gv3l"><table tabindex="-1"><thead><!></thead><tbody><!><!><!></tbody></table></div>');function _e(n,e){L(e,!1);const r=N(),s=N(),o=N(),d=N(),f=N();let h=k(e,"class",8,""),b=k(e,"itemsCount",8,0),i=k(e,"itemHeight",8),x=k(e,"bottomOffset",8,0),y=N(),a=N(0);window.addEventListener("resize",()=>{$(r,t(r))}),O(()=>(t(y),D(x()),D(i())),()=>{$(r,t(y)?Math.floor((document.documentElement.clientHeight-t(y).offsetTop-x())/i())*i():0)}),O(()=>(t(r),D(i())),()=>{$(s,Math.ceil(t(r)/i()))}),O(()=>(t(a),D(i())),()=>{$(o,Math.floor(t(a)/i()))}),O(()=>(t(o),t(s),D(b())),()=>{$(d,Math.min(t(o)+t(s),b()))}),O(()=>(t(d),t(o)),()=>{$(f,new Array(t(d)-t(o)).fill(0).map((v,c)=>t(o)+c))}),G(),H();var l=be(),u=_(l),g=_(u),T=_(g);V(T,e,"headers",{}),m(g);var F=P(g),w=_(F);{var S=v=>{var c=ge(),M=_(c);m(c),C(()=>X(M,"style",`height: ${i()*t(o)}px;`)),p(v,c)};R(w,v=>{i()*t(o)>0&&v(S)})}var q=P(w);ut(q,1,()=>t(f),v=>v,(v,c)=>{var M=j(),Q=z(M);V(Q,e,"row",{get index(){return t(c)}}),p(v,M)});var A=P(q);{var B=v=>{var c=he(),M=_(c);m(c),C(()=>X(M,"style",`height: ${i()*b()-i()*t(d)}px;`)),p(v,c)};R(A,v=>{i()*b()-i()*t(d)>0&&v(B)})}m(F),m(u),m(l),Z(l,v=>$(y,v),()=>t(y)),C(()=>{var v,c;X(l,"style",`--container-height: ${(v=t(r))!=null?v:""}px`),nt(u,`table ${(c=h())!=null?c:""} svelte-1c3gv3l`)}),ct("scroll",l,()=>$(a,t(y).scrollTop)),p(n,l),U()}function ye(n){let e,r;n.dupeResolution===rt.DUPLICATE?(e=Ct(),r=Bt()):n.dupeResolution===rt.PRESERVE?(e=it(),r=Y()):(e=lt(),r=dt());const s={reason:e,notes:n.firstFieldMatch};return{action:r,queue:s}}function xe(n){const e=[{queues:[{notes:n.new,reason:yt()}],action:xt(),summaryTemplate:wt,canBrowse:!0,icon:te},{queues:[{notes:n.duplicate,reason:it()}],action:Y(),summaryTemplate:$t,canBrowse:!0,icon:ee},{queues:[{notes:n.updated,reason:lt()}],action:dt(),summaryTemplate:kt,canBrowse:!0,icon:re},{queues:[{notes:n.conflicting,reason:Tt()},{notes:n.missingNotetype,reason:St()},{notes:n.missingDeck,reason:It()},{notes:n.emptyFirstField,reason:Nt()}],action:Y(),summaryTemplate:Pt,canBrowse:!1,icon:se}],r=ye(n);for(const s of e)if(s.action===r.action){s.queues.push(r.queue);break}return e}function we(n){const e=[];for(const r of n)for(const s of r.queues)if(s.notes)for(const o of s.notes)e.push({summary:r,queue:s,note:o});return e}function pt(n){Ot({filter:{case:"nids",value:{ids:n.map(e=>e.id.nid)}}})}var $e=I("<td><!></td>");function ke(n,e){L(e,!1);let r=k(e,"class",8,"");const s=Lt();let o=N();Ut(async()=>{s("mount",{element:t(o)})}),H();var d=$e(),f=_(d);V(f,e,"default",{}),m(d),Z(d,h=>$(o,h),()=>t(o)),C(()=>nt(d,zt(r()))),p(n,d),U()}function ot(n,e){let r=k(e,"class",8,""),s=k(e,"tooltip",8);ie(n,{get tooltip(){return s()},children:ht,$$slots:{default:(o,d)=>{const f=W(()=>d.createTooltip);ke(o,{get class(){return r()},$$events:{mount:h=>t(f)(h.detail.element)},children:(h,b)=>{var i=j(),x=z(i);V(x,e,"default",{}),p(h,i)},$$slots:{default:!0}})}}})}var Te=I('<tr slot="headers" class="svelte-1blptr9"><th>#</th><th> </th><th> </th><th></th></tr>'),Se=I('<tr class="svelte-1blptr9"><td class="index-cell svelte-1blptr9"> </td><!><!><td class="search-cell"><!></td></tr>'),Ie=I("<div><!></div>");function Ne(n,e){L(e,!1);const r=N();let s=k(e,"summaries",8),o=k(e,"bottomOffset",8,0),d=N();O(()=>D(s()),()=>{$(r,we(s()))}),G(),H();var f=Ie(),h=_(f);{var b=i=>{_e(i,{class:"details-table",itemHeight:40,get itemsCount(){return t(r).length},get bottomOffset(){return o()},$$slots:{headers:(x,y)=>{var a=Te(),l=P(_(a)),u=_(l,!0);C(()=>E(u,qt())),m(l);var g=P(l),T=_(g,!0);C(()=>E(T,Dt())),m(g),K(),m(a),p(x,a)},row:(x,y)=>{const a=W(()=>y.index);var l=Se(),u=_(l),g=_(u,!0);m(u);var T=P(u);ot(T,{class:"status-cell",get tooltip(){return t(r)[t(a)].queue.reason},children:(B,v)=>{K();var c=et();C(()=>E(c,t(r)[t(a)].summary.action)),p(B,c)},$$slots:{default:!0}});var F=P(T),w=W(()=>t(r)[t(a)].note.fields.join(","));ot(F,{class:"contents-cell",get tooltip(){return t(w)},children:(B,v)=>{K();var c=et();C(()=>E(c,t(r)[t(a)].note.fields.join(","))),p(B,c)},$$slots:{default:!0}});var S=P(F),q=_(S),A=W(()=>!t(r)[t(a)].summary.canBrowse);ne(q,{class:"search-icon",iconSize:100,active:!1,get disabled(){return t(A)},$$events:{click:()=>{pt([t(r)[t(a)].note])}},children:(B,v)=>{mt(B,{icon:ae})},$$slots:{default:!0}}),m(S),m(l),C(()=>E(g,t(a)+1)),p(x,l)}}})};R(h,i=>{t(d)&&i(b)})}m(f),Z(f,i=>$(d,i),()=>t(d)),p(n,f),U()}var Pe=I('<button class="desktop-only"> </button>'),Ce=I('<li class="svelte-ohwq2k"><!> <!></li>');function Be(n,e){L(e,!1);const r=N();let s=k(e,"summary",8);function o(b){pt(t(r)),b.preventDefault()}O(()=>D(s()),()=>{$(r,s().queues.map(b=>b.notes).flat())}),G(),H();var d=j(),f=z(d);{var h=b=>{var i=Ce(),x=_(i);oe(x,{children:(u,g)=>{mt(u,{get icon(){return s().icon}})},$$slots:{default:!0}});var y=P(x);C(()=>{var u;return E(y,` ${(u=s().summaryTemplate({count:t(r).length}))!=null?u:""} `)});var a=P(y);{var l=u=>{var g=Pe(),T=_(g,!0);C(()=>E(T,Et())),m(g),ct("click",g,o),p(u,g)};R(a,u=>{s().canBrowse&&u(l)})}m(i),p(b,i)};R(f,b=>{t(r).length&&b(h)})}p(n,d),U()}var ze=I("<p> </p> <ul></ul>",1),qe=I("<!> <!>",1),De=I('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ee(n,e){L(e,!1);const r=N(),s=N();let o=k(e,"response",8);const d=.5,f=getComputedStyle(document.documentElement),h=parseInt(f.fontSize),b=(3*d+.75)*h;O(()=>D(o()),()=>{$(r,xe(o().log))}),O(()=>D(o()),()=>{var y,a;$(s,(a=(y=o().log)==null?void 0:y.foundNotes)!=null?a:0)}),G(),H();var i=De(),x=z(i);J(x,()=>({"--gutter-inline":"0.25rem","--gutter-block":`${d}rem`})),vt(x.lastChild,{breakpoint:"sm",children:(y,a)=>{var l=qe(),u=z(l);st(u,{children:(T,F)=>{var w=W(()=>Mt());at(T,{get title(){return t(w)},children:(S,q)=>{var A=ze(),B=z(A),v=_(B,!0);C(()=>E(v,Ft({notes:t(s)}))),m(B);var c=P(B,2);ut(c,5,()=>t(r),Gt,(M,Q)=>{Be(M,{get summary(){return t(Q)}})}),m(c),p(S,A)},$$slots:{default:!0}})},$$slots:{default:!0}});var g=P(u,2);st(g,{children:(T,F)=>{var w=W(()=>At());at(T,{get title(){return t(w)},children:(S,q)=>{Ne(S,{get summaries(){return t(r)},bottomOffset:b})},$$slots:{default:!0}})},$$slots:{default:!0}}),p(y,l)},$$slots:{default:!0}}),m(x),p(n,i),U()}var Fe=I('<div class="pre-import-page svelte-1rmka3z"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function ar(n,e){L(e,!1);let r=k(e,"path",8),s=k(e,"importer",8);const o=!1;let d=N(void 0),f=N(void 0),h=N(o);async function b(){const l=await s().doImport();return await Rt({}),$(h,!1),l}H();var i=j(),x=z(i);{var y=l=>{ue(l,{get error(){return t(f)}})},a=l=>{var u=j(),g=z(u);{var T=w=>{Ee(w,{get response(){return t(d)}})},F=w=>{var S=j(),q=z(S);{var A=v=>{de(v,{task:b,get result(){return t(d)},set result(c){$(d,c)},get error(){return t(f)},set error(c){$(f,c)},$$legacy:!0})},B=v=>{var c=Fe(),M=_(c);fe(M,{get path(){return r()},onImport:()=>$(h,!0)});var Q=P(M,2);J(Q,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.5rem"})),vt(Q.lastChild,{breakpoint:"sm",class:"container-columns",children:(ft,Me)=>{var tt=j(),gt=z(tt);V(gt,e,"default",{}),p(ft,tt)},$$slots:{default:!0}}),m(Q),m(c),p(v,c)};R(q,v=>{t(h)?v(A):v(B,!1)},!0)}p(w,S)};R(g,w=>{t(d)?w(T):w(F,!1)},!0)}p(l,u)};R(x,l=>{t(f)?l(y):l(a,!1)})}return p(n,i),Ht(e,"noOptions",o),U({noOptions:o})}export{ar as I};
