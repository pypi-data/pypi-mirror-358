Metadata-Version: 2.4
Name: o-nakala-core
Version: 2.4.3
Summary: A comprehensive Python library and CLI toolkit for the NAKALA research data repository, designed for digital humanities workflows
Author: xy-liao
License-Expression: MIT
Project-URL: Homepage, https://nakala.fr
Project-URL: Repository, https://github.com/xy-liao/o-nakala-core
Project-URL: Documentation, https://nakala.fr/documentation
Project-URL: Bug Tracker, https://github.com/xy-liao/o-nakala-core/issues
Keywords: nakala,research-data,repository,api-client,digital-humanities,metadata,cli,academic
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Science/Research
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Scientific/Engineering :: Information Analysis
Classifier: Topic :: Database
Classifier: Topic :: Text Processing
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.32.3
Requires-Dist: tenacity>=9.1.2
Requires-Dist: typing-extensions>=4.14.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Provides-Extra: cli
Requires-Dist: click>=8.0.0; extra == "cli"
Requires-Dist: rich>=13.0.0; extra == "cli"
Requires-Dist: python-dotenv>=1.0.0; extra == "cli"
Provides-Extra: ml
Requires-Dist: numpy>=1.21.0; extra == "ml"
Requires-Dist: scikit-learn>=1.0.0; extra == "ml"
Provides-Extra: all
Requires-Dist: o-nakala-core[cli,dev,ml]; extra == "all"
Dynamic: license-file

# O-Nakala Core

A comprehensive Python library and CLI toolkit for interacting with the NAKALA research data repository, designed specifically for digital humanities workflows.

## ğŸš€ Quick Start

### Installation

```bash
# Install from PyPI (recommended)
pip install o-nakala-core

# With CLI tools
pip install o-nakala-core[cli]

# With enhanced features
pip install o-nakala-core[ml]

# Complete installation (all features)
pip install o-nakala-core[cli,ml]

# Install from source
git clone https://github.com/xy-liao/o-nakala-core.git
cd o-nakala-core
pip install -e .[cli]
```

### Basic Usage

```bash
# Set your API key
export NAKALA_API_KEY="your-api-key"

# Upload data (folder mode requires --folder-config)
o-nakala-upload \
  --api-key "$NAKALA_API_KEY" \
  --dataset folder_data_items.csv \
  --mode folder \
  --folder-config folder_data_items.csv \
  --base-path examples/sample_dataset \
  --output upload_results.csv

# Create collections from uploaded data
o-nakala-collection \
  --api-key "$NAKALA_API_KEY" \
  --from-upload-output upload_results.csv \
  --from-folder-collections folder_collections.csv

# Generate quality report
o-nakala-curator --api-key "$NAKALA_API_KEY" --quality-report

# Apply metadata enhancements
o-nakala-curator \
  --api-key "$NAKALA_API_KEY" \
  --batch-modify modifications.csv \
  --scope datasets
```

## ğŸ› ï¸ Features

### Core Modules
- **ğŸ“¤ Upload**: Batch upload of research datasets with metadata
- **ğŸ“š Collection**: Create and manage thematic collections
- **ğŸ”§ Curator**: Metadata curation and quality management
- **ğŸ‘¤ User Info**: Account management and permissions

### Key Capabilities
- **Metadata management** for core Dublin Core fields
- **Automated metadata curation** with pattern recognition
- **Community pattern analysis** leveraging repository insights
- **Metadata pre-population** with contextual suggestions
- **Resource relationship discovery** and mapping
- **Multilingual metadata** support (French, English, Spanish, German)
- **Batch operations** for large-scale data management
- **Quality validation** and enhancement tools
- **CSV-driven workflows** for academic reproducibility
- **Comprehensive logging** and error handling

### ğŸš§ **Core Features**
Current implementation provides functionality for NAKALA data management including:
- **Complete API integration** for uploads, collections, and curation
- **Automated curation** with pattern recognition
- **Community insights** from repository analysis
- **Metadata pre-population** with contextual suggestions
- **Robust error handling** and validation
- **CSV-driven workflows** for reproducible research
- **Quality analysis** and metadata validation
- **Batch operations** for large-scale data management

### ğŸ”¬ **Automated Enhancement Features**
- **Pattern Learning**: Discovers metadata patterns from existing data
- **Content Analysis**: Content similarity and clustering
- **Community Analytics**: Repository-wide metadata recommendations
- **Pre-population Engine**: Context-aware field suggestions
- **Relationship Discovery**: Finds connections between resources
- **Data Analysis**: Data-driven field value predictions

## ğŸ“– Documentation

### User Guides
- [ğŸ“¤ Upload Guide](docs/user-guides/01-upload-guide.md) - Complete upload workflows
- [ğŸ“š Collection Guide](docs/user-guides/02-collection-guide.md) - Collection management  
- [ğŸ“‹ Workflow Guide](docs/user-guides/03-workflow-guide.md) - End-to-end processes
- [ğŸ”¬ Curation Guide](docs/user-guides/06-curation-guide.md) - Metadata curation features
- [ğŸ”§ Curator Field Reference](docs/curator-field-reference.md) - Current field documentation
- [â“ FAQ](docs/user-guides/05-faq.md) - Common questions and solutions

### Technical Reference
- [ğŸ“‹ Field Reference](docs/curator-field-reference.md) - Complete metadata field documentation
- [ğŸ”§ API Endpoints](docs/endpoints/) - Detailed endpoint specifications and examples
- [ğŸ›ï¸ Property URI Mapping](docs/property-uri-mapping.md) - NAKALA metadata schema reference

### Quick Reference
```bash
# Show complete field reference
o-nakala-curator --list-fields

# Get help for any command
o-nakala-upload --help
o-nakala-collection --help  
o-nakala-curator --help
o-nakala-user-info --help
```

## ğŸ“ Getting Started

### Example Workflows
Complete hands-on examples with real datasets:

> **ğŸ“ Note**: The examples below use a public test API key for demonstration purposes. Find the current test key in [api/api_keys.md](api/api_keys.md). For production use, create your own API key at https://nakala.fr.

```bash
cd examples/sample_dataset
# Review the CSV configurations
cat folder_data_items.csv
cat folder_collections.csv

# Set API key (see api/api_keys.md for test key)
export NAKALA_API_KEY="[see-api/api_keys.md]"

# Run the complete workflow (v2.4.1 with automated enhancement)
o-nakala-upload --api-key "$NAKALA_API_KEY" \
  --dataset folder_data_items.csv --mode folder \
  --folder-config folder_data_items.csv --base-path . \
  --output upload_results.csv

o-nakala-collection --api-key "$NAKALA_API_KEY" \
  --from-upload-output upload_results.csv \
  --from-folder-collections folder_collections.csv \
  --collection-report collections_output.csv

# Quality analysis (v2.4.1)
o-nakala-curator --api-key "$NAKALA_API_KEY" \
  --quality-report --scope collections
# Now includes: Pattern analysis, community insights, relationship discovery
```

The examples cover:
- Data upload (5 datasets, 14 files) with smart pre-population
- Collection creation (3 thematic collections) with relationship discovery
- Quality curation and analysis
- Automated metadata enhancement
- Community-driven insights and recommendations

## ğŸ“ Project Structure

```
o-nakala-core/
â”œâ”€â”€ src/o_nakala_core/         # Core library modules
â”‚   â”œâ”€â”€ cli/                   # Command-line interfaces  
â”‚   â”œâ”€â”€ common/                # Shared utilities
â”‚   â”œâ”€â”€ upload.py              # Upload functionality
â”‚   â”œâ”€â”€ collection.py          # Collection management
â”‚   â”œâ”€â”€ curator.py             # Metadata curation
â”‚   â””â”€â”€ user_info.py           # User management
â”œâ”€â”€ docs/                      # Documentation and guides
â”œâ”€â”€ examples/                  # Sample datasets and workflows
â”‚   â”œâ”€â”€ sample_dataset/        # Complete workflow example
â”‚   â””â”€â”€ notebooks/             # Interactive workshop notebooks
â””â”€â”€ api/                       # API reference materials
```

## ğŸ”§ CLI Reference

### Upload Data
```bash
# Upload from CSV configuration
o-nakala-upload \
  --api-key YOUR_KEY \
  --dataset examples/sample_dataset/folder_data_items.csv \
  --mode csv

# Upload from folder mode (requires --folder-config)
o-nakala-upload \
  --api-key YOUR_KEY \
  --dataset examples/sample_dataset/folder_data_items.csv \
  --base-path examples/sample_dataset \
  --mode folder \
  --folder-config examples/sample_dataset/folder_data_items.csv \
  --output upload_results.csv
```

### Manage Collections
```bash
# Create from upload results
o-nakala-collection \
  --api-key YOUR_KEY \
  --title "My Collection" \
  --from-upload-output upload_results.csv

# Create from folder configuration
o-nakala-collection \
  --api-key YOUR_KEY \
  --from-folder-collections examples/sample_dataset/folder_collections.csv \
  --from-upload-output upload_results.csv
```

### Curate Metadata
```bash
# Generate quality report
o-nakala-curator --quality-report --api-key YOUR_KEY

# Batch modify metadata
o-nakala-curator --batch-modify changes.csv --dry-run --api-key YOUR_KEY

# Validate metadata
o-nakala-curator --validate-metadata --scope datasets --api-key YOUR_KEY
```

## ğŸ“ Examples

### ğŸ“ Interactive Workshop
**Hands-on Jupyter notebook** with complete workflow demonstration:

```bash
cd examples/notebooks
jupyter lab workflow_notebook.ipynb
```

The workshop covers:
- âœ… Installation and setup
- ğŸ“¤ Data upload workflows (CLI + Python API)
- ğŸ“š Collection management
- ğŸ”§ Quality analysis and curation
- ğŸ¯ Best practices and troubleshooting

### Sample Dataset
Complete academic example with:
- Multi-language metadata (French/English)
- 5 data categories (code, data, documents, images, presentations)
- Collection definitions and relationships

```bash
cd examples/sample_dataset
# Review folder_data_items.csv and folder_collections.csv
```

### Simple Dataset  
Minimal example for quick testing:

```bash
cd examples/sample_dataset
# Complete workflow with professional datasets
```

## ğŸŒ Environment Setup

```bash
# Required - Get test key from api/api_keys.md
export NAKALA_API_KEY="your-api-key"

# Optional (defaults to test environment)
export NAKALA_BASE_URL="https://apitest.nakala.fr"  # Test
# export NAKALA_BASE_URL="https://api.nakala.fr"     # Production
```

## ğŸ§¹ Maintenance

### Project Cleanup
To clean up temporary files and development artifacts:

```bash
# Remove log files and temporary outputs
find . -name "*.log" -delete
find . -name "__pycache__" -type d -exec rm -rf {} +
find . -name "*.pyc" -delete
```

## ğŸš¨ Common Issues

### "Folder config is required for folder mode"
**Solution**: Add the `--folder-config` parameter:
```bash
o-nakala-upload --api-key YOUR_KEY --dataset file.csv --mode folder --folder-config file.csv --base-path .
```

### "Item [ID] not found in datasets or collections"  
**Solution**: Update collection IDs in modification CSV files using the latest IDs from `collections_output.csv`

### Commands not found (o-nakala-upload, etc.)
**Solution**: Install with CLI support and activate virtual environment:
```bash
pip install -e ".[cli]"
source .venv/bin/activate
```

### File path issues
**Solution**: Ensure you're in the correct directory and verify file paths:
```bash
cd examples/sample_dataset
ls -la *.csv files/
```

For detailed troubleshooting, see: [docs/user-guides/troubleshooting.md](docs/user-guides/troubleshooting.md)

## ğŸ”— Links

- **[NAKALA Platform](https://nakala.fr)** - Main repository platform
- **[Test Environment](https://test.nakala.fr/)** - Safe testing environment  
- **[API Documentation](https://api.nakala.fr/doc)** - Complete API reference
- **[xy-liao/o-nakala-core](https://github.com/xy-liao/o-nakala-core)** - Project repository

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit issues and pull requests on the [GitHub repository](https://github.com/xy-liao/o-nakala-core).

---

**Built for researchers and data management professionals.**
