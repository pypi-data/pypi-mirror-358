(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["37221"],{95962:function(e,t,o){o(81738),o(22960),e.exports=function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(o){!t.hasOwnProperty(o)||null===t[o]||"object"!=typeof t[o]&&"function"!=typeof t[o]||Object.isFrozen(t[o])||e(t[o])}),t}},13667:function(e,t,o){"use strict";o.d(t,{V:function(){return n}});var i=o(54521),a=o(4490),n=function(){return(0,a.Z)(function e(t,o){var a=this,n=o.selector,s=o.enabled;(0,i.Z)(this,e),this.mouseIsDown=!1,this.scrolled=!1,this.scrolling=!1,this.scrollStartX=0,this.scrollLeft=0,this._enabled=!0,this._mouseDown=function(e){var t=a._scrollContainer;t&&(a.scrollStartX=e.pageX-t.offsetLeft,a.scrollLeft=t.scrollLeft,a.mouseIsDown=!0,a.scrolled=!1,window.addEventListener("mousemove",a._mouseMove),window.addEventListener("mouseup",a._mouseUp,{once:!0}))},this._mouseUp=function(){a.mouseIsDown=!1,a.scrolling=!1,a._host.requestUpdate(),window.removeEventListener("mousemove",a._mouseMove)},this._mouseMove=function(e){if(a.mouseIsDown){var t=a._scrollContainer;if(t){var o=e.pageX-t.offsetLeft-a.scrollStartX;a.scrolled||(a.scrolled=Math.abs(o)>1,a.scrolling=a.scrolled,a._host.requestUpdate()),t.scrollLeft=a.scrollLeft-o}}},this._selector=n,this._host=t,this.enabled=null==s||s,t.addController(this)},[{key:"enabled",get:function(){return this._enabled},set:function(e){e!==this._enabled&&(this._enabled=e,this._enabled?this._attach():this._detach(),this._host.requestUpdate())}},{key:"hostUpdated",value:function(){this.enabled&&!this._scrollContainer&&this._attach()}},{key:"hostDisconnected",value:function(){this._detach()}},{key:"_attach",value:function(){var e;this._scrollContainer=null===(e=this._host.renderRoot)||void 0===e?void 0:e.querySelector(this._selector),this._scrollContainer&&this._scrollContainer.addEventListener("mousedown",this._mouseDown)}},{key:"_detach",value:function(){window.removeEventListener("mousemove",this._mouseMove),window.removeEventListener("mouseup",this._mouseUp),this._scrollContainer&&(this._scrollContainer.removeEventListener("mousedown",this._mouseDown),this._scrollContainer=void 0),this.scrolled=!1,this.scrolling=!1,this.mouseIsDown=!1,this.scrollStartX=0,this.scrollLeft=0}}])}()},61540:function(e,t,o){"use strict";o.d(t,{$y:function(){return s},fs:function(){return n},j:function(){return a}});o(54480),o(1455);var i=function(e,t,o){return new Promise(function(i,a){var n=document.createElement(e),s="src",r="body";switch(n.onload=function(){return i(t)},n.onerror=function(){return a(t)},e){case"script":n.async=!0,o&&(n.type=o);break;case"link":n.type="text/css",n.rel="stylesheet",s="href",r="head"}n[s]=t,document[r].appendChild(n)})},a=function(e){return i("link",e)},n=function(e){return i("script",e)},s=function(e){return i("script",e,"module")}},84213:function(e,t,o){"use strict";o.d(t,{Q:function(){return i}});const i=e=>!(!e.detail.selected||"property"!==e.detail.source)&&(e.currentTarget.selected=!1,!0)},21682:function(e,t,o){"use strict";o.d(t,{q:function(){return i}});const i=e=>{const t=window.location.pathname;return e?t+"?"+e:t}},51383:function(e,t,o){"use strict";o.r(t),o.d(t,{HaIconButtonArrowNext:function(){return v}});var i,a=o(54982),n=o(54521),s=o(4490),r=o(20129),l=o(85297),c=(o(12212),o(73742)),d=o(59048),h=o(7616),u=o(83054),v=(o(48017),function(e){function t(){var e;(0,n.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=(0,r.Z)(this,t,[].concat(i))).disabled=!1,e._icon="rtl"===u.E.document.dir?"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z":"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",e}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"render",value:function(){var e;return(0,d.dy)(i||(i=(0,a.Z)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.next"))||"Next",this._icon)}}])}(d.oi));(0,c.__decorate)([(0,h.Cb)({attribute:!1})],v.prototype,"hass",void 0),(0,c.__decorate)([(0,h.Cb)({type:Boolean})],v.prototype,"disabled",void 0),(0,c.__decorate)([(0,h.Cb)()],v.prototype,"label",void 0),(0,c.__decorate)([(0,h.SB)()],v.prototype,"_icon",void 0),v=(0,c.__decorate)([(0,h.Mo)("ha-icon-button-arrow-next")],v)},45109:function(e,t,o){"use strict";o.r(t),o.d(t,{HaIconButtonArrowPrev:function(){return v}});var i,a=o(54982),n=o(54521),s=o(4490),r=o(20129),l=o(85297),c=(o(12212),o(73742)),d=o(59048),h=o(7616),u=o(83054),v=(o(48017),function(e){function t(){var e;(0,n.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=(0,r.Z)(this,t,[].concat(i))).disabled=!1,e._icon="rtl"===u.E.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z",e}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"render",value:function(){var e;return(0,d.dy)(i||(i=(0,a.Z)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.back"))||"Back",this._icon)}}])}(d.oi));(0,c.__decorate)([(0,h.Cb)({attribute:!1})],v.prototype,"hass",void 0),(0,c.__decorate)([(0,h.Cb)({type:Boolean})],v.prototype,"disabled",void 0),(0,c.__decorate)([(0,h.Cb)()],v.prototype,"label",void 0),(0,c.__decorate)([(0,h.SB)()],v.prototype,"_icon",void 0),v=(0,c.__decorate)([(0,h.Mo)("ha-icon-button-arrow-prev")],v)},9036:function(e,t,o){"use strict";o.a(e,async function(e,t){try{o(26847),o(27530);var i=o(73742),a=o(64269),n=o(39284),s=o(57443),r=o(59048),l=o(7616),c=o(13667),d=e([s,a]);[s,a]=d.then?(await d)():d;let h,u=e=>e;class v extends a.Z{setAriaLabels(){}getAllPanels(){return[]}handleClick(e){this._dragScrollController.scrolled||super.handleClick(e)}constructor(...e){super(...e),this._dragScrollController=new c.V(this,{selector:".tab-group__nav"})}}v.styles=[n.Z,(0,r.iv)(h||(h=u`:host{--sl-spacing-3x-small:0.125rem;--sl-spacing-2x-small:0.25rem;--sl-spacing-x-small:0.5rem;--sl-spacing-small:0.75rem;--sl-spacing-medium:1rem;--sl-spacing-large:1.25rem;--sl-spacing-x-large:1.75rem;--sl-spacing-2x-large:2.25rem;--sl-spacing-3x-large:3rem;--sl-spacing-4x-large:4.5rem;--sl-transition-x-slow:1000ms;--sl-transition-slow:500ms;--sl-transition-medium:250ms;--sl-transition-fast:150ms;--sl-transition-x-fast:50ms;--transition-speed:var(--sl-transition-fast);--sl-border-radius-small:0.1875rem;--sl-border-radius-medium:0.25rem;--sl-border-radius-large:0.5rem;--sl-border-radius-x-large:1rem;--sl-border-radius-circle:50%;--sl-border-radius-pill:9999px;--sl-color-neutral-600:inherit;--sl-font-weight-semibold:var(--ha-font-weight-medium);--sl-font-size-small:var(--ha-font-size-m);--sl-color-primary-600:var(
          --ha-tab-active-text-color,
          var(--primary-color)
        );--track-color:var(--ha-tab-track-color, var(--divider-color));--indicator-color:var(--ha-tab-indicator-color, var(--primary-color))}::slotted(sl-tab:not([active])){opacity:.8}`))],v=(0,i.__decorate)([(0,l.Mo)("sl-tab-group")],v),t()}catch(h){t(h)}})},4263:function(e,t,o){"use strict";o.d(t,{Gc:function(){return i}});const i=(e,t,o)=>e.subscribeEvents(e=>{e.data.url_path===t&&o()},"lovelace_updated")},70695:function(e,t,o){"use strict";o.d(t,{JR:function(){return a},Y:function(){return n},iM:function(){return s},j2:function(){return i}});o(87799);var i=function(e){return e.callWS({type:"lovelace/dashboards/list"})},a=function(e,t){return e.callWS(Object.assign({type:"lovelace/dashboards/create"},t))},n=function(e,t,o){return e.callWS(Object.assign({type:"lovelace/dashboards/update",dashboard_id:t},o))},s=function(e,t){return e.callWS({type:"lovelace/dashboards/delete",dashboard_id:t})}},70690:function(e,t,o){"use strict";o.d(t,{SN:function(){return a},eL:function(){return i},fg:function(){return s},id:function(){return n}});o(87799);var i=function(e){return e.sendMessagePromise({type:"lovelace/resources"})},a=function(e,t){return e.callWS(Object.assign({type:"lovelace/resources/create"},t))},n=function(e,t,o){return e.callWS(Object.assign({type:"lovelace/resources/update",resource_id:t},o))},s=function(e,t){return e.callWS({type:"lovelace/resources/delete",resource_id:t})}},91793:function(e,t,o){"use strict";o.r(t);var i,a,n,s,r,l=o(54982),c=o(54521),d=o(4490),h=o(20129),u=o(85297),v=(o(12212),o(73742)),p=(o(98334),o(59048)),f=o(7616),g=(o(45109),o(11969),o(12942),function(e){function t(){var e;(0,c.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=(0,h.Z)(this,t,[].concat(i))).toolbar=!0,e.rootnav=!1,e.narrow=!1,e}return(0,u.Z)(t,e),(0,d.Z)(t,[{key:"render",value:function(){var e,t;return(0,p.dy)(i||(i=(0,l.Z)([" ",' <div class="content"> <ha-alert alert-type="error">','</ha-alert> <slot> <mwc-button @click="','"> '," </mwc-button> </slot> </div> "])),this.toolbar?(0,p.dy)(a||(a=(0,l.Z)(['<div class="toolbar"> '," </div>"])),this.rootnav||null!==(e=history.state)&&void 0!==e&&e.root?(0,p.dy)(n||(n=(0,l.Z)([' <ha-menu-button .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow):(0,p.dy)(s||(s=(0,l.Z)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._handleBack)):"",this.error,this._handleBack,null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))}},{key:"_handleBack",value:function(){history.back()}}],[{key:"styles",get:function(){return[(0,p.iv)(r||(r=(0,l.Z)([":host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev{pointer-events:auto}.content{color:var(--primary-text-color);height:calc(100% - var(--header-height));display:flex;padding:16px;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}a{color:var(--primary-color)}ha-alert{margin-bottom:16px}"])))]}}])}(p.oi));(0,v.__decorate)([(0,f.Cb)({attribute:!1})],g.prototype,"hass",void 0),(0,v.__decorate)([(0,f.Cb)({type:Boolean})],g.prototype,"toolbar",void 0),(0,v.__decorate)([(0,f.Cb)({type:Boolean})],g.prototype,"rootnav",void 0),(0,v.__decorate)([(0,f.Cb)({type:Boolean})],g.prototype,"narrow",void 0),(0,v.__decorate)([(0,f.Cb)()],g.prototype,"error",void 0),g=(0,v.__decorate)([(0,f.Mo)("hass-error-screen")],g)},41906:function(e,t,o){"use strict";o.a(e,async function(e,i){try{o.r(t);o(26847),o(27530);var a=o(73742),n=o(59048),s=o(7616),r=o(6514),l=(o(45109),o(11969),o(95814)),c=e([r]);r=(c.then?(await c)():c)[0];let d,h,u,v,p,f,g=e=>e;class b extends n.oi{render(){var e;return(0,n.dy)(d||(d=g` ${0} <div class="content"> <ha-spinner></ha-spinner> ${0} </div> `),this.noToolbar?"":(0,n.dy)(h||(h=g`<div class="toolbar"> ${0} </div>`),this.rootnav||null!==(e=history.state)&&void 0!==e&&e.root?(0,n.dy)(u||(u=g` <ha-menu-button .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow):(0,n.dy)(v||(v=g` <ha-icon-button-arrow-prev .hass="${0}" @click="${0}"></ha-icon-button-arrow-prev> `),this.hass,this._handleBack)),this.message?(0,n.dy)(p||(p=g`<div id="loading-text">${0}</div>`),this.message):n.Ld)}_handleBack(){history.back()}static get styles(){return[l.Qx,(0,n.iv)(f||(f=g`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}`))]}constructor(...e){super(...e),this.noToolbar=!1,this.rootnav=!1,this.narrow=!1}}(0,a.__decorate)([(0,s.Cb)({attribute:!1})],b.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"no-toolbar"})],b.prototype,"noToolbar",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],b.prototype,"rootnav",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],b.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)()],b.prototype,"message",void 0),b=(0,a.__decorate)([(0,s.Mo)("hass-loading-screen")],b),i()}catch(d){i(d)}})},94844:function(e,t,o){"use strict";o.d(t,{w:function(){return n}});o(26847),o(54480),o(1455),o(48694),o(27530);var i=o(39884),a=function(){return Promise.all([o.e("75696"),o.e("68858"),o.e("92028")]).then(o.bind(o,32594))},n=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"dialog-lovelace-dashboard-detail",dialogImport:a,dialogParams:t})}},31492:function(e,t,o){"use strict";o.d(t,{A5:function(){return s}});o(26847),o(81738),o(33480),o(94814),o(6989),o(87799),o(27530);var i=o(69887),a=o(25151),n=o(52802);const s=e=>{if((0,a.Tx)(e))return e;const t=Object.assign({},e);return t.views&&(t.views=t.views.map(r)),t},r=e=>{if((0,n.s)(e))return e;const t=Object.assign({},e);return t.badges&&!t.badges.every(Boolean)&&(t.badges=t.badges.filter(Boolean)),t.sections&&(t.sections=t.sections.map(l)),t},l=e=>{const t=Object.assign({},e);if(e.title){if(!(0,i.N)(t)){const e={type:"heading",heading:t.title};t.cards=[e,...t.cards||[]]}delete t.title}return t}},14903:function(e,t,o){"use strict";o.d(t,{k:function(){return s}});o(26847),o(81738),o(22960),o(56303),o(27530),o(41465),o(34845),o(95729),o(36330),o(38221),o(75863);var i=o(61540);const a={},n={},s=(e,t)=>{e.forEach(e=>{const o=new URL(e.url,t.auth.data.hassUrl).toString();switch(e.type){case"css":if(o in a)break;a[o]=(0,i.j)(o);break;case"js":if(o in n)break;n[o]=(0,i.fs)(o);break;case"module":(0,i.$y)(o);break;default:console.warn(`Unknown resource type specified: ${e.type}`)}})}},73261:function(e,t,o){"use strict";o.d(t,{L:function(){return n}});o(26847),o(54480),o(1455),o(48694),o(27530);var i=o(39884),a=function(){return Promise.all([o.e("75696"),o.e("92915"),o.e("87559")]).then(o.bind(o,53226))},n=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"dialog-dashboard-strategy-editor",dialogImport:a,dialogParams:t})}},54179:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});o(26847),o(1455),o(27530);var i=o(39884);const a="show-save-config";let n=!1;const s=(e,t)=>{n||(n=!0,(0,i.B)(e,"register-dialog",{dialogShowEvent:a,dialogTag:"hui-dialog-save-config",dialogImport:()=>Promise.all([o.e("75696"),o.e("35296")]).then(o.bind(o,74944))})),(0,i.B)(e,a,t)}},69868:function(e,t,o){"use strict";o.d(t,{k:function(){return s}});o(26847),o(54480),o(1455),o(48694),o(27530);var i=o(39884),a=!1,n="show-edit-view",s=function(e,t){a||(a=!0,function(e){(0,i.B)(e,"register-dialog",{dialogShowEvent:n,dialogTag:"hui-dialog-edit-view",dialogImport:function(){return Promise.all([o.e("73614"),o.e("75696"),o.e("11730"),o.e("15634"),o.e("26452"),o.e("16376"),o.e("2769"),o.e("19596"),o.e("70540")]).then(o.bind(o,90513))}})}(e)),(0,i.B)(e,n,t)}},32978:function(e,t,o){"use strict";o.a(e,async function(e,i){try{o.r(t),o.d(t,{LovelacePanel:function(){return I}});var a,n,s,r,l=o(54982),c=o(29694),d=o(75778),h=o(54521),u=o(4490),v=o(67063),p=o(20129),f=o(85297),g=o(53389),b=(o(12212),o(26847),o(87799),o(54480),o(1455),o(48694),o(27530),o(73742)),_=(o(98334),o(95962)),w=o.n(_),m=o(59048),y=o(7616),k=o(21682),x=o(64637),C=o(87639),V=o(65829),M=o(96222),L=o(4263),A=o(25151),$=o(70690),Z=(o(91793),o(41906)),S=o(35982),H=o(31492),E=o(14903),z=o(54179),B=o(64667),P=o(36748),U=e([Z,B]);[Z,B]=U.then?(await U)():U,window.loadCardHelpers=function(){return Promise.all([o.e("93006"),o.e("16367"),o.e("75663"),o.e("5952"),o.e("70051")]).then(o.bind(o,60164))};var T={strategy:{type:"original-states"}},D=!1,R=!1,I=function(e){function t(){var e;(0,h.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=(0,p.Z)(this,t,[].concat(i))).narrow=!1,e._panelState="loading",e._ignoreNextUpdateEvent=!1,e._fetchConfigOnConnect=!1,e._loading=!1,e._debounceRegistriesChanged=(0,C.D)(function(){return e._registriesChanged()},200),e._registriesChanged=(0,d.Z)((0,c.Z)().m(function t(){var o,i,a,n;return(0,c.Z)().w(function(t){for(;;)switch(t.n){case 0:if(e.hass&&e.lovelace){t.n=1;break}return t.a(2);case 1:if(o=e.lovelace.rawConfig,(0,A.Tx)(o)){t.n=2;break}return t.a(2);case 2:return i=e.lovelace.config,t.n=3,(0,P.to)(o,e.hass);case 3:a=t.v,n=(0,H.A5)(a),(0,V.v)(n,i)||e._askRegenerateStrategyConfig();case 4:return t.a(2)}},t)})),e._strategyConfigChanged=function(t){t.stopPropagation(),e._askRegenerateStrategyConfig()},e._askRegenerateStrategyConfig=function(){(0,S.C)((0,v.Z)(e),{message:e.hass.localize("ui.panel.lovelace.changed_toast.message"),action:{action:function(){return e._regenerateStrategyConfig()},text:e.hass.localize("ui.common.refresh")},duration:-1,id:"regenerate-strategy-config",dismissable:!1})},e._handleConnectionStatus=function(t){"connected"===t.detail&&e._fetchConfig(!1)},e._closeEditor=function(){e._panelState="loaded"},e}return(0,f.Z)(t,e),(0,u.Z)(t,[{key:"connectedCallback",value:function(){(0,g.Z)(t,"connectedCallback",this,3)([]),this.lovelace&&this.hass&&this.lovelace.locale!==this.hass.locale?this._setLovelaceConfig(this.lovelace.config,this.lovelace.rawConfig,this.lovelace.mode):this.lovelace&&"generated"===this.lovelace.mode?(this._panelState="loading",this._regenerateConfig()):this._fetchConfigOnConnect&&this._fetchConfig(!1),window.addEventListener("connection-status",this._handleConnectionStatus)}},{key:"disconnectedCallback",value:function(){(0,g.Z)(t,"disconnectedCallback",this,3)([]),null!==this.urlPath&&this._unsubUpdates&&(this._unsubUpdates.then(function(e){return e()}),this._unsubUpdates=void 0),window.removeEventListener("connection-status",this._handleConnectionStatus)}},{key:"render",value:function(){var e=this._panelState;return"loaded"===e?(0,m.dy)(a||(a=(0,l.Z)([' <hui-root .panel="','" .hass="','" .lovelace="','" .route="','" .narrow="','" @config-refresh="','" @strategy-config-changed="','"></hui-root> '])),this.panel,this.hass,this.lovelace,this.route,this.narrow,this._forceFetchConfig,this._strategyConfigChanged):"error"===e?(0,m.dy)(n||(n=(0,l.Z)([' <hass-error-screen .hass="','" title="','" .error="','"> <mwc-button raised @click="','"> '," </mwc-button> </hass-error-screen> "])),this.hass,(0,M.Lh)(this.hass.localize,"lovelace"),this._errorMsg,this._forceFetchConfig,this.hass.localize("ui.panel.lovelace.reload_lovelace")):"yaml-editor"===e?(0,m.dy)(s||(s=(0,l.Z)([' <hui-editor .hass="','" .lovelace="','" .closeEditor="','"></hui-editor> '])),this.hass,this.lovelace,this._closeEditor):(0,m.dy)(r||(r=(0,l.Z)([' <hass-loading-screen rootnav .hass="','" .narrow="','"></hass-loading-screen> '])),this.hass,this.narrow)}},{key:"willUpdate",value:function(e){(0,g.Z)(t,"willUpdate",this,3)([e]),this.lovelace||"error"===this._panelState||this._loading||this._fetchConfig(!1)}},{key:"firstUpdated",value:function(e){(0,g.Z)(t,"firstUpdated",this,3)([e]),this._unsubUpdates||this._subscribeUpdates()}},{key:"updated",value:function(e){if((0,g.Z)(t,"updated",this,3)([e]),e.has("hass")){var o=e.get("hass");o&&this.hass&&this.lovelace&&(0,A.Tx)(this.lovelace.rawConfig)&&(o.entities===this.hass.entities&&o.devices===this.hass.devices&&o.areas===this.hass.areas&&o.floors===this.hass.floors||"RUNNING"===this.hass.config.state&&this._debounceRegistriesChanged(),"RUNNING"===this.hass.config.state&&"RUNNING"!==o.config.state&&this._regenerateStrategyConfig())}}},{key:"_regenerateStrategyConfig",value:(y=(0,d.Z)((0,c.Z)().m(function e(){var t,o,i;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this.hass&&this.lovelace){e.n=1;break}return e.a(2);case 1:if(t=this.lovelace.rawConfig,(0,A.Tx)(t)){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,(0,P.to)(t,this.hass);case 3:o=e.v,this._setLovelaceConfig(o,t,"generated"),e.n=5;break;case 4:e.p=4,i=e.v,console.error(i);case 5:return e.a(2)}},e,this,[[2,4]])})),function(){return y.apply(this,arguments)})},{key:"_regenerateConfig",value:(_=(0,d.Z)((0,c.Z)().m(function e(){var t;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,P.to)(T,this.hass);case 1:t=e.v,this._setLovelaceConfig(t,T,"generated"),this._panelState="loaded";case 2:return e.a(2)}},e,this)})),function(){return _.apply(this,arguments)})},{key:"_subscribeUpdates",value:(b=(0,d.Z)((0,c.Z)().m(function e(){var t=this;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:this._unsubUpdates=(0,L.Gc)(this.hass.connection,this.urlPath,function(){return t._lovelaceChanged()});case 1:return e.a(2)}},e,this)})),function(){return b.apply(this,arguments)})},{key:"_lovelaceChanged",value:function(){var e=this;this._ignoreNextUpdateEvent?this._ignoreNextUpdateEvent=!1:this.isConnected?(0,S.C)(this,{message:this.hass.localize("ui.panel.lovelace.changed_toast.message"),action:{action:function(){return e._fetchConfig(!1)},text:this.hass.localize("ui.common.refresh")},duration:-1,dismissable:!1}):this._fetchConfigOnConnect=!0}},{key:"urlPath",get:function(){return"lovelace"===this.panel.url_path?null:this.panel.url_path}},{key:"_forceFetchConfig",value:function(){this._fetchConfig(!0)}},{key:"_fetchConfig",value:(i=(0,d.Z)((0,c.Z)().m(function e(t){var o,i,a,n,s,r,l,d,h=this;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:return this._loading=!0,a=this.panel.config.mode,(s=window).llConfProm&&(n=s.llConfProm,s.llConfProm=void 0),R||(R=!0,(s.llResProm||(0,$.eL)(this.hass.connection)).then(function(e){return(0,E.k)(e,h.hass)})),null===this.urlPath&&n||(this.lovelace&&"yaml"===this.lovelace.mode&&(this._ignoreNextUpdateEvent=!0),n=(0,A.Q2)(this.hass.connection,this.urlPath,t)),e.p=1,e.n=2,n;case 2:if(i=e.v,!(0,A.Tx)(i)){e.n=5;break}if(null!==(r=this.hass)&&void 0!==r&&r.entities&&this.hass.devices&&this.hass.areas){e.n=3;break}return e.a(2);case 3:return e.n=4,(0,P.to)(i,this.hass);case 4:o=e.v,e.n=6;break;case 5:o=i;case 6:e.n=11;break;case 7:if(e.p=7,"config_not_found"===(d=e.v).code){e.n=8;break}return console.log(d),this._panelState="error",this._errorMsg=d.message,e.a(2);case 8:if(null!==(l=this.hass)&&void 0!==l&&l.entities&&this.hass.devices&&this.hass.areas){e.n=9;break}return e.a(2);case 9:return e.n=10,(0,P.to)(T,this.hass);case 10:o=e.v,i=T,a="generated";case 11:return e.p=11,this._loading=!1,this.lovelace&&"yaml"===this.lovelace.mode&&setTimeout(function(){h._ignoreNextUpdateEvent=!1},2e3),e.f(11);case 12:this._panelState="yaml-editor"===this._panelState?this._panelState:"loaded",this._setLovelaceConfig(o,i,a);case 13:return e.a(2)}},e,this,[[1,7,11,12]])})),function(e){return i.apply(this,arguments)})},{key:"_checkLovelaceConfig",value:function(e){var t=(0,H.A5)(e);return w()(t)}},{key:"_setLovelaceConfig",value:function(e,t,i){var a=this;e=this._checkLovelaceConfig(e);var n,s,r=this.urlPath;this.lovelace={config:e,rawConfig:t,mode:i,urlPath:this.urlPath,editMode:!!this.lovelace&&this.lovelace.editMode,locale:this.hass.locale,enableFullEditMode:function(){D||(D=!0,Promise.all([o.e("9631"),o.e("31406"),o.e("75396")]).then(o.bind(o,26102))),a._panelState="yaml-editor"},setEditMode:function(e){"generated"===a.lovelace.mode&&e?(0,z.Z)(a,{lovelace:a.lovelace,mode:a.panel.config.mode,narrow:a.narrow}):(0,A.Tx)(a.lovelace.rawConfig)&&e?a.lovelace.enableFullEditMode():a._updateLovelace({editMode:e})},saveConfig:(s=(0,d.Z)((0,c.Z)().m(function e(t){var o,i,n,s,l,d;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:if(o=a.lovelace,i=o.config,n=o.rawConfig,s=o.mode,t=a._checkLovelaceConfig(t),!(0,A.Tx)(t)){e.n=2;break}return e.n=1,(0,P.to)(t,a.hass);case 1:l=e.v,e.n=3;break;case 2:l=t;case 3:return e.p=3,a._updateLovelace({config:l,rawConfig:t,mode:"storage"}),a._ignoreNextUpdateEvent=!0,e.n=4,(0,A.Oh)(a.hass,r,t);case 4:e.n=6;break;case 5:throw e.p=5,d=e.v,console.error(d),a._updateLovelace({config:i,rawConfig:n,mode:s}),d;case 6:return e.a(2)}},e,null,[[3,5]])})),function(e){return s.apply(this,arguments)}),deleteConfig:(n=(0,d.Z)((0,c.Z)().m(function e(){var t,o,i,n,s,l;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:return t=a.lovelace,o=t.config,i=t.rawConfig,n=t.mode,e.p=1,e.n=2,(0,P.to)(T,a.hass);case 2:return s=e.v,a._updateLovelace({config:s,rawConfig:T,mode:"generated",editMode:!1}),a._ignoreNextUpdateEvent=!0,e.n=3,(0,A.vj)(a.hass,r);case 3:e.n=5;break;case 4:throw e.p=4,l=e.v,console.error(l),a._updateLovelace({config:o,rawConfig:i,mode:n}),l;case 5:return e.a(2)}},e,null,[[1,4]])})),function(){return n.apply(this,arguments)}),showToast:function(e){return(0,S.C)(a,e)}}}},{key:"_updateLovelace",value:function(e){this.lovelace=Object.assign(Object.assign({},this.lovelace),e),"editMode"in e&&window.history.replaceState(null,"",(0,k.q)(e.editMode?(0,x.j4)({edit:"1"}):(0,x.pc)("edit")))}}]);var i,b,_,y}(m.oi);(0,b.__decorate)([(0,y.Cb)({attribute:!1})],I.prototype,"panel",void 0),(0,b.__decorate)([(0,y.Cb)({attribute:!1})],I.prototype,"hass",void 0),(0,b.__decorate)([(0,y.Cb)({type:Boolean})],I.prototype,"narrow",void 0),(0,b.__decorate)([(0,y.Cb)({attribute:!1})],I.prototype,"route",void 0),(0,b.__decorate)([(0,y.SB)()],I.prototype,"_panelState",void 0),(0,b.__decorate)([(0,y.SB)()],I.prototype,"_errorMsg",void 0),(0,b.__decorate)([(0,y.SB)()],I.prototype,"lovelace",void 0),I=(0,b.__decorate)([(0,y.Mo)("ha-panel-lovelace")],I),i()}catch(j){i(j)}})},64667:function(e,t,o){"use strict";o.a(e,async function(e,t){try{o(44776),o(26847),o(2394),o(81738),o(94814),o(29981),o(22960),o(6989),o(72489),o(1455),o(64455),o(41381),o(27530);var i=o(73742),a=(o(98334),o(59048)),n=o(7616),s=o(31733),r=o(25191),l=o(28105),c=o(37528),d=o(39884),h=o(84213),u=o(67050),v=o(21682),p=o(64637),f=o(87639),g=o(65863),b=(o(41037),o(46358),o(48017),o(51383),o(45109),o(69760),o(11969),o(993),o(9036)),_=o(25151),w=o(70695),m=o(7629),y=o(72242),k=o(99469),x=o(76716),C=o(21038),V=o(56812),M=o(95814),L=o(42399),A=o(94844),$=o(20434),Z=o(73261),S=o(54179),H=o(69868),E=o(36748),z=o(55769),B=o(41341),P=(o(41479),o(38826),e([b,B]));[b,B]=P.then?(await P)():P;let U,T,D,R,I,j,N,O,Q,F,W,q,X,Y,G,J,K,ee,te,oe,ie=e=>e;const ae="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",ne="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10M17,11H15V9H17V11M13,11H11V9H13V11M9,11H7V9H9V11Z",se="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",re="M15,7H20.5L15,1.5V7M8,0H16L22,6V18A2,2 0 0,1 20,20H8C6.89,20 6,19.1 6,18V2A2,2 0 0,1 8,0M4,4V22H20V24H4A2,2 0 0,1 2,22V4H4Z",le="M5,15.5L7.5,20H2.5L5,15.5M9,19H21V17H9V19M5,9.5L7.5,14H2.5L5,9.5M9,13H21V11H9V13M5,3.5L7.5,8H2.5L5,3.5M9,7H21V5H9V7Z",ce="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",de="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",he="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ue="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",ve="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",pe="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",fe="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z";class ge extends a.oi{_renderActionItems(){var e,t,o;const i=[];this._editMode&&i.push((0,a.dy)(U||(U=ie`<mwc-button outlined class="exit-edit-mode" .label="${0}" @click="${0}"></mwc-button> <a href="${0}" rel="noreferrer" class="menu-link" target="_blank"> <ha-icon-button .label="${0}" .path="${0}"></ha-icon-button> </a>`),this.hass.localize("ui.panel.lovelace.menu.exit_edit_mode"),this._editModeDisable,(0,L.R)(this.hass,"/dashboards/"),this.hass.localize("ui.panel.lovelace.menu.help"),ce));const n=[{icon:le,key:"ui.panel.lovelace.unused_entities.title",overflowAction:this._handleUnusedEntities,visible:this._editMode&&!0,overflow:!0},{icon:ae,key:"ui.panel.lovelace.editor.menu.raw_editor",overflowAction:this._handleRawEditor,visible:this._editMode,overflow:!0},{icon:fe,key:"ui.panel.lovelace.editor.menu.manage_dashboards",overflowAction:this._handleManageDashboards,visible:this._editMode&&!0,overflow:!0},{icon:re,key:"ui.panel.lovelace.editor.menu.manage_resources",overflowAction:this._handleManageResources,visible:this._editMode&&(null===(e=this.hass.userData)||void 0===e?void 0:e.showAdvanced),overflow:!0},{icon:de,key:"ui.panel.lovelace.menu.search_entities",buttonAction:this._showQuickBar,overflowAction:this._handleShowQuickBar,visible:!this._editMode,overflow:this.narrow,suffix:this.hass.enableShortcuts?"(E)":void 0},{icon:ne,key:"ui.panel.lovelace.menu.assist_tooltip",buttonAction:this._showVoiceCommandDialog,overflowAction:this._handleShowVoiceCommandDialog,visible:!this._editMode&&this._conversation(this.hass.config.components),overflow:this.narrow,suffix:this.hass.enableShortcuts?"(A)":void 0},{icon:ve,key:"ui.common.refresh",overflowAction:this._handleRefresh,visible:!this._editMode&&this._yamlMode,overflow:!0},{icon:pe,key:"ui.panel.lovelace.unused_entities.title",overflowAction:this._handleUnusedEntities,visible:!this._editMode&&this._yamlMode,overflow:!0},{icon:ve,key:"ui.panel.lovelace.menu.reload_resources",overflowAction:this._handleReloadResources,visible:!this._editMode&&"yaml"===(null===(t=this.hass.panels.lovelace)||void 0===t||null===(t=t.config)||void 0===t?void 0:t.mode),overflow:!0},{icon:he,key:"ui.panel.lovelace.menu.configure_ui",overflowAction:this._handleEnableEditMode,buttonAction:this._enableEditMode,visible:!this._editMode&&(null===(o=this.hass.user)||void 0===o?void 0:o.is_admin)&&!this.hass.config.recovery_mode,overflow:!0,overflow_can_promote:!0}],s=n.filter(e=>e.visible&&e.overflow),r=1===s.length&&s[0].overflow_can_promote;if(n.filter(e=>e.visible&&(!e.overflow||r)).forEach(e=>{i.push((0,a.dy)(T||(T=ie`<ha-tooltip slot="actionItems" placement="bottom" .content="${0}"> <ha-icon-button .path="${0}" @click="${0}"></ha-icon-button> </ha-tooltip>`),[this.hass.localize(e.key),e.suffix].join(" "),e.icon,e.buttonAction))}),s.length&&!r){const e=[];s.forEach(t=>{e.push((0,a.dy)(D||(D=ie`<ha-list-item graphic="icon" @request-selected="${0}"> ${0} <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> </ha-list-item>`),t.overflowAction,[this.hass.localize(t.key),t.suffix].join(" "),t.icon))}),i.push((0,a.dy)(R||(R=ie`<ha-button-menu slot="actionItems"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> ${0} </ha-button-menu>`),this.hass.localize("ui.panel.lovelace.editor.menu.open"),se,e))}return(0,a.dy)(I||(I=ie`${0}`),i)}render(){var e,t,o,i;const n=null!==(e=null===(t=this.lovelace)||void 0===t?void 0:t.config.views)&&void 0!==e?e:[],l="number"==typeof this._curView?n[this._curView]:void 0,c=this.panel?(0,m._N)(this.hass,this.panel):void 0,d=(null==l?void 0:l.background)||this.config.background,h=e=>void 0!==e.visible&&(Array.isArray(e.visible)&&!e.visible.some(e=>{var t;return e.user===(null===(t=this.hass.user)||void 0===t?void 0:t.id)})||!1===e.visible),u=(0,a.dy)(j||(j=ie`<sl-tab-group @sl-tab-show="${0}"> ${0} </sl-tab-group>`),this._handleViewSelected,n.map((e,t)=>{const o=!this._editMode&&(e.subview||h(e));return(0,a.dy)(N||(N=ie` <sl-tab slot="nav" panel="${0}" .active="${0}" .disabled="${0}" aria-label="${0}" class="${0}"> ${0} ${0} ${0} </sl-tab> `),t,this._curView===t,o,(0,r.o)(e.title),(0,s.$)({icon:Boolean(e.icon),"hide-tab":Boolean(o)}),this._editMode?(0,a.dy)(O||(O=ie` <ha-icon-button-arrow-prev .hass="${0}" .label="${0}" class="edit-icon view" @click="${0}" .disabled="${0}"></ha-icon-button-arrow-prev> `),this.hass,this.hass.localize("ui.panel.lovelace.editor.edit_view.move_left"),this._moveViewLeft,0===this._curView):a.Ld,e.icon?(0,a.dy)(Q||(Q=ie` <ha-icon class="${0}" title="${0}" .icon="${0}"></ha-icon> `),(0,s.$)({"child-view-icon":Boolean(e.subview)}),(0,r.o)(e.title),e.icon):e.title||this.hass.localize("ui.panel.lovelace.views.unnamed_view"),this._editMode?(0,a.dy)(F||(F=ie` <ha-icon-button .title="${0}" class="edit-icon view" .path="${0}" @click="${0}"></ha-icon-button> <ha-icon-button-arrow-next .hass="${0}" .label="${0}" class="edit-icon view" @click="${0}" .disabled="${0}"></ha-icon-button-arrow-next> `),this.hass.localize("ui.panel.lovelace.editor.edit_view.edit"),he,this._editView,this.hass,this.hass.localize("ui.panel.lovelace.editor.edit_view.move_right"),this._moveViewRight,this._curView+1===n.length):a.Ld)}));return(0,a.dy)(W||(W=ie` <div class="${0}"> <div class="header"> <div class="toolbar"> ${0} </div> ${0} </div> <hui-view-container .hass="${0}" .theme="${0}" id="view" @ll-rebuild="${0}"> <hui-view-background .hass="${0}" .background="${0}"> </hui-view-background> </hui-view-container> </div> `),(0,s.$)({"edit-mode":this._editMode}),this._editMode?(0,a.dy)(q||(q=ie` <div class="main-title"> ${0} <ha-icon-button slot="actionItems" .label="${0}" .path="${0}" class="edit-icon" @click="${0}"></ha-icon-button> </div> <div class="action-items">${0}</div> `),c||this.hass.localize("ui.panel.lovelace.editor.header"),this.hass.localize("ui.panel.lovelace.editor.edit_lovelace.edit_title"),he,this._editDashboard,this._renderActionItems()):(0,a.dy)(X||(X=ie` ${0} ${0} <div class="action-items">${0}</div> `),null!=l&&l.subview?(0,a.dy)(Y||(Y=ie` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${0}"></ha-icon-button-arrow-prev> `),this._goBack):(0,a.dy)(G||(G=ie` <ha-menu-button slot="navigationIcon" .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow),null!=l&&l.subview?(0,a.dy)(J||(J=ie`<div class="main-title">${0}</div>`),l.title):n.filter(e=>!e.subview).length>1?u:(0,a.dy)(K||(K=ie` <div class="main-title"> ${0} </div> `),null!==(o=null===(i=n[0])||void 0===i?void 0:i.title)&&void 0!==o?o:c),this._renderActionItems()),this._editMode?(0,a.dy)(ee||(ee=ie`<div class="edit-tab-bar"> ${0} <ha-icon-button slot="nav" id="add-view" @click="${0}" .label="${0}" .path="${0}"></ha-icon-button> </div>`),u,this._addView,this.hass.localize("ui.panel.lovelace.editor.edit_view.add"),ue):a.Ld,this.hass,null==l?void 0:l.theme,this._debouncedConfigChanged,this.hass,d)}_clearParam(e){window.history.replaceState(null,"",(0,v.q)((0,p.pc)(e)))}firstUpdated(e){super.firstUpdated(e);const t=(0,p.Q2)();var o;if("1"===t.edit)this._clearParam("edit"),null!==(o=this.hass.user)&&void 0!==o&&o.is_admin&&"storage"===this.lovelace.mode&&this.lovelace.setEditMode(!0);else if("1"===t.conversation)this._clearParam("conversation"),this._showVoiceCommandDialog();else if(t["more-info-entity-id"]){const e=t["more-info-entity-id"];this._clearParam("more-info-entity-id"),(0,g.T)(()=>{this._showMoreInfoDialog(e)})}window.addEventListener("scroll",this._handleWindowScroll,{passive:!0})}connectedCallback(){super.connectedCallback(),window.addEventListener("scroll",this._handleWindowScroll,{passive:!0}),window.addEventListener("popstate",this._handlePopState),window.history.scrollRestoration="manual"}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("scroll",this._handleWindowScroll),window.removeEventListener("popstate",this._handlePopState),this.toggleAttribute("scrolled",0!==window.scrollY),window.history.scrollRestoration="auto"}updated(e){super.updated(e);const t=this._viewRoot.lastChild;let o;e.has("hass")&&t&&(t.hass=this.hass),e.has("narrow")&&t&&(t.narrow=this.narrow);let i=!1,a=this.route.path.split("/")[1];if(a=a?decodeURI(a):void 0,e.has("route")){const e=this.config.views;if(!a&&e.length)o=e.findIndex(this._isVisible),this._navigateToView(e[o].path||o,!0);else if("hass-unused-entities"===a)o="hass-unused-entities";else if(a){const t=a,i=Number(t);let n=0;for(let o=0;o<e.length;o++)if(e[o].path===t||o===i){n=o;break}o=n}}if(e.has("lovelace")){const n=e.get("lovelace");if(n&&n.config===this.lovelace.config||(i=!0),!n||n.editMode!==this.lovelace.editMode){const e=this.config&&this.config.views;"storage"===this.lovelace.mode&&"hass-unused-entities"===a&&(o=e.findIndex(this._isVisible),this._navigateToView(e[o].path||o,!0))}!i&&t&&(t.lovelace=this.lovelace)}(void 0!==o||i)&&(i&&void 0===o&&(o=this._curView),(0,g.T)(()=>{if(e.has("route")){const e=this._restoreScroll&&this._viewScrollPositions[o]||0;this._restoreScroll=!1,requestAnimationFrame(()=>scrollTo({behavior:"auto",top:e}))}this._selectView(o,i)}))}get config(){return this.lovelace.config}get _yamlMode(){return"yaml"===this.lovelace.mode}get _editMode(){return this.lovelace.editMode}get _viewRoot(){return this.shadowRoot.getElementById("view")}_handleRefresh(e){(0,h.Q)(e)&&(0,d.B)(this,"config-refresh")}_handleReloadResources(e){(0,h.Q)(e)&&(this.hass.callService("lovelace","reload_resources"),(0,y.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.reload_resources.refresh_header"),text:this.hass.localize("ui.panel.lovelace.reload_resources.refresh_body"),confirmText:this.hass.localize("ui.common.refresh"),dismissText:this.hass.localize("ui.common.not_now"),confirm:()=>location.reload()}))}_handleShowQuickBar(e){(0,h.Q)(e)&&this._showQuickBar()}_showQuickBar(){const e={keyboard_shortcut:(0,a.dy)(te||(te=ie`<a href="#" @click="${0}">${0}</a>`),this._openShortcutDialog,this.hass.localize("ui.tips.keyboard_shortcut"))};(0,x.Hk)(this,{mode:x.Ie.Entity,hint:this.hass.enableShortcuts?this.hass.localize("ui.tips.key_e_tip",e):void 0})}_goBack(){var e,t;const o=null!==(e=null===(t=this.lovelace)||void 0===t?void 0:t.config.views)&&void 0!==e?e:[],i="number"==typeof this._curView?o[this._curView]:void 0;null!=(null==i?void 0:i.back_path)?(0,u.c)(i.back_path,{replace:!0}):history.length>1?history.back():o[0].subview?(0,u.c)("/"):(0,u.c)(this.route.prefix,{replace:!0})}_handleRawEditor(e){(0,h.Q)(e)&&this.lovelace.enableFullEditMode()}_handleManageDashboards(e){(0,h.Q)(e)&&(0,u.c)("/config/lovelace/dashboards")}_handleManageResources(e){(0,h.Q)(e)&&(0,u.c)("/config/lovelace/resources")}_handleUnusedEntities(e){var t;(0,h.Q)(e)&&(0,u.c)(`${null===(t=this.route)||void 0===t?void 0:t.prefix}/hass-unused-entities`)}_handleShowVoiceCommandDialog(e){(0,h.Q)(e)&&this._showVoiceCommandDialog()}_showVoiceCommandDialog(){(0,V._)(this,this.hass,{pipeline_id:"last_used"})}_showMoreInfoDialog(e){(0,k.A)(this,{entityId:e})}_handleEnableEditMode(e){(0,h.Q)(e)&&this._enableEditMode()}async _enableEditMode(){if(this._yamlMode)(0,y.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.yaml_unsupported")});else{if((0,_.Tx)(this.lovelace.rawConfig)&&!(0,z.ug)(this.lovelace.rawConfig.strategy)){var e;const t=await(0,E.lN)("dashboard",this.lovelace.rawConfig.strategy.type).catch(e=>{});if(null!=t&&t.noEditor)return void(0,S.Z)(this,{lovelace:this.lovelace,mode:"storage",narrow:this.narrow});const o=null===(e=this.route)||void 0===e?void 0:e.prefix.slice(1);await this.hass.loadFragmentTranslation("config");const i=(await(0,w.j2)(this.hass)).find(e=>e.url_path===o);return void(0,Z.L)(this,{config:this.lovelace.rawConfig,saveConfig:this.lovelace.saveConfig,takeControl:()=>{(0,S.Z)(this,{lovelace:this.lovelace,mode:"storage",narrow:this.narrow})},deleteDashboard:async()=>{if(!(await(0,y.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.lovelace.dashboards.confirm_delete_title",{dashboard_title:i.title}),text:this.hass.localize("ui.panel.config.lovelace.dashboards.confirm_delete_text"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})))return!1;try{return await(0,w.iM)(this.hass,i.id),!0}catch(e){return!1}}})}this.lovelace.setEditMode(!0)}}_editModeDisable(){this.lovelace.setEditMode(!1)}async _editDashboard(){var e;const t=null===(e=this.route)||void 0===e?void 0:e.prefix.slice(1);await this.hass.loadFragmentTranslation("config");const o=(await(0,w.j2)(this.hass)).find(e=>e.url_path===t);(0,A.w)(this,{dashboard:o,urlPath:t,updateDashboard:async e=>{await(0,w.Y)(this.hass,o.id,e)},removeDashboard:async()=>{if(!(await(0,y.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.lovelace.dashboards.confirm_delete_title",{dashboard_title:o.title}),text:this.hass.localize("ui.panel.config.lovelace.dashboards.confirm_delete_text"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})))return!1;try{return await(0,w.iM)(this.hass,o.id),!0}catch(e){return!1}}})}_navigateToView(e,t){const o=this.lovelace.editMode?`${this.route.prefix}/${e}?${(0,p.j4)({edit:"1"})}`:`${this.route.prefix}/${e}${location.search}`;`${location.pathname}${location.search}`!==o&&(0,u.c)(o,{replace:t})}_editView(){(0,H.k)(this,{lovelace:this.lovelace,viewIndex:this._curView,saveCallback:(e,t)=>{const o=t.path||e;this._navigateToView(o)}})}_moveViewLeft(e){if(e.stopPropagation(),0===this._curView)return;const t=this.lovelace,o=this._curView,i=this._curView-1;this._curView=i,this.config.views[o].path||this._navigateToView(i,!0),t.saveConfig((0,$.mA)(t.config,o,i))}_moveViewRight(e){if(e.stopPropagation(),this._curView+1===this.lovelace.config.views.length)return;const t=this.lovelace,o=this._curView,i=this._curView+1;this._curView=i,this.config.views[o].path||this._navigateToView(i,!0),t.saveConfig((0,$.mA)(t.config,o,i))}_addView(){(0,H.k)(this,{lovelace:this.lovelace,saveCallback:(e,t)=>{const o=t.path||e;this._navigateToView(o)}})}_handleViewSelected(e){e.preventDefault();const t=Number(e.detail.name);if(t!==this._curView){const e=this.config.views[t].path||t;this._navigateToView(e)}else this._editMode||scrollTo({behavior:"smooth",top:0})}_selectView(e,t){if(!t&&this._curView===e)return;null!=this._curView&&(this._viewScrollPositions[this._curView]=window.scrollY),e=void 0===e?0:e,this._curView=e,t&&(this._viewCache={},this._viewScrollPositions={});const i=this._viewRoot;if(i.lastChild&&i.removeChild(i.lastChild),"hass-unused-entities"===e){const e=document.createElement("hui-unused-entities");return Promise.all([o.e("73614"),o.e("56932"),o.e("71383"),o.e("74726"),o.e("50716"),o.e("38570")]).then(o.bind(o,44656)).then(()=>{e.hass=this.hass,e.lovelace=this.lovelace,e.narrow=this.narrow}),void i.appendChild(e)}let a;this.config.views[e]?(!t&&this._viewCache[e]?a=this._viewCache[e]:(a=document.createElement("hui-view"),a.index=e,this._viewCache[e]=a),a.lovelace=this.lovelace,a.hass=this.hass,a.narrow=this.narrow,i.appendChild(a)):this.lovelace.setEditMode(!0)}_openShortcutDialog(e){e.preventDefault(),(0,C.n)(this)}static get styles(){return[M.Qx,(0,a.iv)(oe||(oe=ie`:host{-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none}.header{background-color:var(--app-header-background-color);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);position:fixed;top:0;width:var(--mdc-top-app-bar-width,100%);-webkit-backdrop-filter:var(--app-header-backdrop-filter,none);backdrop-filter:var(--app-header-backdrop-filter,none);padding-top:var(--safe-area-inset-top);z-index:4;transition:box-shadow .2s linear}:host([scrolled]) .header{box-shadow:var(--mdc-top-app-bar-fixed-box-shadow,0px 2px 4px -1px rgba(0,0,0,.2),0px 4px 5px 0px rgba(0,0,0,.14),0px 1px 10px 0px rgba(0,0,0,.12))}.edit-mode .header{background-color:var(--app-header-edit-background-color,#455a64);color:var(--app-header-edit-text-color,#fff)}.toolbar{height:var(--header-height);display:flex;align-items:center;font-size:var(--ha-font-size-xl);padding:0px 12px;font-weight:var(--ha-font-weight-normal);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:0 4px}}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);flex-grow:1}.action-items{white-space:nowrap;display:flex;align-items:center}sl-tab-group{--ha-tab-indicator-color:var(
            --app-header-selection-bar-color,
            var(--app-header-text-color, white)
          );--ha-tab-active-text-color:var(--app-header-text-color, white);--ha-tab-track-color:transparent;align-self:flex-end;flex-grow:1;min-width:0;height:100%}sl-tab-group::part(nav){padding:0}sl-tab-group::part(scroll-button){background-color:var(--app-header-background-color);background:linear-gradient(90deg,var(--app-header-background-color),transparent);z-index:1}sl-tab-group::part(scroll-button--end){background:linear-gradient(270deg,var(--app-header-background-color),transparent)}.edit-mode sl-tab-group::part(scroll-button){background-color:var(--app-header-edit-background-color,#455a64);background:linear-gradient(90deg,var(--app-header-edit-background-color,#455a64),transparent)}.edit-mode sl-tab-group::part(scroll-button--end){background:linear-gradient(270deg,var(--app-header-edit-background-color,#455a64),transparent)}.edit-mode div[main-title]{pointer-events:auto}.edit-tab-bar{display:flex}.edit-mode sl-tab-group{flex-grow:0;color:var(--app-header-edit-text-color,#fff);--ha-tab-active-text-color:var(--app-header-edit-text-color, #fff);--ha-tab-indicator-color:var(--app-header-edit-text-color, #fff)}.edit-mode sl-tab{height:54px}sl-tab{height:calc(var(--header-height,56px) - 2px)}sl-tab[aria-selected=true] .edit-icon{display:inline-flex}sl-tab::part(base){padding-inline-start:var(--ha-tab-padding-start,var(--sl-spacing-large));padding-inline-end:var(--ha-tab-padding-end,var(--sl-spacing-large))}sl-tab::part(base){padding-top:calc((var(--header-height) - 20px)/ 2);padding-bottom:calc((var(--header-height) - 20px)/ 2 - 2px)}sl-tab.icon::part(base){padding-top:calc((var(--header-height) - 20px)/ 2 - 2px);padding-bottom:calc((var(--header-height) - 20px)/ 2 - 4px)}.edit-mode sl-tab[aria-selected=true]::part(base){padding:4px 0 2px 0}.edit-icon{color:var(--accent-color);padding:0 8px;vertical-align:middle;--mdc-theme-text-disabled-on-light:var(--disabled-text-color);direction:var(--direction)}.edit-icon:last-child{padding-left:0}.edit-icon.view{display:none}#add-view{white-space:nowrap;display:flex;align-items:center}#add-view ha-svg-icon{background-color:var(--accent-color);border-radius:4px}a{color:var(--text-primary-color,#fff)}mwc-button.warning:not([disabled]){color:var(--error-color)}hui-view-container{position:relative;display:flex;min-height:100vh;box-sizing:border-box;padding-top:calc(var(--header-height) + var(--safe-area-inset-top));padding-left:var(--safe-area-inset-left);padding-right:var(--safe-area-inset-right);padding-inline-start:var(--safe-area-inset-left);padding-inline-end:var(--safe-area-inset-right);padding-bottom:var(--safe-area-inset-bottom)}hui-view-container>*{flex:1 1 100%;max-width:100%}.edit-mode hui-view-container{padding-top:calc(var(--header-height) + 48px + var(--safe-area-inset-top))}.hide-tab{display:none}.menu-link{text-decoration:none}.exit-edit-mode{--mdc-theme-primary:var(--app-header-edit-text-color, #fff);--mdc-button-outline-color:var(--app-header-edit-text-color, #fff);--mdc-typography-button-font-size:var(--ha-font-size-m)}.child-view-icon{opacity:.5}`))]}constructor(){super(),this.narrow=!1,this._viewScrollPositions={},this._restoreScroll=!1,this._conversation=(0,l.Z)(e=>(0,c.p)(this.hass,"conversation")),this._handleWindowScroll=()=>{this.toggleAttribute("scrolled",0!==window.scrollY)},this._handlePopState=()=>{this._restoreScroll=!0},this._isVisible=e=>Boolean(this._editMode||void 0===e.visible||!0===e.visible||Array.isArray(e.visible)&&e.visible.some(e=>{var t;return e.user===(null===(t=this.hass.user)||void 0===t?void 0:t.id)})),this._debouncedConfigChanged=(0,f.D)(()=>this._selectView(this._curView,!0),100,!1)}}(0,i.__decorate)([(0,n.Cb)({attribute:!1})],ge.prototype,"panel",void 0),(0,i.__decorate)([(0,n.Cb)({attribute:!1})],ge.prototype,"hass",void 0),(0,i.__decorate)([(0,n.Cb)({attribute:!1})],ge.prototype,"lovelace",void 0),(0,i.__decorate)([(0,n.Cb)({type:Boolean})],ge.prototype,"narrow",void 0),(0,i.__decorate)([(0,n.Cb)({attribute:!1})],ge.prototype,"route",void 0),(0,i.__decorate)([(0,n.SB)()],ge.prototype,"_curView",void 0),ge=(0,i.__decorate)([(0,n.Mo)("hui-root")],ge),t()}catch(U){t(U)}})},41479:function(e,t,o){"use strict";var i,a=o(54982),n=o(61943),s=o(54521),r=o(4490),l=o(20129),c=o(53389),d=o(85297),h=(o(12212),o(39710),o(56389),o(10490),o(44776),o(73742)),u=o(59048),v=o(7616),p=function(e){function t(){return(0,s.Z)(this,t),(0,l.Z)(this,t,arguments)}return(0,d.Z)(t,e),(0,r.Z)(t,[{key:"render",value:function(){return u.Ld}},{key:"_applyTheme",value:function(){var e=getComputedStyle(this).getPropertyValue("--lovelace-background"),t=this._isFixedBackground(this.background||e),o=this._computeBackgroundProperty(this.background);this.toggleAttribute("fixed-background",t),this.style.setProperty("--view-background",o);var i=this._computeBackgroundOpacityProperty(this.background);this.style.setProperty("--view-background-opacity",i)}},{key:"_isFixedBackground",value:function(e){return"string"==typeof e?e.split(" ").includes("fixed"):"object"===(0,n.Z)(e)&&"fixed"===e.attachment}},{key:"_computeBackgroundProperty",value:function(e){if("object"===(0,n.Z)(e)&&e.image){var t,o,i,a=null!==(t=e.alignment)&&void 0!==t?t:"center",s=null!==(o=e.size)&&void 0!==o?o:"cover",r=null!==(i=e.repeat)&&void 0!==i?i:"no-repeat";return"".concat(a," / ").concat(s," ").concat(r," url('").concat(this.hass.hassUrl(e.image),"')")}return"string"==typeof e?e:null}},{key:"_computeBackgroundOpacityProperty",value:function(e){return"object"===(0,n.Z)(e)&&e.image&&e.opacity?"".concat(e.opacity,"%"):null}},{key:"willUpdate",value:function(e){if((0,c.Z)(t,"willUpdate",this,3)([e]),e.has("hass")&&this.hass){var o=e.get("hass");if(!o||this.hass.themes!==o.themes||this.hass.selectedTheme!==o.selectedTheme)return void this._applyTheme()}e.has("background")&&this._applyTheme()}}])}(u.oi);p.styles=(0,u.iv)(i||(i=(0,a.Z)([":host([fixed-background]){display:block;z-index:-1;position:fixed;background-attachment:scroll!important}:host(:not([fixed-background])){z-index:-1;position:absolute}:host{top:0;left:0;right:0;bottom:0;height:100%;width:100%;background:var(--view-background,var(--lovelace-background,var(--primary-background-color)));opacity:var(--view-background-opacity)}"]))),(0,h.__decorate)([(0,v.Cb)({attribute:!1})],p.prototype,"hass",void 0),(0,h.__decorate)([(0,v.Cb)({attribute:!1})],p.prototype,"background",void 0),p=(0,h.__decorate)([(0,v.Mo)("hui-view-background")],p)},42399:function(e,t,o){"use strict";o.d(t,{R:function(){return i}});o(12212),o(39710),o(56389);var i=function(e,t){return"https://".concat(e.config.version.includes("b")?"rc":e.config.version.includes("dev")?"next":"www",".home-assistant.io").concat(t)}},10490:function(e,t,o){"use strict";o(77341)({target:"String",proto:!0},{repeat:o(84838)})},71551:function(e,t,o){"use strict";o.d(t,{Y:function(){return a}});o(81738),o(22960),o(54480),o(67398);var i=o(17915);function a(e,t){var o=(0,i.ih)({waitUntilFirstUpdate:!1},t);return function(t,i){var a=t.update,n=Array.isArray(e)?e:[e];t.update=function(e){var t=this;n.forEach(function(a){var n=a;if(e.has(n)){var s=e.get(n),r=t[n];s!==r&&(o.waitUntilFirstUpdate&&!t.hasUpdated||t[i](s,r))}}),a.call(this,e)}}}}}]);
//# sourceMappingURL=37221.2c43a335597e86bf.js.map