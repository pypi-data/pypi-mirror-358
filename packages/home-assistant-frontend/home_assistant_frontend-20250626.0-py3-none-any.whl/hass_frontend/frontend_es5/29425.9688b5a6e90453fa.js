"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["29425"],{87578:function(t,e,i){i.d(e,{x:function(){return n}});var n=function(t,e){return t.substring(0,e.length)===e}},32483:function(t,e,i){i.d(e,{U:function(){return _}});i(26847),i(7175),i(54480),i(48694),i(27530);var n=i(55815),r=i(45657),o=i(66169),a=i(44272),s=i(87409),c=i(16230),l=i(17332),d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var u=0,h=new Map;function _(t,e,i){return function(t,e,i){var n;if(!i||t===c.nZ)return(0,l.g)("--history-unavailable-color",e);if(t===c.lz)return(0,l.g)("--history-unknown-color",e);var u=(0,s.tD)(i,t);if(u){var h=(0,l.g)(u,e);if(h){var _=(0,a.M)(i.entity_id),v=null===(n=d[_])||void 0===n?void 0:n[t];return v?(0,r.uO)((0,o.C)((0,r.Rw)((0,r.wK)(h)),v)):h}}}(t,e,i)||function(t,e){if(h.has(t))return h.get(t);var i=(0,n.hZ)(u,e);return u++,h.set(t,i),i}(t,e)}},59715:function(t,e,i){i.d(e,{U_:function(){return s},Zm:function(){return l},lj:function(){return a},mA:function(){return o},nV:function(){return c}});i(40777),i(70021),i(6988),i(81738),i(29981),i(96821),i(24533),i(54480);if(99387==i.j)var n=i(87578);var r=i(10142),o=function(t,e,i,n){return t.callWS({type:"trace/get",domain:e,item_id:i,run_id:n})},a=function(t,e,i){return t.callWS({type:"trace/list",domain:e,item_id:i})},s=function(t,e,i){return t.callWS({type:"trace/contexts",domain:e,item_id:i})},c=function(t,e){for(var i=e.split("/").reverse(),n=t;i.length;){var o=i.pop(),a=Number(o);if(isNaN(a)){var s=n[o];if(!s&&"sequence"===o)continue;s||"trigger"!==o||(s=n.triggers),s||"condition"!==o||(s=n.conditions),s||"action"!==o||(s=n.actions),n="trigger"===o?(0,r.Kc)(s):s}else if(Array.isArray(n))n=n[a];else if(0!==a)throw new Error("If config is not an array, can only return index 0")}return n},l=function(t){return"trigger"===t||(0,n.x)(t,"trigger/")}},63583:function(t,e,i){i.a(t,async function(t,e){try{var n,r,o,a,s,c,l,d,u,h,_,v,y,g,m,p,f,x,b=i(54982),k=i(54521),w=i(4490),C=i(20129),z=i(85297),Z=(i(12212),i(39710),i(87622),i(26847),i(24819),i(2394),i(13571),i(81738),i(6989),i(54480),i(64455),i(26086),i(56389),i(6202),i(27530),i(73742)),I=i(59048),E=i(7616),M=i(31733),S=i(20480),B=i(37528),N=i(40142),P=i(45691),T=i(89868),U=i(39884),L=i(44272),D=i(67050),W=i(32483),j=i(23476),O=(i(5786),i(19262)),A=i(43563),$=i(95814),V=i(54643),K=i(35580),q=i(96222),F=t([j,O,N,P]);[j,O,N,P]=F.then?(await F)():F;var Q=["script","automation"],R=function(t){function e(){var t;(0,k.Z)(this,e);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(t=(0,C.Z)(this,e,[].concat(c))).userIdToName={},t.traceContexts={},t.entries=[],t.narrow=!1,t.virtualize=!1,t.showIndicator=!1,t.noIcon=!1,t.noName=!1,t.relativeTime=!1,t._renderLogbookItem=function(e,i){var c;if(!e||void 0===i)return I.Ld;var l=t.entries[i-1],d=[],u=e.entity_id?t.hass.states[e.entity_id]:void 0,h=u?(0,A.o1)(u,e.state):void 0,_=e.entity_id?(0,L.M)(e.entity_id):e.domain,v=h||e.icon||e.state||!_||!(0,B.p)(t.hass,_)?void 0:(0,K.X1)({domain:_,type:"icon",useFallback:!0,darkOptimized:null===(c=t.hass.themes)||void 0===c?void 0:c.darkMode}),y=Q.includes(e.domain)&&e.context_id&&e.context_id in t.traceContexts?t.traceContexts[e.context_id]:void 0,g=void 0!==y;return(0,I.dy)(n||(n=(0,b.Z)([' <div class="entry-container ','" .traceLink="','" @click="','"> ',' <div class="entry ','"> <div class="icon-message"> '," ",' <div class="message-relative_time"> <div class="message"> '," "," ",' </div> <div class="secondary"> <span>','</span> - <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '," "," </div> </div> </div> "," </div> </div> "])),(0,M.$)({clickable:g}),y?"/config/".concat(y.domain,"/trace/").concat(y.item_id,"?run_id=").concat(y.run_id):void 0,t._handleClick,0===i||null!=e&&e.when&&null!=l&&l.when&&new Date(1e3*e.when).toDateString()!==new Date(1e3*l.when).toDateString()?(0,I.dy)(r||(r=(0,b.Z)([' <h4 class="date"> '," </h4> "])),(0,N.p6)(new Date(1e3*e.when),t.hass.locale,t.hass.config)):I.Ld,(0,M.$)({"no-entity":!e.entity_id}),t.noIcon?"":(0,I.dy)(o||(o=(0,b.Z)([' <state-badge .hass="','" .overrideIcon="','" .overrideImage="','" .stateObj="','" .stateColor="','"></state-badge> '])),t.hass,e.icon,v,e.icon?void 0:h,!1),t.showIndicator?t._renderIndicator(e):"",t.noName?"":t._renderEntity(e.entity_id,e.name,g),t._renderMessage(e,d,_,h,g),t._renderContextMessage(e,d,g),(0,P.Vu)(new Date(1e3*e.when),t.hass.locale,t.hass.config),t.hass,1e3*e.when,e.context_user_id?(0,I.dy)(a||(a=(0,b.Z)(["",""])),t._renderUser(e)):"",g?"- ".concat(t.hass.localize("ui.components.logbook.show_trace")):"",g?(0,I.dy)(s||(s=(0,b.Z)(["<ha-icon-next></ha-icon-next>"]))):"")},t}return(0,z.Z)(e,t),(0,w.Z)(e,[{key:"willUpdate",value:function(t){(!this.hasUpdated&&this.virtualize||t.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,V.o)())}},{key:"shouldUpdate",value:function(t){var e=t.get("hass"),i=void 0===e||e.locale!==this.hass.locale;return t.has("entries")||t.has("traceContexts")||i}},{key:"render",value:function(){var t,e=this;return null!==(t=this.entries)&&void 0!==t&&t.length?(0,I.dy)(l||(l=(0,b.Z)([' <div class="container ha-scrollbar ','" @scroll="','"> '," </div> "])),(0,M.$)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon}),this._saveScrollPos,this.virtualize?(0,I.dy)(d||(d=(0,b.Z)(['<lit-virtualizer @visibilityChanged="','" scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer>'])),this._visibilityChanged,this.entries,this._renderLogbookItem):this.entries.map(function(t,i){return e._renderLogbookItem(t,i)})):(0,I.dy)(c||(c=(0,b.Z)([' <div class="container no-entries"> '," </div> "])),this.hass.localize("ui.components.logbook.entries_not_found"))}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{key:"_visibilityChanged",value:function(t){(0,U.B)(this,"hass-logbook-live",{enable:0===t.first})}},{key:"_renderIndicator",value:function(t){var e=this.hass.states[t.entity_id],i=getComputedStyle(this),n={backgroundColor:void 0!==t.state?(0,W.U)(t.state,i,e):void 0};return(0,I.dy)(u||(u=(0,b.Z)([' <div class="indicator" style="','"></div> '])),(0,S.V)(n))}},{key:"_renderMessage",value:function(t,e,i,n,r){if(t.entity_id&&t.state)return n?(0,A.ri)(this.hass,this.hass.localize,t.state,n,i):t.state;var o=function(t){return t.context_event_type||t.context_state||t.context_message}(t),a=t.message;if(Q.includes(i)&&t.source){if(o)return"";a=(0,A.hb)(this.hass.localize,t.source)}return a?this._formatMessageWithPossibleEntity(o?function(t,e){return e?t.replace(e," "):t}(a,t.context_entity_id):a,e,void 0,r):""}},{key:"_renderUser",value:function(t){var e=t.context_user_id&&this.userIdToName[t.context_user_id];return e?"- ".concat(e):""}},{key:"_renderUnseenContextSourceEntity",value:function(t,e,i){return!t.context_entity_id||e.includes(t.context_entity_id)?"":(0,I.dy)(h||(h=(0,b.Z)([" (",")"])),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i))}},{key:"_renderContextMessage",value:function(t,e,i){if(t.context_state){var n=t.context_entity_id&&t.context_entity_id in this.hass.states?(0,A.o1)(this.hass.states[t.context_entity_id],t.context_state):void 0;return(0,I.dy)(_||(_=(0,b.Z)([""," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by_state_of"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),n?(0,A.ri)(this.hass,this.hass.localize,t.context_state,n,(0,L.M)(t.context_entity_id)):t.context_state)}var r;if("call_service"===t.context_event_type)return(0,I.dy)(v||(v=(0,b.Z)([""," ",""])),this.hass.localize("ui.components.logbook.triggered_by_action"),t.context_domain&&t.context_service?"".concat((0,q.Lh)(this.hass.localize,t.context_domain),":\n      ").concat(this.hass.localize("component.".concat(t.context_domain,".services.").concat(t.context_service,".name"))||(null===(r=this.hass.services[t.context_domain])||void 0===r||null===(r=r[t.context_service])||void 0===r?void 0:r.name)||t.context_service):"");if(!t.context_message||e.includes(t.context_entity_id))return"";if("automation_triggered"===t.context_event_type||"script_started"===t.context_event_type){var o=t.context_source?t.context_source:t.context_message.replace("triggered by ",""),a=(0,A.hb)(this.hass.localize,o);return(0,I.dy)(y||(y=(0,b.Z)([""," "," ",""])),this.hass.localize("automation_triggered"===t.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),t.context_message?this._formatMessageWithPossibleEntity(a,e,void 0,i):"")}return(0,I.dy)(g||(g=(0,b.Z)([" "," "," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by"),t.context_name,this._formatMessageWithPossibleEntity(t.context_message,e,t.context_entity_id,i),this._renderUnseenContextSourceEntity(t,e,i))}},{key:"_renderEntity",value:function(t,e,i){var n=t&&t in this.hass.states,r=e||n&&this.hass.states[t].attributes.friendly_name||t;return n?i?r:(0,I.dy)(m||(m=(0,b.Z)(['<button class="link" @click="','" .entityId="','"> '," </button>"])),this._entityClicked,t,r):r}},{key:"_formatMessageWithPossibleEntity",value:function(t,e,i,n){if(-1!==t.indexOf("."))for(var r=t.split(" "),o=0,a=r.length;o<a;o++)if(r[o]in this.hass.states){var s=r[o];if(e.includes(s))return"";e.push(s);var c=r.splice(o);return c.shift(),(0,I.dy)(p||(p=(0,b.Z)([""," "," ",""])),r.join(" "),this._renderEntity(s,this.hass.states[s].attributes.friendly_name,n),c.join(" "))}if(i&&i in this.hass.states){var l=this.hass.states[i].attributes.friendly_name;if(l&&t.endsWith(l))return e.includes(i)?"":(e.push(i),t=t.substring(0,t.length-l.length),(0,I.dy)(f||(f=(0,b.Z)([""," ",""])),t,this._renderEntity(i,l,n)))}return t}},{key:"_entityClicked",value:function(t){var e=t.currentTarget.entityId;e&&(t.preventDefault(),t.stopPropagation(),(0,U.B)(this,"hass-more-info",{entityId:e}))}},{key:"_handleClick",value:function(t){var e=t.currentTarget;e.traceLink&&((0,D.c)(e.traceLink),(0,U.B)(this,"closed"))}}],[{key:"styles",get:function(){return[$.Qx,$.$c,$.k1,(0,I.iv)(x||(x=(0,b.Z)([":host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:var(--ha-line-height-expanded);padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:4px;flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:var(--ha-font-size-s);line-height:var(--ha-line-height-normal)}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--state-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:var(--ha-line-height-normal)}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-right:8px;margin-inline-end:8px;direction:var(--direction)}"])))]}}])}(I.oi);(0,Z.__decorate)([(0,E.Cb)({attribute:!1})],R.prototype,"hass",void 0),(0,Z.__decorate)([(0,E.Cb)({attribute:!1})],R.prototype,"userIdToName",void 0),(0,Z.__decorate)([(0,E.Cb)({attribute:!1})],R.prototype,"traceContexts",void 0),(0,Z.__decorate)([(0,E.Cb)({attribute:!1})],R.prototype,"entries",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"narrow"})],R.prototype,"narrow",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"virtualize",reflect:!0})],R.prototype,"virtualize",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"show-indicator"})],R.prototype,"showIndicator",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"no-icon"})],R.prototype,"noIcon",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"no-name"})],R.prototype,"noName",void 0),(0,Z.__decorate)([(0,E.Cb)({type:Boolean,attribute:"relative-time"})],R.prototype,"relativeTime",void 0),(0,Z.__decorate)([(0,T.i)(".container")],R.prototype,"_savedScrollPos",void 0),(0,Z.__decorate)([(0,E.hO)({passive:!0})],R.prototype,"_saveScrollPos",null),(0,Z.__decorate)([(0,E.hO)({passive:!0})],R.prototype,"_visibilityChanged",null),R=(0,Z.__decorate)([(0,E.Mo)("ha-logbook-renderer")],R),e()}catch(X){e(X)}})}}]);
//# sourceMappingURL=29425.9688b5a6e90453fa.js.map