(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["35590"],{55815:function(t,e,i){"use strict";i.d(e,{Eu:function(){return r},hZ:function(){return a},o9:function(){return c}});i(24819),i(54480);var n=i(28105),s=i(45657),o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return o[t%o.length]}function a(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||r(t);return(0,s.Rq)(i)}var c=(0,n.Z)(function(t){return o.map(function(e,i){return a(i,t)})},function(t,e){return t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")})},10388:function(t,e,i){"use strict";i.a(t,async function(t,n){try{i.r(e),i.d(e,{computeStateDisplay:function(){return _},computeStateDisplayFromEntityAttributes:function(){return m}});i(39710),i(87799),i(56389);var s=i(16230),o=i(38763),r=i(93836),a=i(40142),c=i(74266),u=i(45691),l=i(28598),d=i(27417),h=i(44272),f=t([r,l,a,u,c]);[r,l,a,u,c]=f.then?(await f)():f;const _=(t,e,i,n,s,o,r)=>{const a=null==o?void 0:o[e.entity_id];return m(t,i,n,s,a,e.entity_id,e.attributes,void 0!==r?r:e.state)},m=(t,e,i,n,f,_,m,g)=>{if(g===s.lz||g===s.nZ)return t(`state.default.${g}`);const b=(0,h.M)(_),p="counter"===b||"number"===b||"input_number"===b;if((0,l.sJ)(m,"sensor"===b?i:[])||p){if("duration"===m.device_class&&m.unit_of_measurement&&r.a_.includes(m.unit_of_measurement))try{return(0,r.LU)(e,g,m.unit_of_measurement,null==f?void 0:f.display_precision)}catch(y){}if("monetary"===m.device_class)try{return(0,l.uf)(g,e,Object.assign({style:"currency",currency:m.unit_of_measurement,minimumFractionDigits:2},(0,l.l4)({state:g,attributes:m},f)))}catch(y){}const i=(0,l.uf)(g,e,(0,l.l4)({state:g,attributes:m},f)),n=(null==f?void 0:f.translation_key)&&t(`component.${f.platform}.entity.${b}.${f.translation_key}.unit_of_measurement`)||m.unit_of_measurement;return n?`${i}${(0,d.L)(n,e)}${n}`:i}if(["date","input_datetime","time"].includes(b))try{const t=g.split(" ");if(2===t.length)return(0,c.o0)(new Date(t.join("T")),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),n);if(1===t.length){if(g.includes("-"))return(0,a.p6)(new Date(`${g}T00:00`),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),n);if(g.includes(":")){const t=new Date;return(0,u.mr)(new Date(`${t.toISOString().split("T")[0]}T${g}`),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),n)}}return g}catch(v){return g}if(["button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word","datetime"].includes(b)||"sensor"===b&&"timestamp"===m.device_class)try{return(0,c.o0)(new Date(g),e,n)}catch(y){return g}return(null==f?void 0:f.translation_key)&&t(`component.${f.platform}.entity.${b}.${f.translation_key}.state.${g}`)||m.device_class&&t(`component.${b}.entity_component.${m.device_class}.state.${g}`)||t(`component.${b}.entity_component._.state.${g}`)||g};n()}catch(_){n(_)}})},39800:function(t,e,i){"use strict";i.d(e,{Z:function(){return s}});i(40777),i(15519),i(64455),i(26086),i(6202);var n=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function s(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:n(t.substr(0,t.length-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:n(e[0]),h:1}:{w:n(e[0]),h:n(e[1])}}catch(i){}return null}},89166:function(t,e,i){"use strict";i.a(t,async function(t,n){try{i.d(e,{Nu:function(){return E},V3:function(){return H},Vk:function(){return h},YA:function(){return M},xS:function(){return _},zP:function(){return S}});i(39710),i(26847),i(2394),i(18574),i(73042),i(81738),i(94814),i(29981),i(22960),i(6989),i(72489),i(87799),i(56303),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(56389),i(27530);var s=i(44272),o=i(10388),r=i(15459),a=t([o]);o=(a.then?(await a)():a)[0];const c=["climate","humidifier","water_heater"],u=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],l=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],d=(t,e)=>!t.states[e]||u.includes((0,s.M)(e)),h=(t,e,i,n,s)=>{const o={type:"history/stream",entity_ids:s,start_time:i.toISOString(),end_time:n.toISOString(),minimal_response:!0,no_attributes:!s.some(e=>d(t,e))},r=new f(t);return t.connection.subscribeMessage(t=>e(r.processMessage(t)),o)};class f{processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,i={};for(const n of Object.keys(this.combinedHistory))i[n]=[];for(const n of Object.keys(t.states))i[n]=[];for(const n of Object.keys(i)){if(n in this.combinedHistory&&n in t.states){const e=this.combinedHistory[n],s=e[e.length-1];i[n]=e.concat(t.states[n]),t.states[n][0].lu<s.lu&&(i[n]=i[n].sort((t,e)=>t.lu-e.lu))}else n in this.combinedHistory?i[n]=this.combinedHistory[n]:i[n]=t.states[n];if(e&&n in this.combinedHistory){const t=i[n].filter(t=>t.lu<e);if(!t.length)continue;if(i[n]=i[n].filter(t=>t.lu>=e),i[n].length&&i[n][0].lu===e)continue;const s=t[t.length-1];s.lu=e,i[n].unshift(s)}}return this.combinedHistory=i,this.combinedHistory}constructor(t,e){this.hass=t,this.hoursToShow=e,this.combinedHistory={}}}const _=(t,e,i,n,s,o=!0,r=!0)=>{const a={type:"history/stream",entity_ids:n,start_time:new Date((new Date).getTime()-3600*i*1e3).toISOString(),minimal_response:o,significant_changes_only:r,no_attributes:null!=s?s:!n.some(e=>d(t,e))},c=new f(t,i);return t.connection.subscribeMessage(t=>e(c.processMessage(t)),a)},m=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||l.every(i=>t.attributes[i]===e.attributes[i])),g=(t,e,i,n,s,a,c)=>{const u=[],l=a[0];for(const r of a){if(u.length>0&&r.s===u[u.length-1].state)continue;const a={};null!=c&&c.attributes.device_class&&(a.device_class=null==c?void 0:c.attributes.device_class),u.push({state_localize:(0,o.computeStateDisplayFromEntityAttributes)(t,e,[],i,n[s],s,Object.assign(Object.assign({},r.a||l.a),a),r.s),state:r.s,last_changed:1e3*(r.lc?r.lc:r.lu)})}return{name:(0,r.a)(s,(null==c?void 0:c.attributes)||l.a),entity_id:s,data:u}},b=(t,e,i,n)=>{const o=[];return Object.keys(i).forEach(t=>{const e=i[t],a=e[0],u=(0,s.M)(t),d=[];for(const i of e){let t;if(c.includes(u)){t={state:i.s,last_changed:1e3*i.lu,attributes:{}};for(const e of l)e in i.a&&(t.attributes[e]=i.a[e])}else t={state:i.s,last_changed:1e3*(i.lc?i.lc:i.lu),attributes:{}};d.length>1&&m(t,d[d.length-1])&&m(t,d[d.length-2])||d.push(t)}const h=t in n?n[t].attributes:"friendly_name"in a.a?a.a:void 0;o.push({domain:u,name:(0,r.a)(t,h||{}),entity_id:t,states:d})}),{unit:t,device_class:e,identifier:Object.keys(i).join(""),data:o}},p=["counter","input_number","number"],y=t=>p.includes(t),v=t=>"unit_of_measurement"in t||"state_class"in t,w=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),k=" ",M=(t,e,i,n,s=!1)=>{const o={};i.forEach(t=>{t in e&&(o[t]=e[t])});const r={};Object.entries(o).forEach(([t,e])=>{const i=e.map(t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3}));r[t]=i});const a=E(t,r,[],t.localize,n,s,!0);return((null==a?void 0:a.line)||[]).forEach(t=>{t.data.forEach(t=>{t.statistics=t.states,t.states=[]})}),a},E=(t,e,i,n,o,r=!1,a=!1)=>{const c={},u=[],l={};if(new Set([...i,...Object.keys(e)]).forEach(i=>{i in e?l[i]=e[i]:t.states[i]&&(l[i]=[{s:t.states[i].state,a:t.states[i].attributes,lu:new Date(t.states[i].last_updated).getTime()/1e3}])}),!l)return{line:[],timeline:[]};Object.keys(l).forEach(e=>{var i;const d=l[e];if(0===d.length)return;const h=(0,s.M)(e),f=e in t.states?t.states[e]:void 0,_=f||y(h)?void 0:d.find(t=>t.a&&v(t.a));let m;m=S(h,f,_,o,a)?(null==f?void 0:f.attributes.unit_of_measurement)||(null==_?void 0:_.a.unit_of_measurement)||k:{zone:n("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[h];const b={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[h]||(null===(i=(null==f?void 0:f.attributes)||(null==_?void 0:_.a))||void 0===i?void 0:i.device_class),p=O(m,b,r);m?p&&p in c&&e in c[p]?c[p][e].push(...d):p&&(p in c||(c[p]={}),c[p][e]=d):u.push(g(n,t.locale,t.config,t.entities,e,d,f))});return{line:Object.keys(c).map(e=>{const i=e.split("_"),n=i[0],s=i[1]||void 0;return b(n,s,c[e],t.states)}),timeline:u}},O=(t,e,i)=>i?`${t}_${e||""}`:t,S=(t,e,i,n,s=!1)=>s||y(t)||null!=e&&v(e.attributes)||null!=e&&"sensor"===t&&w(e,n)||null!=i,H=(t,e,i=!0)=>{if(!e)return t;const n=Object.assign(Object.assign({},t),{},{line:[]}),s={};for(const c of t.line){const t=O(c.unit,c.device_class,i);t&&(s[t]={historyItem:c})}for(const c of e.line){var o,r;if(c.unit===k)c.unit=null!==(o=null===(r=t.line.find(t=>t.identifier===c.identifier))||void 0===r?void 0:r.unit)&&void 0!==o?o:k;const e=O(c.unit,c.device_class,i);e&&(e in s?s[e].ltsItem=c:s[e]={ltsItem:c})}for(const{historyItem:c,ltsItem:u}of Object.values(s)){if(!c||!u){n.line.push(c||u);continue}const t=Object.assign(Object.assign({},c),{},{data:[]}),e=new Set([...c.data.map(t=>t.entity_id),...u.data.map(t=>t.entity_id)]);for(const i of e){var a;const e=c.data.find(t=>t.entity_id===i),n=u.data.find(t=>t.entity_id===i);if(!e||!n){t.data.push(e||n);continue}const s=(null===(a=e.states[0])||void 0===a?void 0:a.last_changed)||n.statistics[n.statistics.length-1].last_changed+1,o=[];for(const t of n.statistics){if(t.last_changed>=s)break;o.push(t)}t.data.push(0===o.length?e:Object.assign(Object.assign({},e),{},{statistics:o}))}n.line.push(t)}return n};n()}catch(c){n(c)}})},70963:function(t,e,i){"use strict";i.a(t,async function(t,n){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return z},DEFAULT_ZOOM:function(){return I}});var s,o,r,a,c=i(29694),u=i(75778),l=i(42385),d=i(54982),h=i(75706),f=i(54521),_=i(4490),m=i(20129),g=i(85297),b=i(53389),p=(i(40777),i(12212),i(25518),i(70021),i(26847),i(24819),i(2394),i(81738),i(29981),i(22960),i(6989),i(96821),i(25718),i(87799),i(24533),i(54480),i(69920),i(1455),i(11353),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(48694),i(67398),i(27530),i(73742)),y=i(59048),v=i(7616),w=i(28105),k=i(55815),M=i(37528),E=i(44272),O=i(6219),S=i(15459),H=i(65829),j=i(39800),A=(i(12942),i(31138),i(48017),i(42031)),C=i(89166),Z=i(45063),x=i(93647),D=i(55577),$=t([A,C]);[A,C]=$.then?(await $)():$;var z=0,I=14,V=function(t){function e(){var t;(0,f.Z)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=(0,m.Z)(this,e,[].concat(n)))._mapEntities=[],t._colorDict={},t._colorIndex=0,t._clusterMarkers=!0,t._getHistoryPaths=(0,w.Z)(function(e,i){var n;if(i&&(null!==(n=e.hours_to_show)&&void 0!==n?n:z)){for(var s=[],o=function(){var n,o,c,u=a[r];if("zone"===(0,E.M)(u))return 0;var l=i[u];if(null==l||!l.length)return 0;var d,f=[],_=(0,h.Z)(l);try{for(_.s();!(d=_.n()).done;){var m=d.value,g=m.a.latitude,b=m.a.longitude;if(g&&b){var p={};p.point=[g,b],p.timestamp=new Date(1e3*m.lu),f.push(p)}}}catch(w){_.e(w)}finally{_.f()}var y=null===(n=t._configEntities)||void 0===n?void 0:n.find(function(t){return t.entity===u}),v=null!==(o=null==y?void 0:y.name)&&void 0!==o?o:u in t.hass.states?(0,S.C)(t.hass.states[u]):u;s.push({points:f,name:v,fullDatetime:(null!==(c=e.hours_to_show)&&void 0!==c?c:z)>144,color:t._getColor(u),gradualOpacity:.8})},r=0,a=Object.keys(i);r<a.length;r++)o();return s}}),t}return(0,g.Z)(e,t),(0,_.Z)(e,[{key:"_getAllEntities",value:function(){var t=this.hass,e=new Set,i=[];return Object.values(t.states).forEach(function(t){"latitude"in t.attributes&&"longitude"in t.attributes&&(i.push(t.entity_id),"person"===(0,O.N)(t)&&t.attributes.source&&e.add(t.attributes.source))}),i.filter(function(t){return!e.has(t)})}},{key:"setConfig",value:function(t){var e,i;if(!t)throw new Error("Error in card configuration.");if(!(t.show_all||null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either show_all, entities, or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");if(t.show_all&&(t.entities||t.geo_location_sources))throw new Error("Cannot specify show_all and entities or geo_location_sources");this._config=Object.assign({},t),this.hass&&t.show_all&&(this._config.entities=this._getAllEntities()),this._configEntities=this._config.entities?(0,D.A)(this._config.entities):[],this._mapEntities=this._getMapEntities(),this._clusterMarkers=null===(i=this._config.cluster)||void 0===i||i}},{key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,j.Z)(this._config.aspect_ratio),i=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(i)/25)||3}},{key:"render",value:function(){var t;if(!this._config)return y.Ld;if(this._error)return(0,y.dy)(s||(s=(0,d.Z)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code);var e=!(!this._config.dark_mode&&"dark"!==this._config.theme_mode)||"light"!==this._config.theme_mode&&this.hass.themes.darkMode,i=this._config.theme_mode||(this._config.dark_mode?"dark":"auto");return(0,y.dy)(o||(o=(0,d.Z)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" .themeMode="','" .clusterMarkers="','" interactive-zones render-passive></ha-map> <div id="buttons"> ',' <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> </div> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:I,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones||!1,i,this._clusterMarkers,this._mapEntities.length>1?(0,y.dy)(r||(r=(0,d.Z)([' <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> '])),this.hass.localize("ui.panel.lovelace.cards.map.toggle_grouping"),this._clusterMarkers?"M15,12C13.89,12 13,12.89 13,14A2,2 0 0,0 15,16A2,2 0 0,0 17,14C17,12.89 16.1,12 15,12M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M14,9C14,7.89 13.1,7 12,7C10.89,7 10,7.89 10,9A2,2 0 0,0 12,11A2,2 0 0,0 14,9M9,12A2,2 0 0,0 7,14A2,2 0 0,0 9,16A2,2 0 0,0 11,14C11,12.89 10.1,12 9,12Z":"M16 12C16 10.9 16.9 10 18 10S20 10.9 20 12 19.1 14 18 14 16 13.1 16 12M10 12C10 10.9 10.9 10 12 10S14 10.9 14 12 13.1 14 12 14 10 13.1 10 12M4 12C4 10.9 4.9 10 6 10S8 10.9 8 12 7.1 14 6 14 4 13.1 4 12M13 18C13 16.9 13.9 16 15 16S17 16.9 17 18 16.1 20 15 20 13 19.1 13 18M7 18C7 16.9 7.9 16 9 16S11 16.9 11 18 10.1 20 9 20 7 19.1 7 18M13 6C13 4.9 13.9 4 15 4S17 4.9 17 6 16.1 8 15 8 13 7.1 13 6M7 6C7 4.9 7.9 4 9 4S11 4.9 11 6 10.1 8 9 8 7 7.1 7 6",e?"color:#ffffff":"color:#000000",this._toggleClusterMarkers):y.Ld,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",e?"color:#ffffff":"color:#000000",this._fitMap)}},{key:"shouldUpdate",value:function(t){var e,i;if(!t.has("hass")||t.size>1)return!0;var n=t.get("hass");return!n||!this._configEntities||(n.themes.darkMode!==this.hass.themes.darkMode||(!!t.has("_stateHistory")||(!(null===(e=this._config)||void 0===e||!e.geo_location_sources||n.states===this.hass.states)||(null!==(i=this._config)&&void 0!==i&&i.entities?(0,x.Wh)(this,t):(0,x.SN)(this,t)))))}},{key:"willUpdate",value:function(t){var i,n,s,o;(0,b.Z)(e,"willUpdate",this,3)([t]),null!==(i=this._config)&&void 0!==i&&i.show_all&&(null===(n=this._config)||void 0===n||!n.entities)&&this.hass&&t.has("hass")&&(this._config.entities=this._getAllEntities(),this._configEntities=(0,D.A)(this._config.entities),this._mapEntities=this._getMapEntities()),t.has("hass")&&null!==(s=this._config)&&void 0!==s&&s.geo_location_sources&&!(0,H.v)(this._getSourceEntities(null===(o=t.get("hass"))||void 0===o?void 0:o.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{key:"connectedCallback",value:function(){var t;(0,b.Z)(e,"connectedCallback",this,3)([]),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,b.Z)(e,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:function(){var t,e,i,n=this;(0,M.p)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:z)&&(this._subscribed=(0,C.xS)(this.hass,function(t){n._subscribed&&(n._stateHistory=t)},null!==(i=this._config.hours_to_show)&&void 0!==i?i:z,(this._configEntities||[]).map(function(t){return t.entity}),!1,!1,!1).catch(function(t){n._subscribed=void 0,n._error=t}))}},{key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then(function(t){return null==t?void 0:t()}),this._subscribed=void 0)}},{key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root"),e="panel"===this.layout||"grid"===this.layout;if(this._config&&!e&&t)if(this._config.aspect_ratio){t.style.height="auto";var i=(0,j.Z)(this._config.aspect_ratio);t.style.paddingBottom=i&&i.w>0&&i.h>0?"".concat((100*i.h/i.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{key:"_fitMap",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap()}},{key:"_toggleClusterMarkers",value:function(){this._clusterMarkers=!this._clusterMarkers}},{key:"_getColor",value:function(t){var e=this._colorDict[t];return e||(e=(0,k.Eu)(this._colorIndex),this._colorIndex++,this._colorDict[t]=e,e)}},{key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var i=this._config.geo_location_sources.map(function(t){return"string"==typeof t?{source:t}:t}),n=[],s=i.find(function(t){return"all"===t.source}),o=function(){var t,e,o,c,u,l=a[r],d=i.find(function(t){return t.source===l.attributes.source});"geo_location"===(0,E.M)(l.entity_id)&&(s||d)&&n.push({entity_id:l.entity_id,label_mode:null!==(t=null==d?void 0:d.label_mode)&&void 0!==t?t:null==s?void 0:s.label_mode,attribute:null!==(e=null==d?void 0:d.attribute)&&void 0!==e?e:null==s?void 0:s.attribute,unit:null!==(o=null==d?void 0:d.unit)&&void 0!==o?o:null==s?void 0:s.unit,focus:d?null===(c=d.focus)||void 0===c||c:null===(u=null==s?void 0:s.focus)||void 0===u||u})},r=0,a=Object.values(t);r<a.length;r++)o();return n}},{key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,l.Z)((this._configEntities||[]).map(function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,attribute:t.attribute,unit:t.unit,focus:t.focus,name:t.name}})),(0,l.Z)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map(function(t){return Object.assign(Object.assign({},t),{},{color:e._getColor(t.entity_id)})})))}},{key:"getGridOptions",value:function(){return{columns:"full",rows:4,min_columns:6,min_rows:2}}}],[{key:"getConfigElement",value:(n=(0,u.Z)((0,c.Z)().m(function t(){return(0,c.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("73614"),i.e("86689"),i.e("11730"),i.e("15634"),i.e("26452"),i.e("20278"),i.e("42382"),i.e("16376"),i.e("2769"),i.e("19596"),i.e("1020"),i.e("35598")]).then(i.bind(i,95482));case 1:return t.a(2,document.createElement("hui-map-card-editor"))}},t)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(t,e,i){return{type:"map",entities:(0,Z.j)(t,2,e,i,["device_tracker"]),theme_mode:"auto"}}}]);var n}(y.oi);V.styles=(0,y.iv)(a||(a=(0,d.Z)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit;border-radius:var(--ha-card-border-radius,12px);overflow:hidden}#buttons{position:absolute;top:75px;left:3px;display:flex;flex-direction:column}#root{position:relative;height:100%}"]))),(0,p.__decorate)([(0,v.Cb)({attribute:!1})],V.prototype,"hass",void 0),(0,p.__decorate)([(0,v.Cb)({attribute:!1})],V.prototype,"layout",void 0),(0,p.__decorate)([(0,v.SB)()],V.prototype,"_stateHistory",void 0),(0,p.__decorate)([(0,v.SB)()],V.prototype,"_config",void 0),(0,p.__decorate)([(0,v.IO)("ha-map")],V.prototype,"_map",void 0),(0,p.__decorate)([(0,v.SB)()],V.prototype,"_mapEntities",void 0),(0,p.__decorate)([(0,v.SB)()],V.prototype,"_error",void 0),(0,p.__decorate)([(0,v.SB)()],V.prototype,"_clusterMarkers",void 0),V=(0,p.__decorate)([(0,v.Mo)("hui-map-card")],V),n()}catch(T){n(T)}})},94388:function(t,e,i){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}i(73249),i(84730),i(79133),i(26847),i(54480),i(48694),i(27530),t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},77451:function(t,e,i){"use strict";var n=i(77341),s=i(30456),o=i(42749),r=i(61360),a=TypeError,c=Object.defineProperty,u=s.self!==s;try{if(r){var l=Object.getOwnPropertyDescriptor(s,"self");!u&&l&&l.get&&l.enumerable||o(s,"self",{get:function(){return s},set:function(t){if(this!==s)throw new a("Illegal invocation");c(s,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:u},{self:s})}catch(d){}}}]);
//# sourceMappingURL=35590.195f99f5ab60312a.js.map