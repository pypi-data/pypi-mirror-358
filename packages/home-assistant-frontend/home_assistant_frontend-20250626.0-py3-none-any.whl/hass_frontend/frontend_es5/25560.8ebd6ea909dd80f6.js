(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["25560"],{7214:function(t,e,s){"use strict";s.d(e,{Cj:function(){return _},F7:function(){return r},Hs:function(){return w},Kd:function(){return k},Kj:function(){return p},Nw:function(){return v},PA:function(){return a},Py:function(){return l},Qm:function(){return C},Z0:function(){return b},_Y:function(){return u},_m:function(){return o},dL:function(){return h},dO:function(){return S},hN:function(){return f},h_:function(){return d},j2:function(){return D},q6:function(){return m},uR:function(){return c}});var i=s(75706),n=(s(39710),s(81738),s(72489),s(54480),s(56389),s(15459)),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({}),a=99387==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,o=function(t){return t.sendMessagePromise({type:"recorder/info"})},c=function(t,e){return t.callWS({type:"recorder/list_statistic_ids",statistic_type:e})},l=function(t,e){return t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e})},h=function(t,e,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==s?void 0:s.toISOString(),statistic_ids:i,period:n,units:r,types:a})},u=function(t,e,s,i){return t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar,rolling_window:s.rolling_window})},d=function(t){return t.callWS({type:"recorder/validate_statistics"})},_=function(t,e,s){return t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:s})},f=function(t,e){return t.callWS({type:"recorder/clear_statistics",statistic_ids:e})},p=function(t){var e=null;if(!t)return null;var s,n=(0,i.Z)(t);try{for(n.s();!(s=n.n()).done;){var r=s.value;null!==r.change&&void 0!==r.change&&(null===e?e=r.change:e+=r.change)}}catch(a){n.e(a)}finally{n.f()}return e},m=function(t,e){var s,n=null,r=(0,i.Z)(e);try{for(r.s();!(s=r.n()).done;){var a=s.value;if(a in t){var o=p(t[a]);null!==o&&(null===n?n=o:n+=o)}}}catch(c){r.e(c)}finally{r.f()}return n},v=function(t,e){return t.some(function(t){return void 0!==t[e]&&null!==t[e]})},y=["mean","min","max"],g=["sum","state","change"],b=function(t,e){return!(!y.includes(e)||0===t.mean_type)||!(!g.includes(e)||!t.has_sum)},D=function(t,e,s,i,n){var r=new Date(s).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:i,adjustment_unit_of_measurement:n})},k=function(t,e,s){var i=t.states[e];return i?(0,n.C)(i):(null==s?void 0:s.name)||e},S=function(t,e,s){var i,n;e&&(i=null===(n=t.states[e])||void 0===n?void 0:n.attributes.unit_of_measurement);return void 0===i?null==s?void 0:s.statistics_unit_of_measurement:i},w=function(t){return t.includes(":")},C=function(t){return t.callWS({type:"recorder/update_statistics_issues"})}},6291:function(t,e,s){"use strict";s.d(e,{f:function(){return u}});var i=s(75706),n=s(54521),r=s(4490),a=s(20129),o=s(53389),c=s(85297),l=(s(39710),s(26847),s(81738),s(72489),s(54480),s(1455),s(56389),s(27530),s(73742)),h=s(7616),u=function(t){var e=function(t){function e(){return(0,n.Z)(this,e),(0,a.Z)(this,e,arguments)}return(0,c.Z)(e,t),(0,r.Z)(e,[{key:"connectedCallback",value:function(){(0,o.Z)(e,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,o.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then(function(t){return t()}):t()}this.__unsubs=void 0}}},{key:"updated",value:function(t){if((0,o.Z)(e,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var s,n=(0,i.Z)(t.keys());try{for(n.s();!(s=n.n()).done;){var r=s.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this._checkSubscribed()}}catch(a){n.e(a)}finally{n.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some(function(t){return void 0===e[t]})||(this.__unsubs=this.hassSubscribe())}}])}(t);return(0,l.__decorate)([(0,h.Cb)({attribute:!1})],e.prototype,"hass",void 0),e}},25316:function(t,e,s){"use strict";s.a(t,async function(t,i){try{s.r(e),s.d(e,{HuiEnergyDateSelectionCard:function(){return v}});var n,r,a=s(54982),o=s(54521),c=s(4490),l=s(20129),h=s(85297),u=s(73742),d=s(59048),_=s(7616),f=(s(31138),s(93647)),p=s(25804),m=t([p]);p=(m.then?(await m)():m)[0];var v=function(t){function e(){return(0,o.Z)(this,e),(0,l.Z)(this,e,arguments)}return(0,h.Z)(e,t),(0,c.Z)(e,[{key:"getCardSize",value:function(){return 1}},{key:"getGridOptions",value:function(){return{rows:1,columns:12}}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,f.SN)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){return this.hass&&this._config?(0,d.dy)(n||(n=(0,a.Z)([' <ha-card> <div class="card-content"> <hui-energy-period-selector .hass="','" .collectionKey="','"></hui-energy-period-selector> </div> </ha-card> '])),this.hass,this._config.collection_key):d.Ld}}])}(d.oi);v.styles=(0,d.iv)(r||(r=(0,a.Z)(["ha-card{height:100%;display:flex;flex-direction:column;justify-content:center}"]))),(0,u.__decorate)([(0,_.Cb)({attribute:!1})],v.prototype,"hass",void 0),(0,u.__decorate)([(0,_.SB)()],v.prototype,"_config",void 0),v=(0,u.__decorate)([(0,_.Mo)("hui-energy-date-selection-card")],v),i()}catch(y){i(y)}})},25804:function(t,e,s){"use strict";s.a(t,async function(t,e){try{var i=s(83788),n=(s(26847),s(1455),s(27530),s(73742)),r=(s(98334),s(46021)),a=s(56858),o=s(66233),c=s(90964),l=s(7722),h=s(25025),u=s(66386),d=s(26306),_=s(34635),f=s(73228),p=s(59048),m=s(7616),v=s(28105),y=s(44548),g=s(34302),b=s(40142),D=s(87639),k=(s(41037),s(93673),s(97365)),S=(s(22852),s(29813),s(6640)),w=s(6291),C=s(97711),x=t([i,k,b,g,C,S,y]);[i,k,b,g,C,S,y]=x.then?(await x)():x;let A,O,$,z=t=>t;const Z="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",P=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"];class R extends((0,w.f)(p.oi)){hassSubscribe(){return[(0,S.UB)(this.hass,{key:this.collectionKey}).subscribe(t=>this._updateDates(t))]}_measure(){this.narrow=this.offsetWidth<450}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,D.D)(()=>this._measure(),250,!1))),this._resizeObserver.observe(this)}firstUpdated(){this._attachObserver()}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver())}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}willUpdate(t){var e,s;super.willUpdate(t),this.hasUpdated||this._measure(),(!this.hasUpdated||t.has("hass")&&(null===(e=this.hass)||void 0===e?void 0:e.localize)!==(null===(s=t.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},P.forEach(t=>{this._ranges[this.hass.localize(`ui.components.date-range-picker.ranges.${t}`)]=(0,C.p)(this.hass,t)}))}render(){if(!this.hass||!this._startDate)return p.Ld;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,p.dy)(A||(A=z` <div class="row"> <div class="label"> ${0} </div> <div class="time-handle"> <ha-icon-button-prev .label="${0}" @click="${0}"></ha-icon-button-prev> <ha-icon-button-next .label="${0}" @click="${0}"></ha-icon-button-next> <ha-date-range-picker .hass="${0}" .startDate="${0}" .endDate="${0}" .ranges="${0}" @value-changed="${0}" @preset-selected="${0}" minimal header-position></ha-date-range-picker> </div> ${0} <ha-button-menu> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-check-list-item left @request-selected="${0}" .selected="${0}"> ${0} </ha-check-list-item> <slot name="overflow-menu"></slot> </ha-button-menu> </div> `),"day"===t?this.narrow?(0,b.mn)(this._startDate,this.hass.locale,this.hass.config):(0,b.p6)(this._startDate,this.hass.locale,this.hass.config):"month"===t?(0,b.NC)(this._startDate,this.hass.locale,this.hass.config):"year"===t?(0,b.yQ)(this._startDate,this.hass.locale,this.hass.config):`${(0,b.ud)(this._startDate,this.hass.locale,this.hass.config)} â€“ ${(0,b.ud)(this._endDate||new Date,this.hass.locale,this.hass.config)}`,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this.narrow?p.Ld:(0,p.dy)(O||(O=z`<mwc-button dense outlined @click="${0}"> ${0} </mwc-button>`),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),Z,this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare"))}_updateCollectionPeriod(){const t=(0,S.UB)(this.hass,{key:this.collectionKey});t.setPeriod(this._startDate,this._endDate),t.refresh()}_dateRangeChanged(t){this._startDate=(0,y.AH)(t.detail.value.startDate,r.b,this.hass.locale,this.hass.config),this._endDate=(0,y.AH)(t.detail.value.endDate,a.i,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}_presetSelected(t){localStorage.setItem(`energy-default-period-_${this.collectionKey||"energy"}`,P[t.detail.index])}_pickNow(){if(!this._startDate)return;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),e=new Date;if("month"===t)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_month");else if("quarter"===t)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_quarter");else if("year"===t)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_year");else{const t=(0,g.Bt)(this.hass.locale),s=(0,y.AH)(this._endDate,o.z,this.hass.locale,this.hass.config,{weekStartsOn:t}),i=(0,y.AH)(this._endDate,c.v,this.hass.locale,this.hass.config,{weekStartsOn:t});if(this._startDate.getTime()===s.getTime()&&this._endDate.getTime()===i.getTime())[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_week");else{const s=(0,y.Ai)(this._endDate,this._startDate,l.j,this.hass.locale,this.hass.config);this._startDate=(0,y.AH)((0,y.AH)(e,h.k,this.hass.locale,this.hass.config,s),r.b,this.hass.locale,this.hass.config,{weekStartsOn:t}),this._endDate=(0,y.AH)(e,a.i,this.hass.locale,this.hass.config,{weekStartsOn:t})}}this._updateCollectionPeriod()}_pickPrevious(){this._shift(!1)}_pickNext(){this._shift(!0)}_shift(t){if(!this._startDate)return;const{start:e,end:s}=(0,y.Al)(this._startDate,this._endDate,t,this.hass.locale,this.hass.config);this._startDate=e,this._endDate=s,this._updateCollectionPeriod()}_updateDates(t){this._compare=void 0!==t.startCompare,this._startDate=t.start,this._endDate=t.end||(0,u.p)()}_toggleCompare(t){if("interaction"!==t.detail.source)return;this._compare=t.detail.selected;const e=(0,S.UB)(this.hass,{key:this.collectionKey});e.setCompare(this._compare),e.refresh()}constructor(...t){super(...t),this._ranges={},this._compare=!1,this._simpleRange=(0,v.Z)((t,e,s,i)=>{if(0===(0,l.j)(e,t))return"day";if((0,y.vA)(t,d.b,s,i)&&(0,y.vA)(e,_.h,s,i)){if(0===(0,y.Ai)(e,t,f.d,s,i))return"month";if(2===(0,y.Ai)(e,t,f.d,s,i)&&t.getMonth()%3==0)return"quarter"}return(0,y.vA)(t,d.b,s,i)&&(0,y.vA)(e,_.h,s,i)&&11===(0,y.Ai)(e,t,f.d,s,i)?"year":"other"})}}R.styles=(0,p.iv)($||($=z`.row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}mwc-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--mdc-button-outline-color:currentColor;--primary-color:currentColor;--mdc-theme-primary:currentColor;--mdc-theme-on-primary:currentColor;--mdc-button-disabled-outline-color:var(--disabled-text-color);--mdc-button-disabled-ink-color:var(--disabled-text-color)}`)),(0,n.__decorate)([(0,m.Cb)({attribute:!1})],R.prototype,"hass",void 0),(0,n.__decorate)([(0,m.Cb)({attribute:"collection-key"})],R.prototype,"collectionKey",void 0),(0,n.__decorate)([(0,m.Cb)({type:Boolean,reflect:!0})],R.prototype,"narrow",void 0),(0,n.__decorate)([(0,m.SB)()],R.prototype,"_startDate",void 0),(0,n.__decorate)([(0,m.SB)()],R.prototype,"_endDate",void 0),(0,n.__decorate)([(0,m.SB)()],R.prototype,"_ranges",void 0),(0,n.__decorate)([(0,m.SB)()],R.prototype,"_compare",void 0),R=(0,n.__decorate)([(0,m.Mo)("hui-energy-period-selector")],R),e()}catch(A){e(A)}})},94388:function(t,e,s){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}s(73249),s(84730),s(79133),s(26847),s(54480),s(48694),s(27530),t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},77451:function(t,e,s){"use strict";var i=s(77341),n=s(30456),r=s(42749),a=s(61360),o=TypeError,c=Object.defineProperty,l=n.self!==n;try{if(a){var h=Object.getOwnPropertyDescriptor(n,"self");!l&&h&&h.get&&h.enumerable||r(n,"self",{get:function(){return n},set:function(t){if(this!==n)throw new o("Illegal invocation");c(n,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else i({global:!0,simple:!0,forced:l},{self:n})}catch(u){}},66386:function(t,e,s){"use strict";s.d(e,{p:function(){return n}});var i=s(56858);function n(t){return(0,i.i)(Date.now(),t)}}}]);
//# sourceMappingURL=25560.8ebd6ea909dd80f6.js.map