"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["38086"],{45332:function(n,e,t){function i(n){return null==n||Array.isArray(n)?n:[n]}t.d(e,{r:function(){return i}})},54731:function(n,e,t){t.d(e,{z:function(){return i}});t(39710),t(56389);var i=function(n){return function(e,t){return n.includes(e,t)}}},2080:function(n,e,t){t.d(e,{J:function(){return o},_:function(){return c}});var i=t(61943),r=(t(81738),t(72489),t(54480),t(69920),t(64455),t(32192),/{%|{{/),o=function(n){return r.test(n)},c=function(n){return!!n&&("string"==typeof n?o(n):"object"===(0,i.Z)(n)&&(Array.isArray(n)?n:Object.values(n)).some(function(n){return n&&c(n)}))}},10142:function(n,e,t){t.d(e,{B$:function(){return f},EQ:function(){return m},Es:function(){return g},Gd:function(){return d},HF:function(){return w},Ip:function(){return j},J8:function(){return x},Jd:function(){return E},Kc:function(){return Z},Pl:function(){return A},SC:function(){return p},SQ:function(){return y},T5:function(){return M},W9:function(){return b},Xm:function(){return q},Yc:function(){return l},r4:function(){return _},sq:function(){return v}});var i,r=t(61943),o=t(42385),c=(t(24819),t(2394),t(81738),t(22960),t(6989),t(87799),t(54480),t(67398),t(67050)),u=t(45332),s=t(66095),a=t(64637),f="single",l=10,d=function(n){if("condition"in n&&Array.isArray(n.condition))return{condition:"and",conditions:n.condition};for(var e=0,t=["and","or","not"];e<t.length;e++){var i=t[e];if(i in n)return{condition:i,conditions:n[i]}}return n},g=function(n,e){n.callService("automation","trigger",{entity_id:e,skip_condition:!0})},p=function(n,e){return n.callApi("DELETE","config/automation/config/".concat(e))},_=function(n,e){return n.callApi("GET","config/automation/config/".concat(e))},y=function(n,e){return n.callWS({type:"automation/config",entity_id:e})},v=function(n,e,t){return n.callApi("POST","config/automation/config/".concat(e),t)},m=function(n){n=h(n);for(var e=0,t=["triggers","conditions","actions"];e<t.length;e++){var i=t[e],r=n[i];r&&!Array.isArray(r)&&(n[i]=[r])}return n},h=function(n){return"trigger"in n&&("triggers"in n||(n.triggers=n.trigger),delete n.trigger),"condition"in n&&("conditions"in n||(n.conditions=n.condition),delete n.condition),"action"in n&&("actions"in n||(n.actions=n.action),delete n.action),n.triggers&&(n.triggers=b(n.triggers)),n.actions&&(n.actions=(0,s.eR)(n.actions)),n},b=function(n){return n?Array.isArray(n)?n.map(b):("triggers"in n&&n.triggers&&(n.triggers=b(n.triggers)),"platform"in n&&("trigger"in n||(n.trigger=n.platform),delete n.platform),n):n},Z=function(n){if(!n)return[];var e=[];return(0,u.r)(n).forEach(function(n){"triggers"in n?n.triggers&&e.push.apply(e,(0,o.Z)(Z(n.triggers))):e.push(n)}),e},j=function(n,e){i=n;var t=e?"?".concat((0,a.ou)({expanded:"1"})):"";(0,c.c)("/config/automation/edit/new".concat(t))},w=function(n){j(Object.assign(Object.assign({},n),{},{id:void 0,alias:void 0}))},A=function(){var n=i;return i=void 0,n},E=function(n){if(!n||"object"!==(0,r.Z)(n))return!1;var e=n;return"trigger"in e&&"string"==typeof e.trigger||"platform"in e&&"string"==typeof e.platform},M=function(n){if(!n||"object"!==(0,r.Z)(n))return!1;return"condition"in n&&"string"==typeof n.condition},q=function(n,e,t,i){return n.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:t,variables:i})},x=function(n,e,t){return n.callWS({type:"test_condition",condition:e,variables:t})}},66095:function(n,e,t){t.d(e,{EH:function(){return f},FI:function(){return w},Kx:function(){return g},Pw:function(){return A},TL:function(){return p},ZN:function(){return q},eM:function(){return Z},eR:function(){return M},kC:function(){return y},oE:function(){return b},oR:function(){return m},rg:function(){return j},rq:function(){return v},sf:function(){return E},vA:function(){return l}});t(26847),t(81738),t(6989),t(27530);var i=t(95632),r=t(54731),o=t(67050),c=t(10142),u=t(17433),s=t(64637),a=t(2080);const f=["single","restart","queued","parallel"],l=(0,r.z)(["queued","parallel"]),d=(0,i.Ry)({alias:(0,i.jt)((0,i.Z_)()),continue_on_error:(0,i.jt)((0,i.O7)()),enabled:(0,i.jt)((0,i.O7)())}),g=(0,i.Ry)({entity_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),device_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),area_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),floor_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),label_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())]))}),p=(0,i.f0)(d,(0,i.Ry)({action:(0,i.jt)((0,i.Z_)()),service_template:(0,i.jt)((0,i.Z_)()),entity_id:(0,i.jt)((0,i.Z_)()),target:(0,i.jt)((0,i.G0)([g,(0,i.lF)((0,i.Z_)(),"has_template",n=>(0,a._)(n))])),data:(0,i.jt)((0,i.Ry)()),response_variable:(0,i.jt)((0,i.Z_)()),metadata:(0,i.jt)((0,i.Ry)())})),_=(0,i.f0)(d,(0,i.Ry)({action:(0,i.i0)("media_player.play_media"),target:(0,i.jt)((0,i.Ry)({entity_id:(0,i.jt)((0,i.Z_)())})),entity_id:(0,i.jt)((0,i.Z_)()),data:(0,i.Ry)({media_content_id:(0,i.Z_)(),media_content_type:(0,i.Z_)()}),metadata:(0,i.Ry)()})),y=(n,e,t)=>n.callService("script",e,t),v=n=>"off"===n.state||!!("on"===n.state&&l(n.attributes.mode)&&n.attributes.current<n.attributes.max),m=(n,e)=>n.callApi("DELETE",`config/script/config/${e}`);let h;const b=(n,e)=>n.callApi("GET",`config/script/config/${e}`),Z=(n,e)=>n.callWS({type:"script/config",entity_id:e}),j=(n,e)=>{h=n;const t=e?`?${(0,s.ou)({expanded:"1"})}`:"";(0,o.c)(`/config/script/edit/new${t}`)},w=()=>{const n=h;return h=void 0,n},A=n=>"string"==typeof n&&(0,a._)(n)?"check_condition":"delay"in n?"delay":"wait_template"in n?"wait_template":["condition","and","or","not"].some(e=>e in n)?"check_condition":"event"in n?"fire_event":"device_id"in n?"device_action":"repeat"in n?"repeat":"choose"in n?"choose":"if"in n?"if":"wait_for_trigger"in n?"wait_for_trigger":"variables"in n?"variables":"stop"in n?"stop":"sequence"in n?"sequence":"parallel"in n?"parallel":"set_conversation_response"in n?"set_conversation_response":"action"in n||"service"in n?"metadata"in n&&(0,i.is)(n,_)?"play_media":"service":"unknown",E=(n,e)=>{var t;const i=null===(t=n.services.script[(0,u.p)(e)])||void 0===t?void 0:t.fields;return void 0!==i&&Object.keys(i).length>0},M=n=>{if(!n)return n;if(Array.isArray(n))return n.map(M);if("object"==typeof n&&null!==n&&"service"in n&&("action"in n||(n.action=n.service),delete n.service),"object"==typeof n&&null!==n&&"scene"in n&&(n.action="scene.turn_on",n.target={entity_id:n.scene},delete n.scene),"object"==typeof n&&null!==n&&"sequence"in n)for(const t of n.sequence)M(t);const e=A(n);if("parallel"===e){M(n.parallel)}if("choose"===e){const e=n;if(Array.isArray(e.choose))for(const n of e.choose)M(n.sequence);else e.choose&&M(e.choose.sequence);e.default&&M(e.default)}if("repeat"===e){M(n.repeat.sequence)}if("if"===e){const e=n;M(e.then),e.else&&M(e.else)}if("wait_for_trigger"===e){const e=n;(0,c.W9)(e.wait_for_trigger)}return n},q=n=>{const e=n.sequence;return e&&!Array.isArray(e)&&(n.sequence=[e]),n.sequence&&(n.sequence=M(n.sequence)),n}},18019:function(n,e,t){t.r(e),t.d(e,{addExternalBarCodeListener:function(){return a},attachExternalToApp:function(){return s},handleExternalMessage:function(){return f}});t(26847),t(81738),t(22960),t(54480),t(11353),t(67886),t(65451),t(46015),t(38334),t(94880),t(75643),t(29761),t(48694),t(67398),t(27530);var i=t(39884),r=t(83054),o=t(67050),c=t(10142),u=new Set,s=function(n){window.addEventListener("haptic",function(e){return n.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:e.detail}})}),n.hass.auth.external.addCommandHandler(function(e){return f(n,e)})},a=function(n){return u.add(n),function(){u.delete(n)}},f=function(n,e){var t=n.hass.auth.external;if("restart"===e.command)n.hass.connection.reconnect(!0),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("navigate"===e.command)(0,o.c)(e.payload.path,e.payload.options),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("notifications/show"===e.command)(0,i.B)(n,"hass-show-notifications"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===e.command){var s;if(null!==(s=r.E.history.state)&&void 0!==s&&s.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.B)(n,"hass-toggle-menu"),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("sidebar/show"===e.command){var a;if(null!==(a=r.E.history.state)&&void 0!==a&&a.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.B)(n,"hass-toggle-menu",{open:!0}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===e.command){var f;(0,c.Ip)(null===(f=e.payload)||void 0===f?void 0:f.config),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("improv/discovered_device"===e.command)(0,i.B)(window,"improv-discovered-device",e.payload),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("improv/device_setup_done"===e.command)(0,i.B)(window,"improv-device-setup-done"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("bar_code/scan_result"===e.command)u.forEach(function(n){return n(e)}),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==e.command)return!1;u.forEach(function(n){return n(e)}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}return!0}},8504:function(n,e,t){var i=t(86840),r=Math.floor;n.exports=Number.isInteger||function(n){return!i(n)&&isFinite(n)&&r(n)===n}},44105:function(n,e,t){t.d(e,{Z:function(){return i}});t(73042);function i(n){var e=Object(n),t=[];for(var i in e)t.unshift(i);return function n(){for(;t.length;)if((i=t.pop())in e)return n.value=i,n.done=!1,n;return n.done=!0,n}}},77528:function(n,e,t){t.d(e,{Z:function(){return r}});t(73249),t(84730),t(79133),t(40777),t(26847),t(54480),t(48694),t(27530);var i=t(61943);function r(n){if(null!=n){var e=n["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}throw new TypeError((0,i.Z)(n)+" is not iterable")}},95912:function(n,e,t){t.d(e,{Z:function(){return u}});var i=t(76481),r=t(4506),o=t(23112),c=t(5525);function u(n){return(0,i.Z)(n)||(0,r.Z)(n)||(0,o.Z)(n)||(0,c.Z)()}}}]);
//# sourceMappingURL=38086.a92efc6d44d220bb.js.map