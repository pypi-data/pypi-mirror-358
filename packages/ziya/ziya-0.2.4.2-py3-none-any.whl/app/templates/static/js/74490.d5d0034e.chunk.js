"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[74490],{74490:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var o=t(89379),a=t(65043),r=t(97326),c=t(22019),l=t(85672),i=t(6051),s=t(12624),d=t(8354),u=t(42261),p=t(27210),m=t(32513),h=t(4015),f=t(54522),b=t(76399),g=t(75337),v=t(61966),x=t(58168);const y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};var C=t(22172),A=function(e,n){return a.createElement(C.A,(0,x.A)({},e,{ref:n,icon:y}))};const k=a.forwardRef(A);var j=t(70579);const{Panel:w}=r.A,O=e=>{let{visible:n,onClose:t}=e;const[x,y]=(0,a.useState)({enabled:!0,allowedCommands:["ls","cat","pwd","grep","wc","touch","find","date"],gitOperationsEnabled:!0,safeGitOperations:["status","log","show","diff","branch","remote","ls-files","blame"],timeout:10}),[C,A]=(0,a.useState)(""),[O,S]=(0,a.useState)(!1);(0,a.useEffect)((()=>{n&&E()}),[n]);const E=async()=>{try{const e=await fetch("/api/mcp/shell-config");if(e.ok){const n=await e.json();y(n)}}catch(e){console.error("Failed to fetch shell config:",e)}},z=()=>{C.trim()&&!x.allowedCommands.includes(C.trim())&&(y((e=>(0,o.A)((0,o.A)({},e),{},{allowedCommands:[...e.allowedCommands,C.trim()]}))),A(""))},I=["rm","rmdir","mv","cp","chmod","chown","sudo","su"],P=e=>I.some((n=>e.toLowerCase().includes(n.toLowerCase())));return(0,j.jsx)(l.A,{title:"Shell Command Configuration",open:n,onCancel:t,onOk:async()=>{S(!0);try{const e=await fetch("/api/mcp/shell-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(e.ok){const n=await e.json();n.success?c.Ay.success(n.message||"Shell configuration updated instantly"):c.Ay.error(n.message||"Failed to update shell configuration"),t()}else c.Ay.error("Failed to save shell configuration")}catch(e){c.Ay.error("Failed to save shell configuration"),console.error("Save error:",e)}finally{S(!1)}},confirmLoading:O,width:600,okText:"Save Configuration",children:(0,j.jsxs)(i.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)(i.A,{align:"center",children:[(0,j.jsx)(s.A,{checked:x.enabled,onChange:e=>y((n=>(0,o.A)((0,o.A)({},n),{},{enabled:e})))}),(0,j.jsx)("span",{children:"Enable shell command execution"})]}),(0,j.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:"12px"},children:"When enabled, the AI agent can execute whitelisted shell commands"})]}),(0,j.jsx)(d.A,{}),(0,j.jsx)(u.A,{message:"Security Notice",description:"Only enable commands that are safe for AI execution. Git operations are limited to read-only and safe operations by default.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,j.jsx)(d.A,{}),(0,j.jsxs)(r.A,{defaultActiveKey:["1"],ghost:!0,children:[(0,j.jsxs)(w,{header:"Basic Configuration",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h4",{children:"Command Timeout"}),(0,j.jsx)(p.A,{type:"number",value:x.timeout,onChange:e=>y((n=>(0,o.A)((0,o.A)({},n),{},{timeout:parseInt(e.target.value)||10}))),suffix:"seconds",style:{width:150}})]}),(0,j.jsx)(d.A,{}),(0,j.jsxs)("div",{children:[(0,j.jsxs)(i.A,{align:"center",style:{marginBottom:12},children:[(0,j.jsx)(s.A,{checked:x.gitOperationsEnabled,onChange:e=>y((n=>(0,o.A)((0,o.A)({},n),{},{gitOperationsEnabled:e})))}),(0,j.jsx)("span",{children:"Enable safe Git operations"})]}),(0,j.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"When enabled, allows read-only and safe Git commands"}),x.gitOperationsEnabled&&(0,j.jsxs)("div",{style:{marginLeft:24},children:[(0,j.jsx)("h5",{children:"Allowed Git Operations:"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["status","log","show","diff","branch","remote","config --get","ls-files","ls-tree","blame","tag","stash list","reflog","rev-parse","describe","shortlog","whatchanged"].map((e=>(0,j.jsxs)(m.A,{checked:x.safeGitOperations.includes(e),onChange:()=>(e=>{y((n=>(0,o.A)((0,o.A)({},n),{},{safeGitOperations:n.safeGitOperations.includes(e)?n.safeGitOperations.filter((n=>n!==e)):[...n.safeGitOperations,e]})))})(e),children:["git ",e]},e)))})]})]})]},"1"),(0,j.jsx)(w,{header:"Custom Commands",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("h4",{children:"Additional Allowed Commands"}),(0,j.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"Add custom commands to the whitelist. Be careful with potentially dangerous commands."}),(0,j.jsx)("div",{style:{marginBottom:12},children:(0,j.jsxs)(p.A.Group,{compact:!0,children:[(0,j.jsx)(p.A,{placeholder:"Enter command name",value:C,onChange:e=>A(e.target.value),onPressEnter:z,style:{width:"calc(100% - 80px)"}}),(0,j.jsx)(h.Ay,{type:"primary",icon:(0,j.jsx)(g.A,{}),onClick:z,style:{width:80},children:"Add"})]})}),(0,j.jsx)(f.A,{size:"small",dataSource:x.allowedCommands,renderItem:e=>(0,j.jsx)(f.A.Item,{actions:[(0,j.jsx)(h.Ay,{type:"text",size:"small",icon:(0,j.jsx)(v.A,{}),onClick:()=>(e=>{y((n=>(0,o.A)((0,o.A)({},n),{},{allowedCommands:n.allowedCommands.filter((n=>n!==e))})))})(e),danger:!0})],children:(0,j.jsxs)(i.A,{children:[(0,j.jsx)(b.A,{color:P(e)?"red":"blue",children:e}),P(e)&&(0,j.jsx)(k,{style:{color:"#ff4d4f"}})]})}),style:{maxHeight:200,overflow:"auto"}})]})},"2")]})]})})}},32513:(e,n,t)=>{t.d(n,{A:()=>O});var o=t(65043),a=t(98139),r=t.n(a),c=t(79688),l=t(13758),i=t(12366),s=t(37489),d=t(35296),u=t(78440),p=t(78887),m=t(16436);const h=o.createContext(null);var f=t(23134),b=t(88042),g=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]])}return t};const v=(e,n)=>{var t;const{prefixCls:a,className:v,rootClassName:x,children:y,indeterminate:C=!1,style:A,onMouseEnter:k,onMouseLeave:j,skipGroup:w=!1,disabled:O}=e,S=g(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:E,direction:z,checkbox:I}=o.useContext(d.QO),P=o.useContext(h),{isFormItemInput:N}=o.useContext(m.$W),B=o.useContext(u.A),G=null!==(t=(null===P||void 0===P?void 0:P.disabled)||O)&&void 0!==t?t:B,R=o.useRef(S.value),D=o.useRef(null),F=(0,l.K4)(n,D);o.useEffect((()=>{null===P||void 0===P||P.registerValue(S.value)}),[]),o.useEffect((()=>{if(!w)return S.value!==R.current&&(null===P||void 0===P||P.cancelValue(R.current),null===P||void 0===P||P.registerValue(S.value),R.current=S.value),()=>null===P||void 0===P?void 0:P.cancelValue(S.value)}),[S.value]),o.useEffect((()=>{var e;(null===(e=D.current)||void 0===e?void 0:e.input)&&(D.current.input.indeterminate=C)}),[C]);const M=E("checkbox",a),T=(0,p.A)(M),[L,V,H]=(0,f.Ay)(M,T),W=Object.assign({},S);P&&!w&&(W.onChange=function(){S.onChange&&S.onChange.apply(S,arguments),P.toggleOption&&P.toggleOption({label:y,value:S.value})},W.name=P.name,W.checked=P.value.includes(S.value));const q=r()("".concat(M,"-wrapper"),{["".concat(M,"-rtl")]:"rtl"===z,["".concat(M,"-wrapper-checked")]:W.checked,["".concat(M,"-wrapper-disabled")]:G,["".concat(M,"-wrapper-in-form-item")]:N},null===I||void 0===I?void 0:I.className,v,x,H,T,V),X=r()({["".concat(M,"-indeterminate")]:C},s.D,V),[K,_]=(0,b.A)(W.onClick);return L(o.createElement(i.A,{component:"Checkbox",disabled:G},o.createElement("label",{className:q,style:Object.assign(Object.assign({},null===I||void 0===I?void 0:I.style),A),onMouseEnter:k,onMouseLeave:j,onClick:K},o.createElement(c.A,Object.assign({},W,{onClick:_,prefixCls:M,className:X,disabled:G,ref:F})),void 0!==y&&o.createElement("span",null,y))))};const x=o.forwardRef(v);var y=t(60436),C=t(18574),A=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]])}return t};const k=o.forwardRef(((e,n)=>{const{defaultValue:t,children:a,options:c=[],prefixCls:l,className:i,rootClassName:s,style:u,onChange:m}=e,b=A(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:g,direction:v}=o.useContext(d.QO),[k,j]=o.useState(b.value||t||[]),[w,O]=o.useState([]);o.useEffect((()=>{"value"in b&&j(b.value||[])}),[b.value]);const S=o.useMemo((()=>c.map((e=>"string"===typeof e||"number"===typeof e?{label:e,value:e}:e))),[c]),E=g("checkbox",l),z="".concat(E,"-group"),I=(0,p.A)(E),[P,N,B]=(0,f.Ay)(E,I),G=(0,C.A)(b,["value","disabled"]),R=c.length?S.map((e=>o.createElement(x,{prefixCls:E,key:e.value.toString(),disabled:"disabled"in e?e.disabled:b.disabled,value:e.value,checked:k.includes(e.value),onChange:e.onChange,className:"".concat(z,"-item"),style:e.style,title:e.title,id:e.id,required:e.required},e.label))):a,D={toggleOption:e=>{const n=k.indexOf(e.value),t=(0,y.A)(k);-1===n?t.push(e.value):t.splice(n,1),"value"in b||j(t),null===m||void 0===m||m(t.filter((e=>w.includes(e))).sort(((e,n)=>S.findIndex((n=>n.value===e))-S.findIndex((e=>e.value===n)))))},value:k,disabled:b.disabled,name:b.name,registerValue:e=>{O((n=>[].concat((0,y.A)(n),[e])))},cancelValue:e=>{O((n=>n.filter((n=>n!==e))))}},F=r()(z,{["".concat(z,"-rtl")]:"rtl"===v},i,s,B,I,N);return P(o.createElement("div",Object.assign({className:F,style:u},G,{ref:n}),o.createElement(h.Provider,{value:D},R)))})),j=k,w=x;w.Group=j,w.__ANT_CHECKBOX=!0;const O=w},23134:(e,n,t)=>{t.d(n,{Ay:()=>s,gd:()=>i});var o=t(32516),a=t(94414),r=t(78446),c=t(78855);const l=e=>{const{checkboxCls:n}=e,t="".concat(n,"-wrapper");return[{["".concat(n,"-group")]:Object.assign(Object.assign({},(0,a.dF)(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,["> ".concat(e.antCls,"-row")]:{flex:1}}),[t]:Object.assign(Object.assign({},(0,a.dF)(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},["& + ".concat(t)]:{marginInlineStart:0},["&".concat(t,"-in-form-item")]:{'input[type="checkbox"]':{width:14,height:14}}}),[n]:Object.assign(Object.assign({},(0,a.dF)(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:e.borderRadiusSM,alignSelf:"center",["".concat(n,"-input")]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,["&:focus-visible + ".concat(n,"-inner")]:Object.assign({},(0,a.jk)(e))},["".concat(n,"-inner")]:{boxSizing:"border-box",display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:"".concat((0,o.zA)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:"all ".concat(e.motionDurationSlow),"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:e.calc(e.checkboxSize).div(14).mul(5).equal(),height:e.calc(e.checkboxSize).div(14).mul(8).equal(),border:"".concat((0,o.zA)(e.lineWidthBold)," solid ").concat(e.colorWhite),borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:"all ".concat(e.motionDurationFast," ").concat(e.motionEaseInBack,", opacity ").concat(e.motionDurationFast)}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{["\n        ".concat(t,":not(").concat(t,"-disabled),\n        ").concat(n,":not(").concat(n,"-disabled)\n      ")]:{["&:hover ".concat(n,"-inner")]:{borderColor:e.colorPrimary}},["".concat(t,":not(").concat(t,"-disabled)")]:{["&:hover ".concat(n,"-checked:not(").concat(n,"-disabled) ").concat(n,"-inner")]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},["&:hover ".concat(n,"-checked:not(").concat(n,"-disabled):after")]:{borderColor:e.colorPrimaryHover}}},{["".concat(n,"-checked")]:{["".concat(n,"-inner")]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseOutBack," ").concat(e.motionDurationFast)}}},["\n        ".concat(t,"-checked:not(").concat(t,"-disabled),\n        ").concat(n,"-checked:not(").concat(n,"-disabled)\n      ")]:{["&:hover ".concat(n,"-inner")]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"}}},{[n]:{"&-indeterminate":{["".concat(n,"-inner")]:{backgroundColor:"".concat(e.colorBgContainer," !important"),borderColor:"".concat(e.colorBorder," !important"),"&:after":{top:"50%",insetInlineStart:"50%",width:e.calc(e.fontSizeLG).div(2).equal(),height:e.calc(e.fontSizeLG).div(2).equal(),backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},["&:hover ".concat(n,"-inner")]:{backgroundColor:"".concat(e.colorBgContainer," !important"),borderColor:"".concat(e.colorPrimary," !important")}}}},{["".concat(t,"-disabled")]:{cursor:"not-allowed"},["".concat(n,"-disabled")]:{["&, ".concat(n,"-input")]:{cursor:"not-allowed",pointerEvents:"none"},["".concat(n,"-inner")]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},["&".concat(n,"-indeterminate ").concat(n,"-inner::after")]:{background:e.colorTextDisabled}}}]};function i(e,n){const t=(0,r.oX)(n,{checkboxCls:".".concat(e),checkboxSize:n.controlInteractiveSize});return[l(t)]}const s=(0,c.OF)("Checkbox",((e,n)=>{let{prefixCls:t}=n;return[i(t,e)]}))},88042:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(65043),a=t(45818);function r(e){const n=o.useRef(null),t=()=>{a.A.cancel(n.current),n.current=null};return[()=>{t(),n.current=(0,a.A)((()=>{n.current=null}))},o=>{n.current&&(o.stopPropagation(),t()),null===e||void 0===e||e(o)}]}},79688:(e,n,t)=>{t.d(n,{A:()=>m});var o=t(58168),a=t(89379),r=t(64467),c=t(5544),l=t(80045),i=t(98139),s=t.n(i),d=t(28678),u=t(65043),p=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"];const m=(0,u.forwardRef)((function(e,n){var t=e.prefixCls,i=void 0===t?"rc-checkbox":t,m=e.className,h=e.style,f=e.checked,b=e.disabled,g=e.defaultChecked,v=void 0!==g&&g,x=e.type,y=void 0===x?"checkbox":x,C=e.title,A=e.onChange,k=(0,l.A)(e,p),j=(0,u.useRef)(null),w=(0,u.useRef)(null),O=(0,d.A)(v,{value:f}),S=(0,c.A)(O,2),E=S[0],z=S[1];(0,u.useImperativeHandle)(n,(function(){return{focus:function(e){var n;null===(n=j.current)||void 0===n||n.focus(e)},blur:function(){var e;null===(e=j.current)||void 0===e||e.blur()},input:j.current,nativeElement:w.current}}));var I=s()(i,m,(0,r.A)((0,r.A)({},"".concat(i,"-checked"),E),"".concat(i,"-disabled"),b));return u.createElement("span",{className:I,title:C,style:h,ref:w},u.createElement("input",(0,o.A)({},k,{className:"".concat(i,"-input"),ref:j,onChange:function(n){b||("checked"in e||z(n.target.checked),null===A||void 0===A||A({target:(0,a.A)((0,a.A)({},e),{},{type:y,checked:n.target.checked}),stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()},nativeEvent:n.nativeEvent}))},disabled:b,checked:!!E,type:y})),u.createElement("span",{className:"".concat(i,"-inner")}))}))}}]);
//# sourceMappingURL=74490.d5d0034e.chunk.js.map