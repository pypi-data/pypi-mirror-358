import{p as ge,a0 as pe,ae as $e,af as he,f as h,a as E,s as o,A as L,t as d,d as t,v as xe,W as be,L as O,a2 as K,a9 as Le,Y as we,aa as ke,N as l,g as n,S as ye,aH as Se,e as u,$ as W,U as Ue,a3 as $,a5 as R,h as Y,x as Ie,y as Fe,aI as Te,ah as J,aq as Ae}from"./Style.js?v=1751130222";import{S as Be,h as Pe,g as Ee,L as Q,I as V}from"./api.js?v=1751130222";import{T as Oe}from"./Toggle.js?v=1751130222";var Re=h('<div class="font-bold"> </div> <div> </div>',1),Ge=h('<div class="my-5"></div>'),Ne=h("<!> <!>",1),je=h("<div><!></div>"),qe=h('<form method="post"><!> <!> <!> <!> <!> <div class="flex justify-center w-full"><div><!></div> <!></div></form>'),Me=h('<div class="flex justify-center w-full"><div class="w-52 h-52 mt-6 mb-14"><img loading="lazy" alt="LOGO" referrerpolicy="no-referrer"/></div></div> <!> <div class="flex justify-center w-full"><div><!></div></div> <div></div> <div id="loaded" class="h-0 w-0"></div>',1);function Ce(X,Z){ge(Z,!0);const[ee,ae]=be(),m=()=>we(ke,"$share",ee),G="/a/login/",N="/a/login/fallback/",re="/a/saml/init/";let j=K(!1),te=W(se),_=K(!1),w=pe([]);function v(e){return Le(m(),e)}function se(){return m().backend.sso?window.location.pathname.includes("fallback")?N:re:G}function q(){if(!l(_))return;let e=document.getElementById("id_username");e&&(localStorage.login_username=e.value)}$e(()=>{l(j)&&(localStorage.login_remember=l(_)?"1":"0",l(_)?q():localStorage.login_username="")});function oe(){if(localStorage.login_remember=="1"){O(_,!0);let e=document.getElementById("id_username");e&&localStorage.login_username&&(e.value=localStorage.login_username)}O(j,!0)}function le(){let e=document.querySelectorAll(".aw-backend-form-alert");if(e)for(let s of e)s.field?w.push({color:"red",title:`${v("common.invalid_value")}: "${s.field}"`,msg:s.innerText}):w.push({color:"red",title:v("common.invalid_form"),msg:s.innerText})}he(()=>{oe(),le()});var M=Me(),C=E(M),ne=n(C),ie=n(ne),H=o(C,2);{var de=e=>{var s=Ge();ye(s,21,()=>w,Ue,(k,g)=>{const y=W(()=>l(g).color||"red");Se(k,{get color(){return l(y)},class:"mx-20",children:(S,D)=>{var x=Re(),U=E(x),I=n(U),F=o(U,2),T=n(F);d(()=>{u(I,l(g).title),u(T,l(g).msg)}),t(S,x)},$$slots:{default:!0}})}),t(e,s)};L(H,e=>{w.length&&e(de)})}var z=o(H,2),ve=n(z),ce=n(ve);{var ue=e=>{Be(e,{})},fe=e=>{var s=qe(),k=n(s);Pe(k,Ee);var g=o(k,2);Q(g,{for:"id_username",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.user")]),t(a,r)},$$slots:{default:!0}});var y=o(g,2);V(y,{type:"text",id:"id_username",name:"username",oninput:q});var S=o(y,2);{var D=a=>{var c=Ne(),r=E(c);Q(r,{for:"id_password",class:"mt-2",children:(A,f)=>{var p=$();d(B=>u(p,B),[()=>v("login.pwd")]),t(A,p)},$$slots:{default:!0}});var i=o(r,2);V(i,{type:"password",name:"password",id:"id_password"}),t(a,c)};L(S,a=>{(!m().backend.sso||window.location.pathname.includes("fallback"))&&a(D)})}var x=o(S,2);Oe(x,{class:"mt-2",get checked(){return l(_)},set checked(a){O(_,a,!0)},children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.saveUser")]),t(a,r)},$$slots:{default:!0}});var U=o(x,2),I=n(U),F=n(I);R(F,{type:"submit",class:"mt-5",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.btn")]),t(a,r)},$$slots:{default:!0}});var T=o(I,2);{var _e=a=>{var c=je(),r=n(c);{var i=f=>{R(f,{href:G,get class(){return`ml-2 mt-5 ${J}`},children:(p,B)=>{var b=$();d(P=>u(b,P),[()=>v("login.sso")]),t(p,b)},$$slots:{default:!0}})},A=f=>{R(f,{href:N,get class(){return`ml-2 mt-5 ${J}`},children:(p,B)=>{var b=$();d(P=>u(b,P),[()=>v("login.localUser")]),t(p,b)},$$slots:{default:!0}})};L(r,f=>{window.location.pathname.includes("fallback")?f(i):f(A,!1)})}t(a,c)};L(T,a=>{m().backend.sso&&a(_e)})}d(()=>Y(s,"action",l(te))),t(e,s)};L(ce,e=>{m().backend?e(fe,!1):e(ue)})}var me=o(z,2);d(()=>{Y(ie,"src",m().backend.logo),Ie(me,1,Fe(Te))}),t(X,M),xe(),ae()}Ae(Ce,{target:document.getElementById("login")});
