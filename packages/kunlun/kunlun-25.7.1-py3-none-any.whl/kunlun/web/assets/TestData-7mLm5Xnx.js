import{c as De}from"./use-checkbox-CJl3k6cN.js";import{a as p,am as xt,an as na,c as oa,g as sa,r as $,ao as ra,w as we,f as yt,h as _,ah as Me,b as ia,Z as V,Y as Yt,X as ie,Q as O,_ as v,T as r,R as u,V as C,S as Ee,O as Z,W as D,a2 as Ke,a3 as Ge,C as z,U as ua,ac as da,ab as me}from"./index-DL8e7wsY.js";import{u as ca,a as fa,_ as kt,j as H,i as te,g as L,Q as E}from"./_plugin-vue_export-helper-14mw3PxB.js";import{p as Y,f as ma,g as va,h as ha,c as ga,e as W,d as ya}from"./QSelect-DV3X0g7K.js";import{Q as ba}from"./QPopupProxy-BFJjx2ms.js";import{Q as _a,a as Da,b as bt}from"./QTable-qIY9xbz3.js";import{a as Ie,Q as wa}from"./QExpansionItem-9K1IiNhS.js";import{Q as et}from"./QToolbar-BQDs1kkk.js";import{Q as _t,b as ge,a as Se,C as Ze}from"./QCard-DDJQvXhW.js";import{Q as Ma}from"./QPage-DCOQWS8C.js";import{s as Rt,Q as Dt}from"./notify-DEFy15-Q.js";import{M as Sa,i as pa}from"./MeasurePanel2-IWl37GGG.js";function Ca(){let e=Object.create(null);return{getCache:(a,s)=>e[a]===void 0?e[a]=typeof s=="function"?s():s:e[a],setCache(a,s){e[a]=s},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const ne=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ta(e,a,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),Ra(at(e,a,s))}function wt(e,a,s){return It(ka(e,a,s))}function xa(e){return Ya(e)===0}function He(e,a){return a<=6?31:a<=11||xa(e)?30:29}function Ya(e){const a=ne.length;let s=ne[0],d,c,i,w,o;if(e<s||e>=ne[a-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<a&&(d=ne[o],c=d-s,!(e<d));o+=1)s=d;return w=e-s,c-w<6&&(w=w-c+R(c+4,33)*33),i=F(F(w+1,33)-1,4),i===-1&&(i=4),i}function Et(e,a){const s=ne.length,d=e+621;let c=-14,i=ne[0],w,o,h,x,y;if(e<i||e>=ne[s-1])throw new Error("Invalid Jalaali year "+e);for(y=1;y<s&&(w=ne[y],o=w-i,!(e<w));y+=1)c=c+R(o,33)*8+R(F(o,33),4),i=w;x=e-i,c=c+R(x,33)*8+R(F(x,33)+3,4),F(o,33)===4&&o-x===4&&(c+=1);const T=R(d,4)-R((R(d,100)+1)*3,4)-150,X=20+c-T;return a||(o-x<6&&(x=x-o+R(o+4,33)*33),h=F(F(x+1,33)-1,4),h===-1&&(h=4)),{leap:h,gy:d,march:X}}function ka(e,a,s){const d=Et(e,!0);return at(d.gy,3,d.march)+(a-1)*31-R(a,7)*(a-7)+s-1}function Ra(e){const a=It(e).gy;let s=a-621,d,c,i;const w=Et(s,!1),o=at(a,3,w.march);if(i=e-o,i>=0){if(i<=185)return c=1+R(i,31),d=F(i,31)+1,{jy:s,jm:c,jd:d};i-=186}else s-=1,i+=179,w.leap===1&&(i+=1);return c=7+R(i,30),d=F(i,30)+1,{jy:s,jm:c,jd:d}}function at(e,a,s){let d=R((e+R(a-8,6)+100100)*1461,4)+R(153*F(a+9,12)+2,5)+s-34840408;return d=d-R(R(e+100100+R(a-8,6),100)*3,4)+752,d}function It(e){let a=4*e+139361631;a=a+R(R(4*e+183187720,146097)*3,4)*4-3908;const s=R(F(a,1461),4)*5+308,d=R(F(s,153),5)+1,c=F(R(s,153),12)+1;return{gy:R(a,1461)-100100+R(8-c,6),gm:c,gd:d}}function R(e,a){return~~(e/a)}function F(e,a){return e-~~(e/a)*a}const Ea=["gregorian","persian"],Mt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ea.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ia=["update:modelValue"];function ae(e){return e.year+"/"+Y(e.month)+"/"+Y(e.day)}function La(e,a){const s=p(()=>e.disable!==!0&&e.readonly!==!0),d=p(()=>s.value===!0?0:-1),c=p(()=>{const o=[];return e.color!==void 0&&o.push(`bg-${e.color}`),e.textColor!==void 0&&o.push(`text-${e.textColor}`),o.join(" ")});function i(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function w(o){const h=new Date,x=o===!0?null:0;if(e.calendar==="persian"){const y=Ta(h);return{year:y.jy,month:y.jm,day:y.jd}}return{year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate(),hour:x,minute:x,second:x,millisecond:x}}return{editable:s,tabindex:d,headerClass:c,getLocale:i,getCurrentDate:w}}const Lt=864e5,Ha=36e5,tt=6e4,Ht="YYYY-MM-DDTHH:mm:ss.SSSZ",Oa=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Va=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ze={};function Aa(e,a){const s="("+a.days.join("|")+")",d=e+s;if(ze[d]!==void 0)return ze[d];const c="("+a.daysShort.join("|")+")",i="("+a.months.join("|")+")",w="("+a.monthsShort.join("|")+")",o={};let h=0;const x=e.replace(Va,T=>{switch(h++,T){case"YY":return o.YY=h,"(-?\\d{1,2})";case"YYYY":return o.YYYY=h,"(-?\\d{1,4})";case"M":return o.M=h,"(\\d{1,2})";case"Mo":return o.M=h++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return o.M=h,"(\\d{2})";case"MMM":return o.MMM=h,w;case"MMMM":return o.MMMM=h,i;case"D":return o.D=h,"(\\d{1,2})";case"Do":return o.D=h++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=h,"(\\d{2})";case"H":return o.H=h,"(\\d{1,2})";case"HH":return o.H=h,"(\\d{2})";case"h":return o.h=h,"(\\d{1,2})";case"hh":return o.h=h,"(\\d{2})";case"m":return o.m=h,"(\\d{1,2})";case"mm":return o.m=h,"(\\d{2})";case"s":return o.s=h,"(\\d{1,2})";case"ss":return o.s=h,"(\\d{2})";case"S":return o.S=h,"(\\d{1})";case"SS":return o.S=h,"(\\d{2})";case"SSS":return o.S=h,"(\\d{3})";case"A":return o.A=h,"(AM|PM)";case"a":return o.a=h,"(am|pm)";case"aa":return o.aa=h,"(a\\.m\\.|p\\.m\\.)";case"ddd":return c;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"do":return h++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return h++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return h++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return o.Z=h,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=h,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=h,"(-?\\d+)";case"x":return o.x=h,"(-?\\d{4,})";default:return h--,T[0]==="["&&(T=T.substring(1,T.length-1)),T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),y={map:o,regex:new RegExp("^"+x)};return ze[d]=y,y}function Ot(e,a){return e!==void 0?e:a!==void 0?a.date:na.date}function St(e,a=""){const s=e>0?"-":"+",d=Math.abs(e),c=Math.floor(d/60),i=d%60;return s+Y(c)+a+Y(i)}function qa(e,a,s,d,c){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(c!==void 0&&Object.assign(i,c),e==null||e===""||typeof e!="string")return i;a===void 0&&(a=Ht);const w=Ot(s,xt.props),o=w.months,h=w.monthsShort,{regex:x,map:y}=Aa(a,w),T=e.match(x);if(T===null)return i;let X="";if(y.X!==void 0||y.x!==void 0){const P=parseInt(T[y.X!==void 0?y.X:y.x],10);if(isNaN(P)===!0||P<0)return i;const B=new Date(P*(y.X!==void 0?1e3:1));i.year=B.getFullYear(),i.month=B.getMonth()+1,i.day=B.getDate(),i.hour=B.getHours(),i.minute=B.getMinutes(),i.second=B.getSeconds(),i.millisecond=B.getMilliseconds()}else{if(y.YYYY!==void 0)i.year=parseInt(T[y.YYYY],10);else if(y.YY!==void 0){const P=parseInt(T[y.YY],10);i.year=P<0?P:2e3+P}if(y.M!==void 0){if(i.month=parseInt(T[y.M],10),i.month<1||i.month>12)return i}else y.MMM!==void 0?i.month=h.indexOf(T[y.MMM])+1:y.MMMM!==void 0&&(i.month=o.indexOf(T[y.MMMM])+1);if(y.D!==void 0){if(i.day=parseInt(T[y.D],10),i.year===null||i.month===null||i.day<1)return i;const P=d!=="persian"?new Date(i.year,i.month,0).getDate():He(i.year,i.month);if(i.day>P)return i}y.H!==void 0?i.hour=parseInt(T[y.H],10)%24:y.h!==void 0&&(i.hour=parseInt(T[y.h],10)%12,(y.A&&T[y.A]==="PM"||y.a&&T[y.a]==="pm"||y.aa&&T[y.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),y.m!==void 0&&(i.minute=parseInt(T[y.m],10)%60),y.s!==void 0&&(i.second=parseInt(T[y.s],10)%60),y.S!==void 0&&(i.millisecond=parseInt(T[y.S],10)*10**(3-T[y.S].length)),(y.Z!==void 0||y.ZZ!==void 0)&&(X=y.Z!==void 0?T[y.Z].replace(":",""):T[y.ZZ],i.timezoneOffset=(X[0]==="+"?-1:1)*(60*X.slice(1,3)+1*X.slice(3,5)))}return i.dateHash=Y(i.year,6)+"/"+Y(i.month)+"/"+Y(i.day),i.timeHash=Y(i.hour)+":"+Y(i.minute)+":"+Y(i.second)+X,i}function Xe(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const s=new Date(a.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const d=a.getTimezoneOffset()-s.getTimezoneOffset();a.setHours(a.getHours()-d);const c=(a-s)/(Lt*7);return 1+Math.floor(c)}function G(e,a,s){const d=new Date(e),c=`set${s===!0?"UTC":""}`;switch(a){case"year":case"years":d[`${c}Month`](0);case"month":case"months":d[`${c}Date`](1);case"day":case"days":case"date":d[`${c}Hours`](0);case"hour":case"hours":d[`${c}Minutes`](0);case"minute":case"minutes":d[`${c}Seconds`](0);case"second":case"seconds":d[`${c}Milliseconds`](0)}return d}function Le(e,a,s){return(e.getTime()-e.getTimezoneOffset()*tt-(a.getTime()-a.getTimezoneOffset()*tt))/s}function Vt(e,a,s="days"){const d=new Date(e),c=new Date(a);switch(s){case"years":case"year":return d.getFullYear()-c.getFullYear();case"months":case"month":return(d.getFullYear()-c.getFullYear())*12+d.getMonth()-c.getMonth();case"days":case"day":case"date":return Le(G(d,"day"),G(c,"day"),Lt);case"hours":case"hour":return Le(G(d,"hour"),G(c,"hour"),Ha);case"minutes":case"minute":return Le(G(d,"minute"),G(c,"minute"),tt);case"seconds":case"second":return Le(G(d,"second"),G(c,"second"),1e3)}}function Je(e){return Vt(e,G(e,"year"),"days")+1}function ve(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const pt={YY(e,a,s){const d=this.YYYY(e,a,s)%100;return d>=0?Y(d):"-"+Y(Math.abs(d))},YYYY(e,a,s){return s??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return ve(e.getMonth()+1)},MM(e){return Y(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ve(this.Q(e))},D(e){return e.getDate()},Do(e){return ve(e.getDate())},DD(e){return Y(e.getDate())},DDD(e){return Je(e)},DDDo(e){return ve(Je(e))},DDDD(e){return Y(Je(e),3)},d(e){return e.getDay()},do(e){return ve(e.getDay())},dd(e,a){return a.days[e.getDay()].slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Xe(e)},wo(e){return ve(Xe(e))},ww(e){return Y(Xe(e))},H(e){return e.getHours()},HH(e){return Y(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return Y(this.h(e))},m(e){return e.getMinutes()},mm(e){return Y(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Y(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Y(Math.floor(e.getMilliseconds()/10))},SSS(e){return Y(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,a,s,d){const c=d??e.getTimezoneOffset();return St(c,":")},ZZ(e,a,s,d){const c=d??e.getTimezoneOffset();return St(c)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Na(e,a,s,d,c){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;a===void 0&&(a=Ht);const w=Ot(s,xt.props);return a.replace(Oa,(o,h)=>o in pt?pt[o](i,w,d,c):h===void 0?o:h.split("\\]").join("]"))}const K=20,ja=["Calendar","Years","Months"],Ct=e=>ja.includes(e),We=e=>/^-?[\d]+\/[0-1]\d$/.test(e),he=" â€” ";function le(e){return e.year+"/"+Y(e.month)}const Fa=oa({name:"QDate",props:{...Mt,...ma,...ca,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Mt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:We},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:We},navigationMaxYearMonth:{type:String,validator:We},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ct}},emits:[...Ia,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:s}){const{proxy:d}=sa(),{$q:c}=d,i=fa(e,c),{getCache:w}=Ca(),{tabindex:o,headerClass:h,getLocale:x,getCurrentDate:y}=La(e,c);let T;const X=va(e),P=ha(X),B=$(null),oe=$(dt()),I=$(x()),At=p(()=>dt()),qt=p(()=>x()),J=p(()=>y()),b=$(ct(oe.value,I.value)),j=$(e.defaultView),lt=p(()=>c.lang.rtl===!0?"right":"left"),pe=$(lt.value),Oe=$(lt.value),Ve=b.value.year,Ce=$(Ve-Ve%K-(Ve<0?K:0)),N=$(null),Nt=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(i.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),se=p(()=>e.color||"primary"),ue=p(()=>e.textColor||"white"),Te=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ae=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),U=p(()=>Ae.value.filter(t=>typeof t=="string").map(t=>Qe(t,oe.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),de=p(()=>{const t=l=>Qe(l,oe.value,I.value);return Ae.value.filter(l=>ra(l)===!0&&l.from!==void 0&&l.to!==void 0).map(l=>({from:t(l.from),to:t(l.to)})).filter(l=>l.from.dateHash!==null&&l.to.dateHash!==null&&l.from.dateHash<l.to.dateHash)}),xe=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const l=wt(t.year,t.month,t.day);return new Date(l.gy,l.gm-1,l.gd)}),qe=p(()=>e.calendar==="persian"?ae:(t,l,n)=>Na(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),l===void 0?oe.value:l,n===void 0?I.value:n,t.year,t.timezoneOffset)),ye=p(()=>U.value.length+de.value.reduce((t,l)=>t+1+Vt(xe.value(l.to),xe.value(l.from)),0)),nt=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(N.value!==null){const n=N.value.init,f=xe.value(n);return I.value.daysShort[f.getDay()]+", "+I.value.monthsShort[n.month-1]+" "+n.day+he+"?"}if(ye.value===0)return he;if(ye.value>1)return`${ye.value} ${I.value.pluralDay}`;const t=U.value[0],l=xe.value(t);return isNaN(l.valueOf())===!0?he:I.value.headerTitle!==void 0?I.value.headerTitle(l,t):I.value.daysShort[l.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),jt=p(()=>U.value.concat(de.value.map(l=>l.from)).sort((l,n)=>l.year-n.year||l.month-n.month)[0]),Ft=p(()=>U.value.concat(de.value.map(l=>l.to)).sort((l,n)=>n.year-l.year||n.month-l.month)[0]),ot=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ye.value===0)return he;if(ye.value>1){const t=jt.value,l=Ft.value,n=I.value.monthsShort;return n[t.month-1]+(t.year!==l.year?" "+t.year+he+n[l.month-1]+" ":t.month!==l.month?he+n[l.month-1]:"")+" "+l.year}return U.value[0].year}),Ye=p(()=>{const t=[c.iconSet.datetime.arrowLeft,c.iconSet.datetime.arrowRight];return c.lang.rtl===!0?t.reverse():t}),st=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),Qt=p(()=>{const t=I.value.daysShort,l=st.value;return l>0?t.slice(l,7).concat(t.slice(0,l)):t}),ee=p(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():He(t.year,t.month)}),Pt=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),A=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),q=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ne=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return A.value!==null&&A.value.year>=b.value.year&&(t.year.prev=!1,A.value.year===b.value.year&&A.value.month>=b.value.month&&(t.month.prev=!1)),q.value!==null&&q.value.year<=b.value.year&&(t.year.next=!1,q.value.year===b.value.year&&q.value.month<=b.value.month&&(t.month.next=!1)),t}),ke=p(()=>{const t={};return U.value.forEach(l=>{const n=le(l);t[n]===void 0&&(t[n]=[]),t[n].push(l.day)}),t}),rt=p(()=>{const t={};return de.value.forEach(l=>{const n=le(l.from),f=le(l.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:l.from.day,to:n===f?l.to.day:void 0,range:l}),n<f){let m;const{year:S,month:g}=l.from,M=g<12?{year:S,month:g+1}:{year:S+1,month:1};for(;(m=le(M))<=f;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===f?l.to.day:void 0,range:l}),M.month++,M.month>12&&(M.year++,M.month=1)}}),t}),be=p(()=>{if(N.value===null)return;const{init:t,initHash:l,final:n,finalHash:f}=N.value,[m,S]=l<=f?[t,n]:[n,t],g=le(m),M=le(S);if(g!==Q.value&&M!==Q.value)return;const k={};return g===Q.value?(k.from=m.day,k.includeFrom=!0):k.from=1,M===Q.value?(k.to=S.day,k.includeTo=!0):k.to=ee.value,k}),Q=p(()=>le(b.value)),Bt=p(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ee.value;n++)t[n]=!0;return t}const l=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ee.value;n++){const f=Q.value+"/"+Y(n);t[n]=l(f)}return t}),Ut=p(()=>{const t={};if(e.events===void 0)for(let l=1;l<=ee.value;l++)t[l]=!1;else{const l=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ee.value;n++){const f=Q.value+"/"+Y(n);t[n]=l(f)===!0&&Pt.value(f)}}return t}),$t=p(()=>{let t,l;const{year:n,month:f}=b.value;if(e.calendar!=="persian")t=new Date(n,f-1,1),l=new Date(n,f-1,0).getDate();else{const m=wt(n,f,1);t=new Date(m.gy,m.gm-1,m.gd);let S=f-1,g=n;S===0&&(S=12,g--),l=He(g,S)}return{days:t.getDay()-st.value-1,endDay:l}}),it=p(()=>{const t=[],{days:l,endDay:n}=$t.value,f=l<0?l+7:l;if(f<6)for(let g=n-f;g<=n;g++)t.push({i:g,fill:!0});const m=t.length;for(let g=1;g<=ee.value;g++){const M={i:g,event:Ut.value[g],classes:[]};Bt.value[g]===!0&&(M.in=!0,M.flat=!0),t.push(M)}if(ke.value[Q.value]!==void 0&&ke.value[Q.value].forEach(g=>{const M=m+g-1;Object.assign(t[M],{selected:!0,unelevated:!0,flat:!1,color:se.value,textColor:ue.value})}),rt.value[Q.value]!==void 0&&rt.value[Q.value].forEach(g=>{if(g.from!==void 0){const M=m+g.from-1,k=m+(g.to||ee.value)-1;for(let _e=M;_e<=k;_e++)Object.assign(t[_e],{range:g.range,unelevated:!0,color:se.value,textColor:ue.value});Object.assign(t[M],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[k],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const M=m+g.to-1;for(let k=m;k<=M;k++)Object.assign(t[k],{range:g.range,unelevated:!0,color:se.value,textColor:ue.value});Object.assign(t[M],{flat:!1,rangeTo:!0})}else{const M=m+ee.value-1;for(let k=m;k<=M;k++)Object.assign(t[k],{range:g.range,unelevated:!0,color:se.value,textColor:ue.value})}}),be.value!==void 0){const g=m+be.value.from-1,M=m+be.value.to-1;for(let k=g;k<=M;k++)t[k].color=se.value,t[k].editRange=!0;be.value.includeFrom===!0&&(t[g].editRangeFrom=!0),be.value.includeTo===!0&&(t[M].editRangeTo=!0)}b.value.year===J.value.year&&b.value.month===J.value.month&&(t[m+J.value.day-1].today=!0);const S=t.length%7;if(S>0){const g=7-S;for(let M=1;M<=g;M++)t.push({i:M,fill:!0})}return t.forEach(g=>{let M="q-date__calendar-item ";g.fill===!0?M+="q-date__calendar-item--fill":(M+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(M+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(M+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(M+=` text-${g.color}`)),g.classes=M}),t}),Zt=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});we(()=>e.modelValue,t=>{if(T===JSON.stringify(t))T=0;else{const l=ct(oe.value,I.value);ce(l.year,l.month,l)}}),we(j,()=>{B.value!==null&&d.$el.contains(document.activeElement)===!0&&B.value.focus()}),we(()=>b.value.year+"|"+b.value.month,()=>{s("navigation",{year:b.value.year,month:b.value.month})}),we(At,t=>{gt(t,I.value,"mask"),oe.value=t}),we(qt,t=>{gt(oe.value,t,"locale"),I.value=t});function je(t){T=JSON.stringify(t)}function ut(){const{year:t,month:l,day:n}=J.value,f={...b.value,year:t,month:l,day:n},m=ke.value[le(f)];(m===void 0||m.includes(f.day)===!1)&&Be(f),Fe(f.year,f.month)}function zt(t){Ct(t)===!0&&(j.value=t)}function Xt(t,l){["month","year"].includes(t)&&(t==="month"?mt:Pe)(l===!0?-1:1)}function Fe(t,l){j.value="Calendar",ce(t,l)}function Jt(t,l){if(e.range===!1||!t){N.value=null;return}const n=Object.assign({...b.value},t),f=l!==void 0?Object.assign({...b.value},l):n;N.value={init:n,initHash:ae(n),final:f,finalHash:ae(f)},Fe(n.year,n.month)}function dt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Qe(t,l,n){return qa(t,l,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ct(t,l){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return ft();const f=n[n.length-1],m=Qe(f.from!==void 0?f.from:f,t,l);return m.dateHash===null?ft():m}function ft(){let t,l;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),l=parseInt(n[1],10)}else{const n=J.value!==void 0?J.value:y();t=n.year,l=n.month}return{year:t,month:l,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+Y(l)+"/01"}}function mt(t){let l=b.value.year,n=Number(b.value.month)+t;n===13?(n=1,l++):n===0&&(n=12,l--),ce(l,n),Te.value===!0&&Re("month")}function Pe(t){const l=Number(b.value.year)+t;ce(l,b.value.month),Te.value===!0&&Re("year")}function Wt(t){ce(t,b.value.month),j.value=e.defaultView==="Years"?"Months":"Calendar",Te.value===!0&&Re("year")}function Kt(t){ce(b.value.year,t),j.value="Calendar",Te.value===!0&&Re("month")}function Gt(t,l){(ke.value[l]?.includes(t.day)===!0?Ue:Be)(t)}function re(t){return{year:t.year,month:t.month,day:t.day}}function ce(t,l,n){if(A.value!==null&&t<=A.value.year&&((l<A.value.month||t<A.value.year)&&(l=A.value.month),t=A.value.year),q.value!==null&&t>=q.value.year&&((l>q.value.month||t>q.value.year)&&(l=q.value.month),t=q.value.year),n!==void 0){const{hour:m,minute:S,second:g,millisecond:M,timezoneOffset:k,timeHash:_e}=n;Object.assign(b.value,{hour:m,minute:S,second:g,millisecond:M,timezoneOffset:k,timeHash:_e})}const f=t+"/"+Y(l)+"/01";f!==b.value.dateHash&&(pe.value=b.value.dateHash<f==(c.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(Oe.value=pe.value),yt(()=>{Ce.value=t-t%K-(t<0?K:0),Object.assign(b.value,{year:t,month:l,day:1,dateHash:f})}))}function vt(t,l,n){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:m,details:S}=ht(l,n);je(f),s("update:modelValue",f,m,S)}function Re(t){const l=U.value[0]!==void 0&&U.value[0].dateHash!==null?{...U.value[0]}:{...b.value};yt(()=>{l.year=b.value.year,l.month=b.value.month;const n=e.calendar!=="persian"?new Date(l.year,l.month,0).getDate():He(l.year,l.month);l.day=Math.min(Math.max(1,l.day),n);const f=fe(l),{details:m}=ht("",l);je(f),s("update:modelValue",f,t,m)})}function ht(t,l){return l.from!==void 0?{reason:`${t}-range`,details:{...re(l.target),from:re(l.from),to:re(l.to)}}:{reason:`${t}-day`,details:re(l)}}function fe(t,l,n){return t.from!==void 0?{from:qe.value(t.from,l,n),to:qe.value(t.to,l,n)}:qe.value(t,l,n)}function Be(t){let l;if(e.multiple===!0)if(t.from!==void 0){const n=ae(t.from),f=ae(t.to),m=U.value.filter(g=>g.dateHash<n||g.dateHash>f),S=de.value.filter(({from:g,to:M})=>M.dateHash<n||g.dateHash>f);l=m.concat(S).concat(t).map(g=>fe(g))}else{const n=Ae.value.slice();n.push(fe(t)),l=n}else l=fe(t);vt(l,"add",t)}function Ue(t){if(e.noUnset===!0)return;let l=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=fe(t);t.from!==void 0?l=e.modelValue.filter(f=>f.from!==void 0?f.from!==n.from&&f.to!==n.to:!0):l=e.modelValue.filter(f=>f!==n),l.length===0&&(l=null)}vt(l,"remove",t)}function gt(t,l,n){const f=U.value.concat(de.value).map(S=>fe(S,t,l)).filter(S=>S.from!==void 0?S.from.dateHash!==null&&S.to.dateHash!==null:S.dateHash!==null),m=(e.multiple===!0?f:f[0])||null;je(m),s("update:modelValue",m,n)}function ea(){if(e.minimal!==!0)return _("div",{class:"q-date__header "+h.value},[_("div",{class:"relative-position"},[_(Me,{name:"q-transition--fade"},()=>_("div",{key:"h-yr-"+ot.value,class:"q-date__header-subtitle q-date__header-link "+(j.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:o.value,...w("vY",{onClick(){j.value="Years"},onKeyup(t){t.keyCode===13&&(j.value="Years")}})},[ot.value]))]),_("div",{class:"q-date__header-title relative-position flex no-wrap"},[_("div",{class:"relative-position col"},[_(Me,{name:"q-transition--fade"},()=>_("div",{key:"h-sub"+nt.value,class:"q-date__header-title-label q-date__header-link "+(j.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:o.value,...w("vC",{onClick(){j.value="Calendar"},onKeyup(t){t.keyCode===13&&(j.value="Calendar")}})},[nt.value]))]),e.todayBtn===!0?_(V,{class:"q-date__header-today self-start",icon:c.iconSet.datetime.today,ariaLabel:c.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:o.value,onClick:ut}):null])])}function $e({label:t,type:l,key:n,dir:f,goTo:m,boundaries:S,cls:g}){return[_("div",{class:"row items-center q-date__arrow"},[_(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ye.value[0],ariaLabel:l==="Years"?c.lang.date.prevYear:c.lang.date.prevMonth,tabindex:o.value,disable:S.prev===!1,...w("go-#"+l,{onClick(){m(-1)}})})]),_("div",{class:"relative-position overflow-hidden flex flex-center"+g},[_(Me,{name:"q-transition--jump-"+f},()=>_("div",{key:n},[_(V,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:o.value,...w("view#"+l,{onClick:()=>{j.value=l}})})]))]),_("div",{class:"row items-center q-date__arrow"},[_(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ye.value[1],ariaLabel:l==="Years"?c.lang.date.nextYear:c.lang.date.nextMonth,tabindex:o.value,disable:S.next===!1,...w("go+#"+l,{onClick(){m(1)}})})])]}const ta={Calendar:()=>[_("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[_("div",{class:"q-date__navigation row items-center no-wrap"},$e({label:I.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:pe.value,goTo:mt,boundaries:Ne.value.month,cls:" col"}).concat($e({label:b.value.year,type:"Years",key:b.value.year,dir:Oe.value,goTo:Pe,boundaries:Ne.value.year,cls:""}))),_("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Qt.value.map(t=>_("div",{class:"q-date__calendar-item"},[_("div",t)]))),_("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[_(Me,{name:"q-transition--slide-"+pe.value},()=>_("div",{key:Q.value,class:"q-date__calendar-days fit"},it.value.map(t=>_("div",{class:t.classes},[t.in===!0?_(V,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:o.value,...w("day#"+t.i,{onClick:()=>{aa(t.i)},onMouseover:()=>{la(t.i)}})},t.event!==!1?()=>_("div",{class:"q-date__event bg-"+t.event}):null):_("div",""+t.i)]))))])])],Months(){const t=b.value.year===J.value.year,l=f=>A.value!==null&&b.value.year===A.value.year&&A.value.month>f||q.value!==null&&b.value.year===q.value.year&&q.value.month<f,n=I.value.monthsShort.map((f,m)=>{const S=b.value.month===m+1;return _("div",{class:"q-date__months-item flex flex-center"},[_(V,{class:t===!0&&J.value.month===m+1?"q-date__today":null,flat:S!==!0,label:f,unelevated:S,color:S===!0?se.value:null,textColor:S===!0?ue.value:null,tabindex:o.value,disable:l(m+1),...w("month#"+m,{onClick:()=>{Kt(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(_("div",{class:"row no-wrap full-width"},[$e({label:b.value.year,type:"Years",key:b.value.year,dir:Oe.value,goTo:Pe,boundaries:Ne.value.year,cls:" col"})])),_("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=Ce.value,l=t+K,n=[],f=m=>A.value!==null&&A.value.year>m||q.value!==null&&q.value.year<m;for(let m=t;m<=l;m++){const S=b.value.year===m;n.push(_("div",{class:"q-date__years-item flex flex-center"},[_(V,{key:"yr"+m,class:J.value.year===m?"q-date__today":null,flat:!S,label:m,dense:!0,unelevated:S,color:S===!0?se.value:null,textColor:S===!0?ue.value:null,tabindex:o.value,disable:f(m),...w("yr#"+m,{onClick:()=>{Wt(m)}})})]))}return _("div",{class:"q-date__view q-date__years flex flex-center"},[_("div",{class:"col-auto"},[_(V,{round:!0,dense:!0,flat:!0,icon:Ye.value[0],ariaLabel:c.lang.date.prevRangeYears(K),tabindex:o.value,disable:f(t),...w("y-",{onClick:()=>{Ce.value-=K}})})]),_("div",{class:"q-date__years-content col self-stretch row items-center"},n),_("div",{class:"col-auto"},[_(V,{round:!0,dense:!0,flat:!0,icon:Ye.value[1],ariaLabel:c.lang.date.nextRangeYears(K),tabindex:o.value,disable:f(l),...w("y+",{onClick:()=>{Ce.value+=K}})})])])}};function aa(t){const l={...b.value,day:t};if(e.range===!1){Gt(l,Q.value);return}if(N.value===null){const n=it.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){Ue({target:l,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Ue(l);return}const f=ae(l);N.value={init:l,initHash:f,final:l,finalHash:f},s("rangeStart",re(l))}else{const n=N.value.initHash,f=ae(l),m=n<=f?{from:N.value.init,to:l}:{from:l,to:N.value.init};N.value=null,Be(n===f?l:{target:l,...m}),s("rangeEnd",{from:re(m.from),to:re(m.to)})}}function la(t){if(N.value!==null){const l={...b.value,day:t};Object.assign(N.value,{final:l,finalHash:ae(l)})}}return Object.assign(d,{setToday:ut,setView:zt,offsetCalendar:Xt,setCalendarTo:Fe,setEditingRange:Jt}),()=>{const t=[_("div",{class:"q-date__content col relative-position"},[_(Me,{name:"q-transition--fade"},ta[j.value])])],l=ia(a.default);return l!==void 0&&t.push(_("div",{class:"q-date__actions"},l)),e.name!==void 0&&e.disable!==!0&&P(t,"push"),_("div",{class:Nt.value,...Zt.value},[ea(),_("div",{ref:B,class:"q-date__main col column",tabindex:-1},t)])}}});function Tt(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function Qa(e,a,s={}){const{mimeType:d,byteOrderMark:c,encoding:i}=typeof s=="string"?{mimeType:s}:s,w=i!==void 0?new TextEncoder(i).encode([a]):a,o=c!==void 0?[c,w]:[w],h=new Blob(o,{type:d||"application/octet-stream"}),x=document.createElement("a");x.href=window.URL.createObjectURL(h),x.setAttribute("download",e),typeof x.download>"u"&&x.setAttribute("target","_blank"),x.classList.add("hidden"),x.style.position="fixed",document.body.appendChild(x);try{return x.click(),Tt(x),!0}catch(y){return Tt(x),y}}const Pa={name:"TestReport",props:["item"],components:{MeasurePanel:Sa},setup(){return{notify:Rt()}},data:()=>({reportDataRaw:[],reportData:[],logList:[],filterResult:"ALL",pass:0,fail:0,skip:0,jump:0,finalize:0,idle:0,myChart:null,options:{}}),watch:{item:{handler:function(){this.getLogList(),this.getTestReport()}},filterResult:{handler:function(){if(this.filterResult==="ALL"){this.reportData=this.reportDataRaw;return}if(this.filterResult==="FAILED"){this.reportData=[];for(var e in this.reportDataRaw)this.reportDataRaw[e].result==="FAILED"&&this.reportData.push(this.reportDataRaw[e]);return}if(this.filterResult==="PASSED"){this.reportData=[];for(var a in this.reportDataRaw)this.reportDataRaw[a].result==="PASSED"&&this.reportData.push(this.reportDataRaw[a]);return}}}},mounted(){this.getLogList(),this.getTestReport()},unmounted(){this.myChart.dispose()},methods:{getLogList(){this.$api.post("get-log-list",{item:this.item,hostname:this.$hostname}).then(e=>{this.logList=e.data.data}).catch(e=>{console.log(e)})},getTestReport(){this.filterResult="ALL",this.$api.post("get-test-report",{item:this.item}).then(e=>{this.reportDataRaw=e.data.data,this.reportData=this.reportDataRaw,this.pass=e.data.pass,this.fail=e.data.fail,this.skip=e.data.skip,this.jump=e.data.jump,this.finalize=e.data.finalize,this.idle=e.data.idle,this.drawPieChart(),this.options.series[0].data=[],this.options.series[0].data.push({value:this.pass,name:"PASSED"}),this.options.series[0].data.push({value:this.fail,name:"FAILED"}),this.skip>0&&this.options.series[0].data.push({value:this.skip,name:"SKIPED"}),this.jump>0&&this.options.series[0].data.push({value:this.jump,name:"JUMPED"}),this.finalize>0&&this.options.series[0].data.push({value:this.finalize,name:"FINALIZED"}),this.idle>0&&this.options.series[0].data.push({value:this.idle,name:"NO TEST"}),this.myChart.setOption(this.options,!0),this.notify(e.data.message)}).catch(e=>{console.log(e),this.notify("Request Test Report meets Error!")})},drawPieChart(){var e=document.getElementById("chart-test-report");this.myChart=pa(e,null,{width:600,height:300}),this.options={grid:{top:50},color:["#91cc75","#ee6666","#73c0de","#c67154","#54c6aa","#c65470"],title:{text:"Test Result %",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"70%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}, {d}%({c})"}}]}}}},Ba={class:"row"},Ua={class:"col-12"},$a={class:"row"},Za={class:"col-5 text-subtitle1 text-weight-light text-black"},za={class:"col-12"},Xa={class:"row"},Ja={class:"col-8"},Wa={class:"col-12"},Ka={class:"row"},Ga={class:"col-8"},el={class:"col-12"},tl={class:"row"},al={class:"col-8"},ll={class:"col-12"},nl={class:"row"},ol={class:"col-8"},sl={class:"col-12"},rl={class:"row"},il={class:"col-8"},ul={class:"col-12"},dl={class:"row"},cl={key:0,class:"col-8 text-black"},fl={key:1,class:"col-8 text-red"},ml={key:0,class:"col-12"},vl={class:"row"},hl={class:"col-8 text-red"},gl={class:"col-12"},yl={class:"row"},bl={class:"col-8"},_l={class:"col-12"},Dl={class:"row"},wl={class:"col-8"},Ml={class:"col-12"},Sl={class:"row"},pl={class:"col-4"},Cl={class:"col-3"},Tl={class:"col-4"},xl={class:"col-12"},Yl=["href"],kl={class:"col-12"},Rl={class:"col-12 shadow-2 q-mt-xs"},El={class:"q-mr-md black--text font-weight-light"},Il={class:"row items-center"};function Ll(e,a,s,d,c,i){const w=Yt("MeasurePanel");return O(),ie("div",Ba,[v("div",Ua,[r(ge,{class:"shadow-1"},{default:u(()=>[r(et,{class:"col-6 text-h5 text-weight-light text-black"},{default:u(()=>a[1]||(a[1]=[C("Test Summary")])),_:1}),r(H),r(_t,null,{default:u(()=>[v("div",$a,[v("div",Za,[v("div",za,[v("div",Xa,[a[2]||(a[2]=v("div",{class:"col-4"},"SERNUM:",-1)),v("div",Ja,D(s.item.sernum),1)])]),r(H),v("div",Wa,[v("div",Ka,[a[3]||(a[3]=v("div",{class:"col-4"},"UUTTYPE:",-1)),v("div",Ga,D(s.item.uuttype),1)])]),r(H),v("div",el,[v("div",tl,[a[4]||(a[4]=v("div",{class:"col-4"},"AREA:",-1)),v("div",al,D(s.item.area),1)])]),r(H),v("div",ll,[v("div",nl,[a[5]||(a[5]=v("div",{class:"col-4"},"Test Time:",-1)),v("div",ol,D(s.item.test_time),1)])]),r(H),v("div",sl,[v("div",rl,[a[6]||(a[6]=v("div",{class:"col-4"},"Test Mode:",-1)),v("div",il,D(s.item.mode),1)])]),r(H),v("div",ul,[v("div",dl,[a[7]||(a[7]=v("div",{class:"col-4"},"Test Result:",-1)),s.item.result==="PASS"?(O(),ie("div",cl,D(s.item.result),1)):Ee("",!0),s.item.result==="FAIL"?(O(),ie("div",fl,D(s.item.result),1)):Ee("",!0)])]),r(H),s.item.result==="FAIL"?(O(),ie("div",ml,[v("div",vl,[a[8]||(a[8]=v("div",{class:"col-4"},"Fail Name:",-1)),v("div",hl,D(s.item.step_name),1)])])):Ee("",!0),s.item.result==="FAIL"?(O(),Z(H,{key:1})):Ee("",!0),v("div",gl,[v("div",yl,[a[9]||(a[9]=v("div",{class:"col-4"},"Start Time:",-1)),v("div",bl,D(s.item.start_time.split(".")[0]),1)])]),r(H),v("div",_l,[v("div",Dl,[a[10]||(a[10]=v("div",{class:"col-4"},"End Time:",-1)),v("div",wl,D(s.item.rectime),1)])]),r(H)]),r(Dt),a[11]||(a[11]=v("div",{class:"col-6"},[v("div",{id:"chart-test-report"})],-1))])]),_:1})]),_:1})]),v("div",Ml,[r(te,{bordered:"",class:"shadow-1 text-subtitle1 text-weight-light text-black"},{default:u(()=>[r(Ie,{"expand-separator":"",label:"More Information"},{default:u(()=>[r(H),r(ge,null,{default:u(()=>[v("div",Sl,[v("div",pl,[r(te,{dense:""},{default:u(()=>[r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("Container: "+D(s.item.container)+"@"+D(s.item.machine),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("label1: "+D(s.item.label1),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("label2: "+D(s.item.label2),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("label3: "+D(s.item.label3),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("label4: "+D(s.item.label4),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("label5: "+D(s.item.label5),1)]),_:1})]),_:1})]),_:1})]),r(H,{vertical:"",inset:""}),v("div",Cl,[r(te,{dense:""},{default:u(()=>[r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("ATP Version: "+D(s.item.str9),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("version1: "+D(s.item.version1),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("version2: "+D(s.item.version2),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("version3: "+D(s.item.version3),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("version4: "+D(s.item.version4),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("version5: "+D(s.item.version5),1)]),_:1})]),_:1})]),_:1})]),r(H,{vertical:"",inset:""}),v("div",Tl,[r(te,{dense:""},{default:u(()=>[r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str1: "+D(s.item.str1),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str2: "+D(s.item.str2),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str3: "+D(s.item.str3),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str4: "+D(s.item.str4),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str5: "+D(s.item.str5),1)]),_:1})]),_:1}),r(L,null,{default:u(()=>[r(E,null,{default:u(()=>[C("str6: "+D(s.item.str6),1)]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1})]),v("div",xl,[r(te,{bordered:"",class:"shadow-1 text-subtitle1 text-weight-light text-black"},{default:u(()=>[r(Ie,{"default-opened":"",label:"Test Log List"},{default:u(()=>[r(H),r(ge,null,{default:u(()=>[r(te,null,{default:u(()=>[(O(!0),ie(Ke,null,Ge(e.logList,(o,h)=>z((O(),Z(L,{clickable:"",key:h},{default:u(()=>[r(E,{avatar:""},{default:u(()=>[r(ua,{name:"book"})]),_:1}),r(E,null,{default:u(()=>[v("a",{href:o.url,target:"__blank"},D(o.name+" ("+o.size+")"),9,Yl)]),_:2},1024)]),_:2},1024)),[[da]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),v("div",kl,[r(te,{bordered:"",class:"shadow-1 text-subtitle1 text-weight-light text-black"},{default:u(()=>[r(Ie,{"expand-separator":"",label:"Measure Data"},{default:u(()=>[r(H),r(ge,null,{default:u(()=>[r(w,{containerName:s.item.container,xtermPageHight:300,requestType:"testdata",item:s.item},null,8,["containerName","item"])]),_:1})]),_:1})]),_:1})]),v("div",Rl,[r(ge,{class:"text-subtitle1 text-weight-light text-black"},{default:u(()=>[r(et,null,{default:u(()=>[a[12]||(a[12]=C(" Test Step Information ")),r(Dt),v("span",El,"PASSED: "+D(e.pass)+", FAILED: "+D(e.fail),1),r(ga,{style:{"min-width":"200px"},options:["ALL","PASSED","FAILED"],label:"Filter Test Result",modelValue:e.filterResult,"onUpdate:modelValue":a[0]||(a[0]=o=>e.filterResult=o),outlined:""},null,8,["modelValue"])]),_:1}),r(H),r(_t,null,{default:u(()=>[r(te,null,{default:u(()=>[(O(!0),ie(Ke,null,Ge(e.reportData,(o,h)=>(O(),Z(Ie,{bordered:"","expand-separator":"",key:h},{header:u(()=>[r(E,null,{default:u(()=>[C(D(o.index)+"."+D(o.name)+" -> "+D(o.test_time)+"s ",1)]),_:2},1024),r(E,{side:""},{default:u(()=>[v("div",Il,[z(r(W,{color:"purple","text-color":"white"},{default:u(()=>[C(" LOE: "+D(o.loop_on_error),1),z(v("span",null," /"+D(o.loop_on_count),513),[[me,o.loop_on_count]]),r(Se,null,{default:u(()=>[C("Loop On Error: "+D(o.loop_on_error),1),z(v("span",null,", Loop On Count: "+D(o.loop_on_count),513),[[me,o.loop_on_count]])]),_:2},1024)]),_:2},1536),[[me,o.loop_on_error]]),z(r(W,{color:"purple","text-color":"white",label:"COE"},{default:u(()=>[r(Se,null,{default:u(()=>a[13]||(a[13]=[C("Continue On Error")])),_:1})]),_:2},1536),[[me,o.continue_on_error]]),z(r(W,{color:"purple","text-color":"white",label:"CT:"+o.cycle_time},{default:u(()=>[r(Se,null,{default:u(()=>[C("Cycle Time: "+D(o.cycle_time),1)]),_:2},1024)]),_:2},1032,["label"]),[[me,o.cycle_time]]),z(r(W,{color:"purple","text-color":"white",label:"CC:"+o.cycle_count},{default:u(()=>[r(Se,null,{default:u(()=>[C("Cycle Count: "+D(o.cycle_count),1)]),_:2},1024)]),_:2},1032,["label"]),[[me,o.cycle_count]]),o.result==="PASSED"?(O(),Z(W,{key:0,small:"",label:"",color:"green","text-color":"white"},{default:u(()=>a[14]||(a[14]=[C("PASSED")])),_:1})):o.result==="FAILED"?(O(),Z(W,{key:1,small:"",label:"",color:"red","text-color":"white"},{default:u(()=>a[15]||(a[15]=[C("FAILED")])),_:1})):o.result==="SKIPPED"?(O(),Z(W,{key:2,small:"",label:"",color:"teal","text-color":"white"},{default:u(()=>a[16]||(a[16]=[C("SKIPPED")])),_:1})):o.result==="FINALIZED"?(O(),Z(W,{key:3,color:"purple","text-color":"white",label:"FINALIZE"},{default:u(()=>[r(Se,null,{default:u(()=>a[17]||(a[17]=[C("Finalize Step")])),_:1})]),_:1})):(O(),Z(W,{key:4,small:"",label:"",color:"grey","text-color":"white"},{default:u(()=>a[18]||(a[18]=[C("NO TEST")])),_:1}))])]),_:2},1024)]),_:2},1024))),128)),r(H)]),_:1})]),_:1})]),_:1})])])}const Hl=kt(Pa,[["render",Ll]]),Ol={name:"TestData",components:{TestReport:Hl},setup(){return{notify:Rt()}},data:()=>({dialog:!1,dayRange:[],startDay:"",endDay:"",sernum:"",uuttype:"",area:"",machine:"",result:"",loading:!1,search:"",columns:[{label:"RECORD TIME",align:"center",sortable:!1,name:"rectime",field:"rectime"},{label:"START TIME",align:"center",sortable:!1,name:"start_time",field:"start_time"},{label:"SERNUM",align:"center",sortable:!1,name:"sernum",field:"sernum"},{label:"UUTTYPE",align:"center",sortable:!1,name:"uuttype",field:"uuttype"},{label:"AREA",align:"center",sortable:!1,name:"area",field:"area"},{label:"RESULT",align:"center",sortable:!1,name:"result",field:"result"},{label:"TEST TIME",align:"center",sortable:!1,name:"test_time",field:"test_time"},{label:"STEP NAME",align:"center",sortable:!1,name:"step_name",field:"step_name"},{label:"MODE",align:"center",sortable:!1,name:"mode",field:"mode"},{label:"MACHINE",align:"center",sortable:!1,name:"machine",field:"machine"},{label:"CONTAINER",align:"center",sortable:!1,name:"container",field:"container"},{label:"",sortable:!1,name:"report",field:"report",align:"left",headerStyle:"width: 5px"}],columns2:[{label:"PARENT",align:"center",sortable:!1,name:"parent",field:"parent"},{label:"CHILDREN",align:"center",sortable:!1,name:"children",field:"children"},{label:"USERNAME",align:"center",sortable:!1,name:"username",field:"username"},{label:"LABEL1",align:"center",sortable:!1,name:"label1",field:"label1"},{label:"LABEL2",align:"center",sortable:!1,name:"label2",field:"label2"},{label:"LABEL3",align:"center",sortable:!1,name:"label3",field:"label3"},{label:"LABEL4",align:"center",sortable:!1,name:"label4",field:"label4"},{label:"LABEL5",align:"center",sortable:!1,name:"label5",field:"label5"},{label:"VERSION1",align:"center",sortable:!1,name:"version1",field:"version1"},{label:"VERSION2",align:"center",sortable:!1,name:"version2",field:"version2"},{label:"VERSION3",align:"center",sortable:!1,name:"version3",field:"version3"},{label:"VERSION4",align:"center",sortable:!1,name:"version4",field:"version4"},{label:"VERSION5",align:"center",sortable:!1,name:"version5",field:"version5"},{label:"STR1",align:"center",sortable:!1,name:"str1",field:"str1"},{label:"STR2",align:"center",sortable:!1,name:"str2",field:"str2"},{label:"STR3",align:"center",sortable:!1,name:"str3",field:"str3"},{label:"STR4",align:"center",sortable:!1,name:"str4",field:"str4"},{label:"STR5",align:"center",sortable:!1,name:"str5",field:"str5"},{label:"STR6",align:"center",sortable:!1,name:"str6",field:"str6"},{label:"STR7",align:"center",sortable:!1,name:"str7",field:"str7"},{label:"STR8",align:"center",sortable:!1,name:"str8",field:"str8"},{label:"STR9",align:"center",sortable:!1,name:"str9",field:"str9"}],rows:[],logList:[],item:{}}),mounted(){this.startDay=this.getNextDate(-13),this.endDay=this.getNextDate(0),this.dayRange=$({from:this.startDay,to:this.endDay}),this.getTestData()},beforeUnmount(){},methods:{getTestData(){this.loading=!0,this.$api.post("get-test-data",{sernum:this.sernum,uuttype:this.uuttype,area:this.area,machine:this.machine,result:this.result,start:this.startDay,end:this.endDay}).then(e=>{this.rows=e.data.data,this.loading=!1,this.notify(e.data.message)}).catch(e=>{console.log(e),this.notify("Request Test Data meets Error!")})},openReport(e){this.item=e.row,this.dialog=!0},getLogList(e){this.dialog=!0,this.$api.post("get-log-list",{item:e}).then(a=>{this.logList=a.data.data}).catch(a=>{console.log(a)})},getNextDate(e){var a=new Date;a.setDate(a.getDate()+e);var s=a.getFullYear(),d=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,c=a.getDate()<10?"0"+a.getDate():a.getDate();return s+"/"+d+"/"+c},saveCalender(){console.log(this.dayRange),this.startDay=this.dayRange.from,this.endDay=this.dayRange.to,this.startDay===void 0&&this.endDay===void 0&&(this.startDay=this.dayRange,this.endDay=this.dayRange)},cancelCalender(){this.dayRange=$({from:this.startDay,to:this.endDay})},exportTable(){const e=[this.columns.concat(this.columns2).map(s=>s.label)].concat(this.rows.map(s=>this.columns.concat(this.columns2).map(d=>(d.name,d.name==="start_time"?s[d.name].split(".")[0]:s[d.name])).join(","))).join(`\r
`);Qa("testdata_"+this.startDay.replaceAll("/","")+"_"+this.endDay.replaceAll("/","")+".csv",e,"text/csv")!==!0&&$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}},Vl={class:"row q-ma-md"},Al={class:"col-12"},ql={class:"text-h3 text-weight-light"},Nl={class:"col-8"},jl={class:"row"},Fl={class:"col-4"},Ql={class:"col-4"},Pl={class:"col-4"},Bl={class:"row justify-center"},Ul={class:"row items-center justify-end q-gutter-sm"},$l={class:"col-2 row items-center justify-center"},Zl={class:"col-12 q-mt-xs"};function zl(e,a,s,d,c,i){const w=Yt("TestReport");return O(),Z(Ma,null,{default:u(()=>[v("div",Vl,[v("div",Al,[v("span",ql,D(e.$t("testData.title")),1)]),v("div",Nl,[v("div",jl,[v("div",Fl,[r(De,{label:e.$t("testData.sernumHint"),autosize:"",autofocus:"",outlined:"",clearable:"",autogrow:"",type:"textarea",modelValue:e.sernum,"onUpdate:modelValue":a[0]||(a[0]=o=>e.sernum=o)},null,8,["label","modelValue"]),r(De,{label:e.$t("testData.uuttypeHint"),outlined:"",clearable:"",autogrow:"",type:"textarea",modelValue:e.uuttype,"onUpdate:modelValue":a[1]||(a[1]=o=>e.uuttype=o)},null,8,["label","modelValue"])]),v("div",Ql,[r(De,{label:e.$t("testData.areaHint"),outlined:"",clearable:"",autogrow:"",type:"textarea",modelValue:e.area,"onUpdate:modelValue":a[2]||(a[2]=o=>e.area=o)},null,8,["label","modelValue"]),r(De,{label:e.$t("testData.machineHint"),outlined:"",clearable:"",autogrow:"",type:"textarea",modelValue:e.machine,"onUpdate:modelValue":a[3]||(a[3]=o=>e.machine=o)},null,8,["label","modelValue"])]),v("div",Pl,[r(De,{label:e.$t("testData.resultHint"),outlined:"",clearable:"",autogrow:"",type:"textarea",modelValue:e.result,"onUpdate:modelValue":a[4]||(a[4]=o=>e.result=o)},null,8,["label","modelValue"]),v("div",Bl,[r(V,{icon:"today",color:"secondary",label:e.startDay+" - "+e.endDay},{default:u(()=>[r(ba,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[r(Fa,{modelValue:e.dayRange,"onUpdate:modelValue":a[5]||(a[5]=o=>e.dayRange=o),range:""},{default:u(()=>[v("div",Ul,[z(r(V,{label:"Cancel",color:"primary",flat:"",onClick:i.cancelCalender},null,8,["onClick"]),[[Ze]]),z(r(V,{label:"OK",color:"primary",flat:"",onClick:i.saveCalender},null,8,["onClick"]),[[Ze]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])])])])]),v("div",$l,[r(V,{color:"primary",onClick:a[6]||(a[6]=o=>i.getTestData()),label:e.$t("testData.search")},null,8,["label"]),r(V,{color:"orange","icon-right":"archive",label:"Export to CSV","no-caps":"",onClick:i.exportTable},null,8,["onClick"])]),v("div",Zl,[r(_a,{rows:e.rows,columns:e.columns,"row-key":"name",search:e.search,loading:e.loading,"rows-per-page-options":[10,20,50,0]},{body:u(o=>[r(Da,{props:o},{default:u(()=>[(O(!0),ie(Ke,null,Ge(o.cols,h=>(O(),Z(bt,{key:h.name,props:o},{default:u(()=>[C(D(h.value),1)]),_:2},1032,["props"]))),128)),r(bt,{key:"report",props:o},{default:u(()=>[r(V,{flat:"",round:"",color:"primary",icon:"visibility",size:"sm",onClick:h=>i.openReport(o)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","search","loading"]),r(ya,{modelValue:e.dialog,"onUpdate:modelValue":a[7]||(a[7]=o=>e.dialog=o),persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},{default:u(()=>[r(ge,null,{default:u(()=>[r(et,{class:"bg-primary text-white"},{default:u(()=>[z(r(V,{flat:"",round:"",icon:"close"},null,512),[[Ze]]),r(wa,null,{default:u(()=>[a[8]||(a[8]=v("span",{class:"text-weight-bold"},"Test Report: ",-1)),C(D(e.item.sernum)+" "+D(e.item.uuttype)+" "+D(e.item.area),1)]),_:1})]),_:1}),r(w,{item:e.item},null,8,["item"])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}const rn=kt(Ol,[["render",zl]]);export{rn as default};
