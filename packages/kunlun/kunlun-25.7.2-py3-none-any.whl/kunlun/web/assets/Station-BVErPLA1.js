import{Q as k}from"./QPage-DCOQWS8C.js";import{Q as p,a as Q,T as b}from"./QCardActions-C0mXFwg_.js";import{Q as x,a as u,b as C}from"./QCard-DDJQvXhW.js";import{_ as S,j as L}from"./_plugin-vue_export-helper-14mw3PxB.js";import{c as $,a as T,h as P,b as O,O as m,Q as i,R as a,T as o,_ as c,V as n,W as h,Z as r,Y as g,X as _,a2 as E,a3 as q,aa as I}from"./index-DL8e7wsY.js";import{Q as N,s as V}from"./notify-DEFy15-Q.js";import"./QToolbar-BQDs1kkk.js";const j=$({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:s}){const e=T(()=>{const d=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(l=>t[l]===!0).map(l=>`q-btn-group--${l}`).join(" ");return`q-btn-group row no-wrap${d.length!==0?" "+d:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>P("div",{class:e.value},O(s.default))}}),A="/assets/sunshine-8uBg5lE1.jpg",G={name:"StationPanel",props:["station"],data(){return{}},methods:{toRouter(t){this.$router.push(t)}}},R={class:"text-h5 text-weight-light"},W={class:"text-red"},D={class:"text-weight-light"};function F(t,s,e,d,l,w){return i(),m(C,{class:"shadow-4 q-ma-xs"},{default:a(()=>[e.station.image?(i(),m(p,{key:0,src:this.$hostname+"/static/"+e.station.image,height:"200px"},null,8,["src"])):(i(),m(p,{key:1,src:A,height:50*e.station.row+"px"},null,8,["height"])),o(x,{style:{"margin-top":"-5px"}},{default:a(()=>[c("div",R,[n(h(t.$t("station.title"))+": ",1),c("span",W,h(e.station.name),1)]),c("div",D,h(e.station.desc),1)]),_:1}),o(L,{style:{"margin-top":"-10px"}}),o(Q,null,{default:a(()=>[o(r,{color:"primary",tag:"a",href:"#/autotest/"+e.station.name.toLowerCase()},{default:a(()=>[n(h(t.$t("station.explore")),1)]),_:1},8,["href"]),o(N),o(j,{outline:""},{default:a(()=>[o(r,{color:"secondary",label:e.station.idle},{default:a(()=>[o(u,{anchor:"top middle",self:"center middle"},{default:a(()=>s[0]||(s[0]=[n("IDLE")])),_:1})]),_:1},8,["label"]),o(r,{color:"orange",label:e.station.run},{default:a(()=>[o(u,{anchor:"top middle",self:"center middle"},{default:a(()=>s[1]||(s[1]=[n("RUN")])),_:1})]),_:1},8,["label"]),o(r,{color:"green",label:e.station.pass},{default:a(()=>[o(u,{anchor:"top middle",self:"center middle"},{default:a(()=>s[2]||(s[2]=[n("PASS")])),_:1})]),_:1},8,["label"]),o(r,{color:"red",label:e.station.fail},{default:a(()=>[o(u,{anchor:"top middle",self:"center middle"},{default:a(()=>s[3]||(s[3]=[n("FAIL")])),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const M=S(G,[["render",F],["__scopeId","data-v-15d8c9ff"]]),U={name:"StationPage",components:{ToolBar:b,Panel:M},setup(){return{notify:V()}},data:()=>({url:"",ws:null,timeOuter:null,stationList:[],version:"",host:""}),computed:{},mounted(){this.url=window.location.hash.substring(1).toUpperCase(),this.getPlatformInfo(),this.getStationList(),this.initSocket()},unmounted(){this.ws.close(),this.timeOuter&&clearTimeout(this.timeOuter)},methods:{async initSocket(){const t=this.$hostname.replace("http","ws")+"/ws"+this.url;this.ws=new WebSocket(t),this.ws.onmessage=this.onMessageSocket,this.ws.onerror=this.onErrorSocket,this.ws.onclose=this.onCloseSocket,this.timeOuter&&clearTimeout(this.timeOuter)},onErrorSocket(){this.notify("WS Connection Lost"),this.timeOuter=setTimeout(()=>{this.initSocket()},3e3)},onSendSocket(t){},onCloseSocket(){return!1},onMessageSocket(t){const s=JSON.parse(t.data);s.type==="station"&&this.stationList.forEach(function(e){e.name===s.name&&(e.value=s.data)})},async getPlatformInfo(){this.$api.post("get-platform-info").then(t=>{this.version=t.data.version,this.host=t.data.host,document.title=this.host+" | "+this.version}).catch(t=>{console.log(t)})},async getStationList(){this.$api.post("get-all-stations").then(t=>{this.stationList=t.data.data,this.notify(t.data.message)}).catch(t=>{console.log(t),this.notify("Get Station List meets Error")})}}},z={class:"row"},J={class:"col-12"};function X(t,s,e,d,l,w){const y=g("ToolBar"),B=g("Panel");return i(),m(k,null,{default:a(()=>[c("div",z,[c("div",J,[o(y)]),(i(!0),_(E,null,q(t.stationList,(f,v)=>(i(),_("div",{key:v,class:I("col-"+f.value.col)},[o(B,{station:f.value},null,8,["station"])],2))),128))])]),_:1})}const st=S(U,[["render",X]]);export{st as default};
