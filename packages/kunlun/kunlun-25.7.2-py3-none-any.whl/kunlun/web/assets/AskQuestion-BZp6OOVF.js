import{Q as V}from"./QCardActions-C0mXFwg_.js";import{_ as z,j as S,g as T,Q as q}from"./_plugin-vue_export-helper-14mw3PxB.js";import{c as U,a as I,h as y,U as g,r as _,af as B,O as E,S as b,Q as m,R as i,C as f,T as o,X as p,_ as a,ad as N,ab as Q,W as r,V as h,ag as L,Z as w,a0 as D,a1 as j,a2 as A,a3 as K}from"./index-DL8e7wsY.js";import{u as P,a as H,b as M,c as k}from"./use-checkbox-CJl3k6cN.js";import{c as R,Q as F,d as O}from"./QSelect-DV3X0g7K.js";import{b as W,Q as X}from"./QCard-DDJQvXhW.js";import{s as Z}from"./notify-DEFy15-Q.js";const G=U({name:"QToggle",props:{...H,icon:String,iconColor:String},emits:P,setup(e){function n(t,c){const l=I(()=>(t.value===!0?e.checkedIcon:c.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=I(()=>t.value===!0?e.iconColor:null);return()=>[y("div",{class:"q-toggle__track"}),y("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},l.value!==void 0?[y(g,{name:l.value,color:s.value})]:void 0)]}return M("toggle",n)}}),J={name:"AskQuestion",props:["container","containerName"],setup(){return{notify:Z()}},data:()=>({userInput:[],open:!0}),directives:{nextInput:{mounted:function(e){e.addEventListener("keypress",function(n){if(n=n||window.event,(typeof n.charCode=="number"?n.charCode:n.keyCode)==13){for(var c=document.getElementsByTagName("input"),l=0;l<c.length;l++)if(c[l]===document.activeElement){if(l+1===c.length){var s=document.getElementById("submitQuestion");s.click();return}c[l+1].focus();return}}})}}},computed:{openQuestion(){return this.container.question&&this.open},textType(){return this.container.visible?"text":"password"}},watch:{"container.question"(e){if(this.open=!0,this.userInput.length!==0)return!1;typeof this.container.question=="string"?this.container.options.length?this.userInput=_([]):this.userInput=_(""):typeof this.container.question=="object"&&(this.userInput=_([]),this.container.question.forEach(()=>{this.userInput.push("")}))}},mounted(){},methods:{answerQuestion(){if(typeof this.container.question=="string"&&this.container.options.length&&this.userInput.length<1)return!1;this.open=!1,this.$api.post("answer-question",{answer:this.userInput,container:this.container.name}).then(e=>{this.notify(e.data.message),this.userInput=[]}).catch(e=>{console.log(e)})}}},Y={class:"col-12"},$={class:"col-12 text-subtitle1 text-weight-light text-left",style:{"margin-top":"-5px"}},ee={class:"bg-yellow"},te={key:0,class:"row"},ne={class:"col-12 q-mb-md"},oe={class:"text-h5 text-weight-medium"},se={class:"text-red"},ie={key:0,class:"col-12 q-mb-md"},ae={key:1,class:"col-12 q-mb-md"},le={key:1,class:"row"},ue={class:"col-12 q-mb-md"},re={class:"text-h5 text-weight-medium"},ce={class:"text-red"},de={class:"col-12"},me={class:"row"},he={class:"col-12 q-ma-md text-center"};function pe(e,n,t,c,l,s){const x=B("next-input");return s.openQuestion?(m(),E(O,{key:0,seamless:"",persistent:"","full-width":"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down","transition-duration":"300",modelValue:s.openQuestion,"onUpdate:modelValue":n[2]||(n[2]=u=>s.openQuestion=u),position:"bottom",color:"primary"},{default:i(()=>[f(o(W,null,{default:i(()=>[o(X,null,{default:i(()=>[f(a("div",Y,[o(V,{src:this.$hostname+"/static/"+t.container.image,alt:"Could not display "+e.image,style:N("height:"+50*t.container.height+"px; width: 100%"),fit:"contain"},null,8,["src","alt","style"])],512),[[Q,t.container.image]]),f(a("div",$,[a("span",ee,r(e.$t("question.tips"))+": "+r(t.container.tips),1),o(S)],512),[[Q,t.container.tips]]),t.container.question.length!==0&&typeof t.container.question=="string"?(m(),p("div",te,[a("div",ne,[a("div",oe,[n[3]||(n[3]=h(" [ ")),a("span",se,r(t.container.name),1),h(" ]: "+r(t.container.question),1)])]),t.container.options.length===0?(m(),p("div",ie,[o(k,{style:{"font-size":"22px"},label:e.$t("question.input"),autosize:"",autofocus:"",outlined:"",clearable:"",type:s.textType,modelValue:e.userInput,"onUpdate:modelValue":n[0]||(n[0]=u=>e.userInput=u),onKeyup:L(s.answerQuestion,["enter"])},{append:i(()=>[o(w,{color:"primary text-h6 text-weight-light",size:"md",onClick:s.answerQuestion},{default:i(()=>[o(g,{name:"send"}),h(" "+r(e.$t("question.submit")),1)]),_:1},8,["onClick"])]),_:1},8,["label","type","modelValue","onKeyup"])])):(m(),p("div",ae,[o(R,{style:{"font-size":"22px"},options:t.container.options,label:e.$t("question.select"),outlined:"",clearable:"",multiple:t.container.multiple,modelValue:e.userInput,"onUpdate:modelValue":n[1]||(n[1]=u=>e.userInput=u),"emit-value":"","map-options":""},{option:i(({itemProps:u,opt:d,selected:v,toggleOption:C})=>[o(T,D(j(u)),{default:i(()=>[o(q,{side:""},{default:i(()=>[o(G,{"model-value":v,"onUpdate:modelValue":fe=>C(d)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),o(q,null,{default:i(()=>[o(F,{innerHTML:d.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),append:i(()=>[o(w,{color:"primary text-h6 text-weight-light",size:"md",onClick:s.answerQuestion},{default:i(()=>[o(g,{name:"send"}),h(" "+r(e.$t("question.submit")),1)]),_:1},8,["onClick"])]),_:1},8,["options","label","multiple","modelValue"])]))])):b("",!0),typeof t.container.question=="object"?(m(),p("div",le,[a("div",ue,[a("div",re,[n[4]||(n[4]=h(" [ ")),a("span",ce,r(t.container.name),1),h(" ]: "+r(e.$t("question.questions")),1)])]),a("div",de,[a("div",me,[(m(!0),p(A,null,K(t.container.question,(u,d)=>(m(),p("div",{class:"col-4",key:d},[f(o(k,{style:{"font-size":"22px"},label:u,autosize:"",autofocus:d===0,outlined:"",clearable:"",modelValue:e.userInput[d],"onUpdate:modelValue":v=>e.userInput[d]=v},null,8,["label","autofocus","modelValue","onUpdate:modelValue"]),[[x]])]))),128)),a("div",he,[o(w,{id:"submitQuestion",color:"primary text-h6 text-weight-light",size:"md",onClick:s.answerQuestion},{default:i(()=>[o(g,{name:"send"}),h(" "+r(e.$t("question.submit")),1)]),_:1},8,["onClick"])])])])])):b("",!0)]),_:1})]),_:1},512),[[Q,s.openQuestion]])]),_:1},8,["modelValue"])):b("",!0)}const qe=z(J,[["render",pe]]);export{qe as A};
